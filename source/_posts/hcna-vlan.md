---
title: HCNAå­¦ä¹ â€”â€”VLANé…ç½®
author: luwang
avatar: 'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/custom/avatar.jpg'
authorLink: wallleap.cn
tags:
	- HCNA
	- VLAN
categories:
	- ç½‘ç»œ
	- HCNA
comments: true
photos: 'https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/cover/(00).jpg'
date: 2020-03-07 00:54:04
keywords: 
---

æˆ‘ç»ˆäºæ‰¾åˆ°ä¸€ä¸ªå†™æ–‡ç« çš„å¥½æ–¹æ³•äº†ğŸ˜â€”â€”ä½¿ç”¨**markdown**

å†™åšå®¢ç”¨çš„å°±æ˜¯markdownï¼Œè¯­æ³•å°‘ã€ä½¿ç”¨ç®€å•ï¼Œè€Œä¸”ä¹Ÿä½¿ç”¨ä¹ æƒ¯äº†

è¦æ˜¯èƒ½ç”¨æ¥å†™å¾®ä¿¡æ–‡ç« é‚£å²‚ä¸æ˜¯å¾ˆæ£’

ç„¶åï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªchromeæ’ä»¶â€”â€”**Markdown Here**

ç„¶åä»Šå¤©æ™šä¸Šå°±åœ¨è°ƒè¯•æ¸²æŸ“cssï¼Œå¦‚æœä½ ä»¬æƒ³äº†è§£çš„è¯ï¼Œä¸‹æ¬¡å•ç‹¬å†™ä¸€ç¯‡æ–‡ç« 

------

ç°åœ¨ç›´æ¥å¼€å§‹ä»Šå¤©çš„å†…å®¹å•¦

## VLANåŸºç¡€é…ç½®


ç°åœ¨æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯VLANï¼ŒVLANæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„

åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬å…ˆè®²ä¸‹**å¹¿æ’­åŸŸ**å’Œ**å†²çªåŸŸ**

**å¹¿æ’­åŸŸ**ï¼ˆbroadcast domainï¼‰å°±æ˜¯è¯´å¦‚æœç«™ç‚¹å‘å‡ºä¸€ä¸ªå¹¿æ’­ä¿¡å·åèƒ½æ¥æ”¶åˆ°è¿™ä¸ªä¿¡å·çš„èŒƒå›´ã€‚é€šå¸¸æ¥è¯´ä¸€ä¸ªå±€åŸŸç½‘å°±æ˜¯ä¸€ä¸ªå¹¿æ’­åŸŸã€‚ï¼ˆè·¯ç”±å™¨éš”ç¦»å¹¿æ’­åŸŸï¼‰
**å†²çªåŸŸ**ï¼ˆcollision domainï¼‰ï¼Œæ‰€æœ‰ç›´æ¥è¿æ¥åœ¨ä¸€èµ·çš„ï¼Œè€Œä¸”å¿…é¡»ç«äº‰ä»¥å¤ªç½‘æ€»çº¿çš„èŠ‚ç‚¹éƒ½å¯ä»¥è®¤ä¸ºæ˜¯å¤„åœ¨åŒä¸€ä¸ªå†²çªåŸŸä¸­ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸€æ¬¡åªæœ‰ä¸€ä¸ªè®¾å¤‡å‘é€ä¿¡æ¯ï¼Œå…¶ä»–çš„åªèƒ½ç­‰å¾…ã€‚äº¤æ¢æœºæˆ–hubå¯ä»¥éš”ç¦»å†²çªåŸŸã€‚

### VLANæ˜¯ä»€ä¹ˆ

> **VLAN**ï¼ˆVirtual Local Area Networkï¼‰çš„ä¸­æ–‡åä¸ºâ€è™šæ‹Ÿå±€åŸŸç½‘â€ã€‚
> è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVLANï¼‰æ˜¯ä¸€ç»„é€»è¾‘ä¸Šçš„è®¾å¤‡å’Œç”¨æˆ·ï¼Œè¿™äº›è®¾å¤‡å’Œç”¨æˆ·å¹¶ä¸å—ç‰©ç†ä½ç½®çš„é™åˆ¶ï¼Œå¯ä»¥æ ¹æ®åŠŸèƒ½ã€éƒ¨é—¨åŠåº”ç”¨ç­‰å› ç´ å°†å®ƒä»¬ç»„ç»‡èµ·æ¥ï¼Œç›¸äº’ä¹‹é—´çš„é€šä¿¡å°±å¥½åƒå®ƒä»¬åœ¨åŒä¸€ä¸ªç½‘æ®µä¸­ä¸€æ ·ï¼Œç”±æ­¤å¾—åè™šæ‹Ÿå±€åŸŸç½‘ã€‚
> VLANæ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œå·¥ä½œåœ¨OSIå‚è€ƒæ¨¡å‹çš„ç¬¬2å±‚å’Œç¬¬3å±‚ï¼Œä¸€ä¸ªVLANå°±æ˜¯ä¸€ä¸ªå¹¿æ’­åŸŸï¼ŒVLANä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡ç¬¬3å±‚çš„è·¯ç”±å™¨æ¥å®Œæˆçš„ã€‚
> ä¸ä¼ ç»Ÿçš„å±€åŸŸç½‘æŠ€æœ¯ç›¸æ¯”è¾ƒï¼ŒVLANæŠ€æœ¯æ›´åŠ çµæ´»ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š
>
> - ç½‘ç»œè®¾å¤‡çš„ç§»åŠ¨ã€æ·»åŠ å’Œä¿®æ”¹çš„ç®¡ç†å¼€é”€å‡å°‘ï¼›
> - å¯ä»¥æ§åˆ¶å¹¿æ’­æ´»åŠ¨ï¼›
> - å¯æé«˜ç½‘ç»œçš„å®‰å…¨æ€§ã€‚
>
> åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œä¸€ä¸ªäºŒå±‚ç½‘ç»œå¯ä»¥è¢«åˆ’åˆ†ä¸ºå¤šä¸ªä¸åŒçš„å¹¿æ’­åŸŸï¼Œä¸€ä¸ªå¹¿æ’­åŸŸå¯¹åº”äº†ä¸€ä¸ªç‰¹å®šçš„ç”¨æˆ·ç»„ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™äº›ä¸åŒçš„å¹¿æ’­åŸŸæ˜¯ç›¸äº’éš”ç¦»çš„ã€‚ä¸åŒçš„å¹¿æ’­åŸŸä¹‹é—´æƒ³è¦é€šä¿¡ï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªè·¯ç”±å™¨ã€‚è¿™æ ·çš„ä¸€ä¸ªå¹¿æ’­åŸŸå°±ç§°ä¸ºVLANã€‚

### VLANæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„

äº¤æ¢æœºèƒ½å¤Ÿæœ‰æ•ˆåœ°éš”ç»å†²çªåŸŸï¼Œä½†æ˜¯è¿™ä¸ªç½‘ç»œä¸­çš„è®¾å¤‡è¿˜æ˜¯å¤„äºä¸€ä¸ªå¹¿æ’­åŸŸï¼Œæ‰€æœ‰çš„è®¾å¤‡ä¹‹é—´éƒ½å¯ä»¥ç›¸äº’é€šä¿¡ã€‚

ä½†æ˜¯ï¼Œæœ‰æ—¶æˆ‘ä»¬å¹¶ä¸å¸Œæœ›æ‰€æœ‰è®¾å¤‡éƒ½å¤„äºä¸€ä¸ªå¹¿æ’­åŸŸï¼Œå› æ­¤ï¼Œäººä»¬ä½¿ç”¨VLANæŠ€æœ¯å°†ä¸€ä¸ªç‰©ç†çš„LANåœ¨é€»è¾‘ä¸Šåˆ’åˆ†æˆå¤šä¸ªå¹¿æ’­åŸŸã€‚ï¼ˆ**ä½¿ç”¨VLANéš”ç¦»å¹¿æ’­åŸŸ**ï¼‰

ä¸€ä¸ªVLANä¸­çš„è®¾å¤‡ä¹‹é—´èƒ½å¤Ÿä¹‹é—´é€šä¿¡ï¼Œä½†ä¸åŒVLANå†…çš„è®¾å¤‡ä¹‹é—´ä¸èƒ½ç›´æ¥äº’é€šã€‚

ä¸åŒçš„VLANä½¿ç”¨ä¸åŒçš„VLAN IDåŒºåˆ†ï¼ŒVLAN IDçš„èŒƒå›´æ˜¯0~4095ï¼Œå¯é…ç½®çš„å€¼ä¸º1~4094ï¼Œ0å’Œ4095ä¸ºä¿ç•™å€¼ã€‚

### åˆ’åˆ†ä¾æ®

1ã€æŒ‰ç«¯å£åˆ’åˆ†VLAN

> è®¸å¤šVLANå‚å•†éƒ½åˆ©ç”¨äº¤æ¢æœºçš„ç«¯å£æ¥åˆ’åˆ†VLANæˆå‘˜ã€‚
> è¢«è®¾å®šçš„ç«¯å£éƒ½åœ¨åŒä¸€ä¸ªå¹¿æ’­åŸŸä¸­ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªäº¤æ¢æœºçš„1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ç«¯å£è¢«å®šä¹‰ä¸ºè™šæ‹Ÿç½‘AAAï¼ŒåŒä¸€äº¤æ¢æœºçš„6ï¼Œ7ï¼Œ8ç«¯å£ç»„æˆè™šæ‹Ÿç½‘BBBã€‚è¿™æ ·åšå…è®¸å„ç«¯å£ä¹‹é—´çš„é€šè®¯ï¼Œå¹¶å…è®¸å…±äº«å‹ç½‘ç»œçš„å‡çº§ã€‚ä½†æ˜¯ï¼Œè¿™ç§åˆ’åˆ†æ¨¡å¼å°†è™šæ‹Ÿç½‘é™åˆ¶åœ¨äº†ä¸€å°äº¤æ¢æœºä¸Šã€‚
> ç¬¬äºŒä»£ç«¯å£VLANæŠ€æœ¯å…è®¸è·¨è¶Šå¤šä¸ªäº¤æ¢æœºçš„å¤šä¸ªä¸åŒç«¯å£åˆ’åˆ†VLANï¼Œä¸åŒäº¤æ¢æœºä¸Šçš„è‹¥å¹²ä¸ªç«¯å£å¯ä»¥ç»„æˆåŒä¸€ä¸ªè™šæ‹Ÿç½‘ã€‚
> ä»¥äº¤æ¢æœºç«¯å£æ¥åˆ’åˆ†ç½‘ç»œæˆå‘˜ï¼Œå…¶é…ç½®è¿‡ç¨‹ç®€å•æ˜äº†ã€‚å› æ­¤ï¼Œä»ç›®å‰æ¥çœ‹ï¼Œè¿™ç§æ ¹æ®ç«¯å£æ¥åˆ’åˆ†VLANçš„æ–¹å¼ä»ç„¶æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ã€‚

2ã€æŒ‰MACåœ°å€åˆ’åˆ†VLAN

> è¿™ç§åˆ’åˆ†VLANçš„æ–¹æ³•æ˜¯æ ¹æ®æ¯ä¸ªä¸»æœºçš„MACåœ°å€æ¥åˆ’åˆ†ï¼Œå³å¯¹æ¯ä¸ªMACåœ°å€çš„ä¸»æœºéƒ½é…ç½®å®ƒå±äºå“ªä¸ªç»„ã€‚è¿™ç§åˆ’åˆ†VLANæ–¹æ³•çš„æœ€å¤§ä¼˜ç‚¹å°±æ˜¯å½“ç”¨æˆ·ç‰©ç†ä½ç½®ç§»åŠ¨æ—¶ï¼Œå³ä»ä¸€ä¸ªäº¤æ¢æœºæ¢åˆ°å…¶ä»–çš„äº¤æ¢æœºæ—¶ï¼ŒVLANä¸ç”¨é‡æ–°é…ç½®ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥è®¤ä¸ºè¿™ç§æ ¹æ®MACåœ°å€çš„åˆ’åˆ†æ–¹æ³•æ˜¯åŸºäºç”¨æˆ·çš„VLANï¼Œè¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯åˆå§‹åŒ–æ—¶ï¼Œæ‰€æœ‰çš„ç”¨æˆ·éƒ½å¿…é¡»è¿›è¡Œé…ç½®ï¼Œå¦‚æœæœ‰å‡ ç™¾ä¸ªç”šè‡³ä¸Šåƒä¸ªç”¨æˆ·çš„è¯ï¼Œé…ç½®æ˜¯éå¸¸ç´¯çš„ã€‚è€Œä¸”è¿™ç§åˆ’åˆ†çš„æ–¹æ³•ä¹Ÿå¯¼è‡´äº†äº¤æ¢æœºæ‰§è¡Œæ•ˆç‡çš„é™ä½ï¼Œå› ä¸ºåœ¨æ¯ä¸€ä¸ªäº¤æ¢æœºçš„ç«¯å£éƒ½å¯èƒ½å­˜åœ¨å¾ˆå¤šä¸ªVLANç»„çš„æˆå‘˜ï¼Œè¿™æ ·å°±æ— æ³•é™åˆ¶å¹¿æ’­åŒ…äº†ã€‚å¦å¤–ï¼Œå¯¹äºä½¿ç”¨ç¬”è®°æœ¬ç”µè„‘çš„ç”¨æˆ·æ¥è¯´ï¼Œä»–ä»¬çš„ç½‘å¡å¯èƒ½ç»å¸¸æ›´æ¢ï¼Œè¿™æ ·ï¼ŒVLANå°±å¿…é¡»ä¸åœåœ°é…ç½®ã€‚

3ã€æŒ‰ç½‘ç»œå±‚åˆ’åˆ†

> è¿™ç§åˆ’åˆ†VLANçš„æ–¹æ³•æ˜¯æ ¹æ®æ¯ä¸ªä¸»æœºçš„ç½‘ç»œå±‚åœ°å€æˆ–åè®®ç±»å‹(å¦‚æœæ”¯æŒå¤šåè®®)åˆ’åˆ†çš„ï¼Œè™½ç„¶è¿™ç§åˆ’åˆ†æ–¹æ³•æ˜¯æ ¹æ®ç½‘ç»œåœ°å€ï¼Œæ¯”å¦‚IPåœ°å€ï¼Œä½†å®ƒä¸æ˜¯è·¯ç”±ï¼Œä¸ç½‘ç»œå±‚çš„è·¯ç”±æ¯«æ— å…³ç³»ã€‚
> è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ç”¨æˆ·çš„ç‰©ç†ä½ç½®æ”¹å˜äº†ï¼Œä¸éœ€è¦é‡æ–°é…ç½®æ‰€å±çš„VLANï¼Œè€Œä¸”å¯ä»¥æ ¹æ®åè®®ç±»å‹æ¥åˆ’åˆ†VLANï¼Œè¿™å¯¹ç½‘ç»œç®¡ç†è€…æ¥è¯´å¾ˆé‡è¦ï¼Œè¿˜æœ‰ï¼Œè¿™ç§æ–¹æ³•ä¸éœ€è¦é™„åŠ çš„å¸§æ ‡ç­¾æ¥è¯†åˆ«VLANï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç½‘ç»œçš„é€šä¿¡é‡ã€‚
> è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯æ•ˆç‡ä½ï¼Œå› ä¸ºæ£€æŸ¥æ¯ä¸€ä¸ªæ•°æ®åŒ…çš„ç½‘ç»œå±‚åœ°å€æ˜¯éœ€è¦æ¶ˆè€—å¤„ç†æ—¶é—´çš„(ç›¸å¯¹äºå‰é¢ä¸¤ç§æ–¹æ³•)ï¼Œä¸€èˆ¬çš„äº¤æ¢æœºèŠ¯ç‰‡éƒ½å¯ä»¥è‡ªåŠ¨æ£€æŸ¥ç½‘ç»œä¸Šæ•°æ®åŒ…çš„ä»¥å¤ªç½‘å¸§å¤´ï¼Œä½†è¦è®©èŠ¯ç‰‡èƒ½æ£€æŸ¥IPå¸§å¤´ï¼Œéœ€è¦æ›´é«˜çš„æŠ€æœ¯ï¼ŒåŒæ—¶ä¹Ÿæ›´è´¹æ—¶ã€‚å½“ç„¶ï¼Œè¿™ä¸å„ä¸ªå‚å•†çš„å®ç°æ–¹æ³•æœ‰å…³ã€‚

4ã€æŒ‰IPç»„æ’­åˆ’åˆ†

> IPç»„æ’­å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§VLANçš„å®šä¹‰ï¼Œå³è®¤ä¸ºä¸€ä¸ªç»„æ’­ç»„å°±æ˜¯ä¸€ä¸ªVLANï¼Œè¿™ç§åˆ’åˆ†çš„æ–¹æ³•å°†VLANæ‰©å¤§åˆ°äº†å¹¿åŸŸç½‘ï¼Œå› æ­¤è¿™ç§æ–¹æ³•å…·æœ‰æ›´å¤§çš„çµæ´»æ€§ï¼Œè€Œä¸”ä¹Ÿå¾ˆå®¹æ˜“é€šè¿‡è·¯ç”±å™¨è¿›è¡Œæ‰©å±•ï¼Œå½“ç„¶è¿™ç§æ–¹æ³•ä¸é€‚åˆå±€åŸŸç½‘ï¼Œä¸»è¦æ˜¯æ•ˆç‡ä¸é«˜ã€‚

5ã€åŸºäºè§„åˆ™çš„VLAN

> ä¹Ÿç§°ä¸ºåŸºäºç­–ç•¥çš„VLANã€‚è¿™æ˜¯æœ€çµæ´»çš„VLANåˆ’åˆ†æ–¹æ³•ï¼Œå…·æœ‰è‡ªåŠ¨é…ç½®çš„èƒ½åŠ›ï¼Œèƒ½å¤ŸæŠŠç›¸å…³çš„ç”¨æˆ·è¿æˆä¸€ä½“ï¼Œåœ¨é€»è¾‘åˆ’åˆ†ä¸Šç§°ä¸ºâ€œå…³ç³»ç½‘ç»œâ€ã€‚ç½‘ç»œç®¡ç†å‘˜åªéœ€åœ¨ç½‘ç®¡è½¯ä»¶ä¸­ç¡®å®šåˆ’åˆ†VLANçš„è§„åˆ™ï¼ˆæˆ–å±æ€§ï¼‰ï¼Œé‚£ä¹ˆå½“ä¸€ä¸ªç«™ç‚¹åŠ å…¥ç½‘ç»œä¸­æ—¶ï¼Œå°†ä¼šè¢«â€œæ„ŸçŸ¥â€ï¼Œå¹¶è¢«è‡ªåŠ¨åœ°åŒ…å«è¿›æ­£ç¡®çš„VLANä¸­ã€‚åŒæ—¶ï¼Œå¯¹ç«™ç‚¹çš„ç§»åŠ¨å’Œæ”¹å˜ä¹Ÿå¯è‡ªåŠ¨è¯†åˆ«å’Œè·Ÿè¸ªã€‚
> é‡‡ç”¨è¿™ç§æ–¹æ³•ï¼Œæ•´ä¸ªç½‘ç»œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°é€šè¿‡è·¯ç”±å™¨æ‰©å±•ç½‘ç»œè§„æ¨¡ã€‚æœ‰çš„äº§å“è¿˜æ”¯æŒä¸€ä¸ªç«¯å£ä¸Šçš„ä¸»æœºåˆ†åˆ«å±äºä¸åŒçš„VLANï¼Œè¿™åœ¨äº¤æ¢æœºä¸å…±äº«å¼Hubå…±å­˜çš„ç¯å¢ƒä¸­æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚è‡ªåŠ¨é…ç½®VLANæ—¶ï¼Œäº¤æ¢æœºä¸­è½¯ä»¶è‡ªåŠ¨æ£€æŸ¥è¿›å…¥äº¤æ¢æœºç«¯å£çš„å¹¿æ’­ä¿¡æ¯çš„IPæºåœ°å€ï¼Œç„¶åè½¯ä»¶è‡ªåŠ¨å°†è¿™ä¸ªç«¯å£åˆ†é…ç»™ä¸€ä¸ªç”±IPå­ç½‘æ˜ å°„æˆçš„VLANã€‚

6ã€æŒ‰ç”¨æˆ·å®šä¹‰ã€éç”¨æˆ·æˆæƒåˆ’åˆ†

> åŸºäºç”¨æˆ·å®šä¹‰ã€éç”¨æˆ·æˆæƒæ¥åˆ’åˆ†VLANï¼Œæ˜¯æŒ‡ä¸ºäº†é€‚åº”ç‰¹åˆ«çš„VLANç½‘ç»œï¼Œæ ¹æ®å…·ä½“çš„ç½‘ç»œç”¨æˆ·çš„ç‰¹åˆ«è¦æ±‚æ¥å®šä¹‰å’Œè®¾è®¡VLANï¼Œè€Œä¸”å¯ä»¥è®©éVLANç¾¤ä½“ç”¨æˆ·è®¿é—®VLANï¼Œä½†æ˜¯éœ€è¦æä¾›ç”¨æˆ·å¯†ç ï¼Œåœ¨å¾—åˆ°VLANç®¡ç†çš„è®¤è¯åæ‰å¯ä»¥åŠ å…¥ä¸€ä¸ªVLANã€‚
> ä»¥ä¸Šåˆ’åˆ†VLANçš„æ–¹å¼ä¸­ï¼ŒåŸºäºç«¯å£çš„VLANç«¯å£æ–¹å¼å»ºç«‹åœ¨ç‰©ç†å±‚ä¸Šï¼›MACæ–¹å¼å»ºç«‹åœ¨æ•°æ®é“¾è·¯å±‚ä¸Šï¼›ç½‘ç»œå±‚å’ŒIPå¹¿æ’­æ–¹å¼å»ºç«‹åœ¨ç¬¬ä¸‰å±‚ä¸Šã€‚

### åŸºæœ¬é…ç½®

1ã€åˆ›å»ºVLAN

```
[s1]vlan 10                  # åœ¨ç³»ç»Ÿè§†å›¾åˆ›å»ºvlan
[s1-vlan10]description VLAN10   # å‘½å
[s1-vlan10]vlan 20      # å¯ä»¥åœ¨è¿™ä¸ªè§†å›¾æ¥ç€åˆ›å»ºvlan
# åˆ›å»ºå¤šä¸ªvlan
[s1]vlan batch 30 40
```

2ã€æŸ¥çœ‹VLANä¿¡æ¯

```
[s1]display vlan
```

3ã€æŸ¥çœ‹é…ç½®å¥½çš„VLANçš„ç®€è¦ä¿¡æ¯

```
[s1]display vlan summary
```

4ã€æŸ¥çœ‹VLANå’Œæ¥å£é…ç½®æƒ…å†µ

```
[s1]display port vlan
```

## VLANæŠ€æœ¯åŸç†

äº¤æ¢æœºç”¨VLANæ ‡ç­¾æ¥åŒºåˆ†ä¸åŒVLANçš„ä»¥å¤ªç½‘å¸§

![pic48](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic48.png)

å¸§æ ¼å¼

![pic49](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic49.png)

### å•äº¤æ¢æœºVLANæ ‡ç­¾æ“ä½œ

- åœ¨è¿›å…¥äº¤æ¢æœºç«¯å£æ˜¯ï¼Œé™„åŠ ç¼ºçœVLANæ ‡ç­¾
- å‡ºäº¤æ¢æœºç«¯å£æ—¶ï¼Œå»æ‰VLANæ ‡ç­¾

![pic50](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic50.png)

### Accessé“¾è·¯ç±»å‹ç«¯å£

Accessæ¥å£æ˜¯äº¤æ¢æœºä¸Šç”¨æ¥è¿æ¥ç”¨æˆ·ä¸»æœºçš„æ¥å£ã€‚
å½“Accessæ¥å£ä»ä¸»æœºæ”¶åˆ°ä¸€ä¸ªä¸å¸¦VLANæ ‡ç­¾çš„æ•°æ®å¸§æ—¶ï¼Œä¼šç»™è¯¥æ•°æ®å¸§åŠ ä¸Šä¸PVIDä¸€è‡´çš„VLANæ ‡ç­¾ã€‚
å½“Accessæ¥å£è¦å‘é€ä¸€ä¸ªå¸¦VLANæ ‡ç­¾çš„æ•°æ®å¸§ç»™ä¸»æœºæ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥æ•°æ®å¸§çš„VLAN IDæ˜¯å¦ä¸è‡ªå·±çš„PVIDç›¸åŒï¼Œè‹¥ç›¸åŒï¼Œåˆ™å»æ‰VLANæ ‡ç­¾åå‘é€è¯¥æ•°æ®å¸§ç»™ä¸»æœºï¼›è‹¥ä¸ç›¸åŒï¼Œç›´æ¥ä¸¢å¼ƒè¯¥æ•°æ®å¸§ã€‚

ä¸€èˆ¬åœ¨ä¸å®¢æˆ·æœºç›¸è¿çš„æ¥å£ä¸Šé…ç½®ã€‚

![pic51](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic51.png)

### è·¨äº¤æ¢æœºVLANæ ‡ç­¾

å¸¦æœ‰VLANæ ‡ç­¾çš„ä»¥å¤ªç½‘å¸§åœ¨äº¤æ¢æœºé—´ä¼ é€’

![pic52](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic52.png)

### Trunké“¾è·¯ç±»å‹ç«¯å£

ä¸ºäº†ä½¿VLANçš„æ•°æ®å¸§èƒ½å¤Ÿè·¨è·ƒå¤šå°äº¤æ¢æœºä¼ é€’ï¼Œäº¤æ¢æœºä¹‹é—´äº’è”çš„é“¾è·¯éœ€è¦è®¾ç½®ä¸ºå¹²é“é“¾è·¯(Trunk Link)
å…è®¸å¤šä¸ªVLANé€šè¿‡ï¼Œå¯ä»¥æ¥æ”¶å’Œå‘é€å¤šä¸ªVLANçš„æ•°æ®å¸§ï¼Œç¼ºçœVLANçš„ä»¥å¤ªç½‘å¸§ä¸å¸¦æ ‡ç­¾ã€‚
å½“Trunkç«¯å£æ”¶åˆ°æ•°æ®å¸§æ—¶ï¼Œå¦‚æœè¯¥å¸§ä¸åŒ…å«802.1Qçš„VLANæ ‡ç­¾ï¼Œå°†æ‰“ä¸Šè¯¥Trunkç«¯å£çš„PVIDï¼›å¦‚æœè¯¥å¸§åŒ…å«802.1Qçš„VLANæ ‡ç­¾ï¼Œåˆ™ä¸æ”¹å˜ã€‚
å½“Trunkç«¯å£å‘é€æ•°æ®å¸§æ—¶ï¼Œå½“æ‰€å‘é€å¸§çš„VLAN IDä¸ç«¯å£çš„PVIDä¸åŒæ—¶ï¼Œæ£€æŸ¥æ˜¯å¦å…è®¸è¯¥VLANé€šè¿‡ï¼Œè‹¥å…è®¸çš„è¯ç›´æ¥è½¬å‘ï¼Œä¸å…è®¸å°±ç›´æ¥ä¸¢å¼ƒï¼›å½“è¯¥å¸§çš„VLAN IDä¸ç«¯å£çš„PVIDç›¸åŒæ—¶ï¼Œåˆ™å‰¥ç¦»VLANæ ‡ç­¾åè½¬å‘ã€‚

ä¸€èˆ¬ç”¨äºäº¤æ¢æœºä¸äº¤æ¢æœºä¹‹é—´è¿æ¥çš„æ¥å£ã€‚

![pic53](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic53.png)

### Hybridé“¾è·¯ç±»å‹ç«¯å£

å…è®¸å¤šä¸ªVLANé€šè¿‡ï¼Œå¯ä»¥æ¥æ”¶å’Œå‘é€å¤šä¸ªVLANçš„æ•°æ®å¸§ã€‚
Hybridç«¯å£å’ŒTrunkç«¯å£çš„ä¸åŒä¹‹å¤„åœ¨äºï¼š

- Hybridç«¯å£å…è®¸å¤šä¸ªVLANçš„ä»¥å¤ªç½‘å¸§ä¸å¸¦æ ‡ç­¾
- Trunkç«¯å£åªå…è®¸ç¼ºçœVLANçš„ä»¥å¤ªç½‘å¸§ä¸å¸¦æ ‡ç­¾

![pic54](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic54.png)

### æ¥å£é…ç½®

------

#### é…ç½®accesså£

```
[s1]int g0/0/2       # è¿›å…¥ä¸PCç›¸è¿çš„æ¥å£
[s1-g0/0/2]port link-type access  # é…ç½®æ¥å£ç±»å‹ä¸ºAccess
[s1-g0/0/2]port default vlan 10     # é…ç½®æ¥å£çš„é»˜è®¤VLANå¹¶åŠ å…¥VLAN10 é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ¥å£çš„é»˜è®¤VLAN IDä¸º1
```

------

#### é…ç½®Trunkå£

```
[s1]int g0/0/1       # è¿›å…¥ä¸å¦ä¸€äº¤æ¢æœºç›¸è¿çš„æ¥å£
[s1-g0/0/1]port link-type trunk  # é…ç½®æ¥å£ç±»å‹ä¸ºTrunk
[s1-g0/0/1]port trunk allow-pass vlan 10 20     # å…è®¸VLAN10ã€20é€šè¿‡
[s1-g0/0/1]port trunk allow-pass vlan all     # å…è®¸æ‰€æœ‰VLANé€šè¿‡(1~4094)
```

------

#### é…ç½®Hybrid

```
# ä¸ä¸»æœºç›¸è¿
[s1-g0/0/2]undo port default vlan #æ¢å¤æ¥å£é»˜è®¤VLAN
[s1-g0/0/2]port link-type hybrid  #è®¾ç½®æ¥å£ç±»å‹ä¸ºHybrid
[s1-g0/0/2]port hybrid untagged vlan 20  #è½¬å‘VLAN20å¸§æ—¶å‰¥ç¦»tag
[s1-g0/0/2]port hybrid pvid vlan 20  #é»˜è®¤VLAN ID
# ä¸switchç›¸è¿
[s1-g0/0/1]port trunk allow-pass vlan 1
[s1-g0/0/1]port link-type hybrid
[s1-g0/0/1]port hybrid tagged vlan 10 20   #æ¥æ”¶å¸¦æœ‰VLAN10ã€20æ ‡ç­¾çš„å¸§
```

## VLANé—´è·¯ç”±

ç”±äºVLANéš”ç¦»äº†äºŒå±‚å¹¿æ’­åŸŸï¼Œä¹Ÿé—´æ¥çš„éš”ç¦»äº†å„ä¸ªVLANä¹‹é—´çš„å…¶ä»–äºŒå±‚æµé‡äº¤æ¢ï¼Œè¿™æ ·å¯¼è‡´å±äºä¸åŒVLANä¹‹é—´çš„ç”¨æˆ·ä¸èƒ½è¿›è¡ŒäºŒå±‚çš„é€šä¿¡ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è®©VLAN10å’ŒVLAN20ä¹‹é—´èƒ½å¤Ÿé€šä¿¡æ€ä¹ˆåŠå‘¢

â€”â€”ç»è¿‡ä¸‰å±‚çš„è·¯ç”±è½¬å‘èƒ½å°†æŠ¥æ–‡ä»ä¸€ä¸ªVLANè½¬å‘åˆ°å¦å¤–ä¸€ä¸ªVLANã€‚

### è·¯ç”±å™¨ç‰©ç†æ¥å£

è¿™ä¸ªè®²è¿˜æ˜¯å¾—è®²çš„ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ç”¨ï¼Œæ‰€ä»¥åªç»™ä¸ªæ‹“æ‰‘å›¾ï¼Œä¸é…ç½®

![pic56](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic56.png)

éšç€äº¤æ¢æœºVLANçš„æ•°é‡å¢åŠ ï¼Œéœ€è¦è·¯ç”±å™¨çš„æ¥å£ä¹Ÿéšä¹‹å¢åŠ ã€‚è€Œè·¯ç”±å™¨çš„ç«¯å£æ•°é‡æœ‰é™ä¸”æŸäº›ç«¯å£ä¹Ÿå¹¶ä¸æ˜¯ä¸€ç›´å·¥ä½œçŠ¶æ€ï¼Œå¯¼è‡´æˆæœ¬é«˜ä¸”æŸäº›ç«¯å£ä½¿ç”¨ç‡ä½ï¼Œé€ æˆæµªè´¹ã€‚

### å•è‡‚è·¯ç”±

å’Œä¸Šé¢çš„ç›¸æ¯”ï¼Œåªæ˜¯å°†ç‰©ç†æ¥å£è½¬æ¢æˆäº†è™šæ‹Ÿå­æ¥å£ï¼ŒèŠ‚çœäº†è·¯ç”±å™¨ç«¯å£

![pic57](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic57.png)
é…ç½®ï¼š

S1ã€S2(ä¸‹é¢ä¸¤äº¤æ¢æœº)ä¸PCç›¸è¿çš„æ¥å£é…ç½®ä¸ºAccessæ¥å£ï¼Œå¹¶ä¸”S1çš„E0/0/1åŠE0/0/3éƒ½æ˜¯VLAN10ï¼ŒS2çš„E0/0/1ä¸ºVLAN20ã€E0/0/3ä¸ºVLAN30ï¼›
S1ã€S2ã€S3ä¸äº¤æ¢æœº/è·¯ç”±å™¨ç›¸è¿çš„æ¥å£é…ç½®ä¸ºTrunkå£ï¼Œå¹¶ä¸”å…è®¸æ‰€æœ‰VLANé€šè¿‡
å‰©ä¸‹çš„é‡å¤´æˆï¼šé…ç½®R1

```
# è¿›å…¥å­æ¥å£1å¹¶ä¸”é…ç½®å¥½IP
[R1]int g0/0/0.1
[R1-GigabitEthernet0/0/0.1]ip add 192.168.1.254 24
# é…ç½®å­æ¥å£å°è£…
[R1-GigabitEthernet0/0/0.1]dot1q termination vid 10
Mar  7 2020 00:05:38-08:00 R1 %%01IFNET/4/LINK_STATE(l)[0]:The line protocol IP
on the interface GigabitEthernet0/0/0.1 has entered the UP state.
# å¼€å¯å­æ¥å£çš„ARPå¹¿æ’­åŠŸèƒ½
[R1-GigabitEthernet0/0/0.1]arp broadcast enable
```

å…¶ä»–ä¸¤ä¸ªæ¥å£ä¹Ÿè¿™æ ·é…ç½®
![pic58](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic58.png)
é…ç½®å®Œæˆä¹‹åï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤`display ip interface brief`æŸ¥çœ‹æ¥å£çŠ¶æ€
![pic59](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic59.png)
ä½¿ç”¨å‘½ä»¤`display ip routing-table`æŸ¥çœ‹è·¯ç”±è¡¨

ä¹‹åä½¿ç”¨ping IPæµ‹è¯•è¿é€šæ€§å³å¯

### åˆ©ç”¨ä¸‰å±‚äº¤æ¢æœº

ä¸‰å±‚äº¤æ¢æœºå¸¦æœ‰è·¯ç”±åŠŸèƒ½ï¼ŒVLANIFæ¥å£å¯ä»¥é…ç½®IPåœ°å€ï¼Œå€ŸåŠ©VLANIFæ¥å£ï¼Œä¸‰å±‚äº¤æ¢æœºå°±èƒ½å®ç°è·¯ç”±è½¬å‘åŠŸèƒ½
![pic60](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic60.png)
è®¾ç½®å¥½PCçš„ç½‘ç»œå‚æ•°ï¼ŒIPã€æ©ç å·²ç»™å‡ºï¼Œç½‘å…³ä¸º192.168.*.254
æ¥ç€é…ç½®äº¤æ¢æœºSW
åˆ›å»ºVLANå¹¶é…ç½®æ¥å£

```
[SW]vlan 10
[SW-vlan10]vlan 20
[SW-vlan20]int g0/0/1
[SW-GigabitEthernet0/0/1]port link-type access
[SW-GigabitEthernet0/0/1]port defaut vlan 10
[SW-GigabitEthernet0/0/1]int g0/0/2
[SW-GigabitEthernet0/0/2]port link-type access
[SW-GigabitEthernet0/0/2]port defaut vlan 20
[SW-GigabitEthernet0/0/2]int g0/0/3
[SW-GigabitEthernet0/0/3]port link-type access
[SW-GigabitEthernet0/0/3]port defaut vlan 10
```

é…ç½®VLANIF

```
[SW]int VLANif 10
[SW-Vlanif10]ip add 192.168.1.254 24
[SW-Vlanif10]int VLANif 20
[SW-Vlanif20]ip add 192.168.1.254 24
```

è¿™æ ·å°±é…ç½®æˆåŠŸäº†
æŸ¥çœ‹æ¥å£çŠ¶æ€
![pic61](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic61.png)
PCæµ‹è¯•
![pic62](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/hcna-pic62.png)

VLANçš„å°±åˆ°è¿™é‡Œäº†ï¼Œæ‹œæ‹œ~



###### å†å²æ–‡ç« 

- [HCNAå­¦ä¹ â€”â€”eNSPå®‰è£…](https://mp.weixin.qq.com/s?__biz=MzI1OTc5NTA2OA==&mid=2247483846&idx=1&sn=ce5bf8ad9f3405800246e60225f51821&chksm=ea7230d5dd05b9c318994de74340a05e958a3a4fb621a2c86cee84e69820ff02b562263ac5ee&token=1031513744&lang=zh_CN&scene=21#wechat_redirect)

- [HCNAå­¦ä¹ â€”â€”è½¯ä»¶ä½¿ç”¨](https://mp.weixin.qq.com/s?__biz=MzI1OTc5NTA2OA==&mid=2247483875&idx=1&sn=3faf82d44f9b2a1ee19e31fd1761d1d8&chksm=ea7230f0dd05b9e6c51f7e37cdbd0966e34800ba1bdfd1a928b93c251c1fdf244166331ac838&token=1031513744&lang=zh_CN&scene=21#wechat_redirect)

- [ä¸¤ç§ä¸»è¦çš„ç½‘ç»œå‚è€ƒæ¨¡å‹](https://mp.weixin.qq.com/s?__biz=MzI1OTc5NTA2OA==&mid=2247483897&idx=1&sn=3b152f2b2628693be2ecbeee693fa3a7&chksm=ea7230eadd05b9fc38053b7abfcf0a514279cc956c495a20decae0a68b80fcac4bb43ecf327c&token=1031513744&lang=zh_CN&scene=21#wechat_redirect)

- [HCNAå­¦ä¹ â€”â€”äº¤æ¢æœºåŸºç¡€é…ç½®](https://mp.weixin.qq.com/s?__biz=MzI1OTc5NTA2OA==&mid=2247483918&idx=1&sn=6e374721274a9cbe28240662183f00da&chksm=ea72331ddd05ba0b86f8f9ec37940e1e337923ea941fd05847b7e35157e4c14855135afc217f&token=1031513744&lang=zh_CN&scene=21#wechat_redirect)




![æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-ç™½è‰²ç‰ˆ](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/test/wechat-img.png)