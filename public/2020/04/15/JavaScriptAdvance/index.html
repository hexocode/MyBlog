<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JavaScript高级学习笔记 | wallleap</title>
  <meta name="keywords" content=" 前端 , web , JavaScript ">
  <meta name="description" content="JavaScript高级学习笔记 | wallleap">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="念两句诗          叙别梦、扬州一觉。          【宋代】吴文英《夜游宫·人去西楼雁杳》       .images{ 	float: left;     width: 100%;     height: 300px;     position: relative;     margin: 20px 0">
<meta property="og:type" content="website">
<meta property="og:title" content="图集">
<meta property="og:url" content="https://wallleap.cn/photo/index.html">
<meta property="og:site_name" content="wallleap">
<meta property="og:description" content="念两句诗          叙别梦、扬州一觉。          【宋代】吴文英《夜游宫·人去西楼雁杳》       .images{ 	float: left;     width: 100%;     height: 300px;     position: relative;     margin: 20px 0">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268%3Bg%3D0/sign=46b93e4b7d1ed21b79c929e39555baf9/14ce36d3d539b600fbdea00ee950352ac65cb773.jpg">
<meta property="article:published_time" content="2020-02-23T07:09:21.000Z">
<meta property="article:modified_time" content="2020-03-24T14:15:05.640Z">
<meta property="article:author" content="Luwang">
<meta property="article:tag" content="wallleap">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268%3Bg%3D0/sign=46b93e4b7d1ed21b79c929e39555baf9/14ce36d3d539b600fbdea00ee950352ac65cb773.jpg">


<link rel="icon" href="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/favicon.ico">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/sublime.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css" rel="stylesheet">
<link href="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css" rel="stylesheet">

<script src="//cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/customize.css">
<link rel="stylesheet" href="/css/github-badge.css">

<link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/honjun/hexo-tag-emojis-byhj/css/emoji.css">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
	.pace .pace-progress {  background: rgb(251, 129, 30); /*进度条颜色*/
	height: 3px;  }
	.pace .pace-progress-inner {  box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
	}
	.pace .pace-activity {  border-top-color: rgb(251, 129, 30);    /*上边框颜色*/
	border-left-color: rgb(251, 129, 30);    /*左边框颜色*/
	}
</style>

  

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b19f0ec10bac681106907eb1ee978d34";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
    </script>
  <!-- site-verification -->
  <meta name="google-site-verification" content="ZT29P3khtw1qk30lwEOdMqAGXvN3HGllzjzbB5Wln4k" />
  <meta name="baidu-site-verification" content="AQqaOCFUn0" />
  <meta name="360-site-verification" content="e9f3f65ff40b09c81ba47287a55363cd" />
  <meta name="sogou_site_verification" content="jAPTO5JOth"/>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151908301-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-151908301-1');
  </script>
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="wallleap" type="application/atom+xml">
</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="false" />
</div>


<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/avatar.jpg" />
</a>
<div class="author">
    <span>Luwang</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/wallleap" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
        <a title="weibo" href="http://weibo.com/u/6023739034" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-weibo"></use>
                </svg>
            
        </a>
        
    
        
        <a title="jianshu" href="https://www.jianshu.com/u/9357dd145d53" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-jianshu"></use>
                </svg>
            
        </a>
        
    
        
        <a title="zhihu" href="https://www.zhihu.com/people/8afbefe61c28c0fafed189b234afc91d" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-zhihu"></use>
                </svg>
            
        </a>
        
    
        
        <a title="csdn" href="https://me.csdn.net/qq_36949103" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-csdn"></use>
                </svg>
            
        </a>
        
    
        
    
        
        <a title="email" href="mailto:15579576761@163.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=990083804&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
        <a title="kugou" href="https://www.kugou.com/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-kugou"></use>
                </svg>
            
        </a>
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=453867086" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active" data-rel="全部文章">全部文章<small>(53)</small></div></li>
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="博客"><i class="fold iconfont icon-right"></i>博客<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="博客<--->valine">valine<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="电脑"><i class="fold iconfont icon-right"></i>电脑<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="电脑<--->Win10">Win10<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="笔记"><i class="fold iconfont icon-right"></i>笔记<small>(28)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="笔记<--->后端">后端<small>(2)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->Hexo">Hexo<small>(8)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->Markdown">Markdown<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->五笔学习">五笔学习<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->前端">前端<small>(13)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->微信">微信<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->转载">转载<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->黑苹果">黑苹果<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="编程"><i class="fold iconfont icon-right"></i>编程<small>(2)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="编程<--->数据结构">数据结构<small>(2)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="网络"><i class="fold iconfont icon-right"></i>网络<small>(15)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="网络<--->HCNA">HCNA<small>(4)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="网络<--->华三">华三<small>(4)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="网络<--->基础">基础<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="资源"><i class="fold iconfont icon-right"></i>资源<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="资源<--->图集">图集<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
            <li><div data-rel="转载"><i class="fold iconfont icon-right"></i>转载<small>(2)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="转载<--->主题">主题<small>(2)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="阅读">阅读<small>(1)</small></div>
                
            </li>
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">关于</a><a style="width: 50%"  class="friends">友链</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="53">
<input type="hidden" id="yelog_site_word_count" value="274.5k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
            <li><a target="_blank" href="https://www.zh66.club">皮皮家园</a></li>
            
            <li><a target="_blank" href="https://jwmm.xyz/">喵喵喵~</a></li>
            
            <li><a target="_blank" href="https://evrstr.tk/">evrStr</a></li>
            
            <li><a target="_blank" href="https://leeyiding.com/">LeeYD</a></li>
            
            <li><a target="_blank" href="https://cndrew.cn/">Uncle_drew</a></li>
            
            <li><a target="_blank" href="https://yremp.live/">Yremp</a></li>
            
            <li><a target="_blank" href="https://immmmm.com/">木木木木木</a></li>
            
            <li><a target="_blank" href="https://you.ci/">有次博客</a></li>
            
            <li><a target="_blank" href="https://www.fezhu.top/">Uncleacc</a></li>
            
            <li><a target="_blank" href="https://nateshao.gitee.io/">千羽</a></li>
            
            <li><a target="_blank" href="https://chanshiyu.com/">蝉时雨</a></li>
            
            <li><a target="_blank" href="https://www.antmoe.com/">小康博客</a></li>
            
            <li><a target="_blank" href="https://www.lete114.top/">Lete乐特</a></li>
            
            <li><a target="_blank" href="/">等待收录中……</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ACL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ajax</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>AngularJS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Blog</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>C/C++</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>CSS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>eNsp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>eNSP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ES</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>GitHub</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hackintosh</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HCL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HCNA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hexo</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Hexo</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HTML</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JavaScript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jQuery</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Markdown</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>MongoDB</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NAT</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NodeJS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>OSPF</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>React</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>RIP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Sakura</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>STP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ubuntu</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>VLAN</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Vue</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>w650dc</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>web</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Win10</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>主题</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>五笔</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>交换机</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>企业网</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>前端</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>华三</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>博客</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>后端</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>图集</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>安装</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>实验</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>微信</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>微信防盗链</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>悦读</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>技术</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据结构</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>框架</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>模块化</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>考研</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>英语</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>逆水寒</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>配置</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>黑苹果</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a id="top" class="全部文章 笔记 黑苹果 "
           href="/2019/03/14/w650dc-hackintosh/"
           data-tag="w650dc,hackintosh,黑苹果"
           data-author="" >
            <span class="post-title" title="毁灭者DC W650DC装黑苹果心得">毁灭者DC W650DC装黑苹果心得</span>
            <span class="post-date" title="2019-03-14 21:27:46">2019/03/14</span>
        </a>
        
        <a id="top" class="全部文章 网络 "
           href="/2019/09/30/web-HCL9/"
           data-tag="eNSP,企业网"
           data-author="" >
            <span class="post-title" title="使用eNSP搭建企业网络">使用eNSP搭建企业网络</span>
            <span class="post-date" title="2019-09-30 07:58:17">2019/09/30</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/08/28/VUE/"
           data-tag="前端,web,JavaScript,Vue"
           data-author="" >
            <span class="post-title" title="Vue学习笔记">Vue学习笔记</span>
            <span class="post-date" title="2020-08-28 12:33:14">2020/08/28</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/08/20/AJAX/"
           data-tag="前端,web,Ajax"
           data-author="" >
            <span class="post-title" title="Ajax学习笔记">Ajax学习笔记</span>
            <span class="post-date" title="2020-08-20 12:33:14">2020/08/20</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/07/12/React/"
           data-tag="前端,框架,React"
           data-author="" >
            <span class="post-title" title="React全家桶(技术栈)学习笔记">React全家桶(技术栈)学习笔记</span>
            <span class="post-date" title="2020-07-12 16:54:50">2020/07/12</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/07/04/Git/"
           data-tag="前端,Git"
           data-author="" >
            <span class="post-title" title="Git学习笔记">Git学习笔记</span>
            <span class="post-date" title="2020-07-04 23:33:49">2020/07/04</span>
        </a>
        
        <a  class="全部文章 笔记 后端 "
           href="/2020/06/14/nodejs/"
           data-tag="后端,NodeJS"
           data-author="" >
            <span class="post-title" title="NodeJs学习笔记">NodeJs学习笔记</span>
            <span class="post-date" title="2020-06-14 11:33:49">2020/06/14</span>
        </a>
        
        <a  class="全部文章 笔记 后端 "
           href="/2020/06/14/MongoDB/"
           data-tag="后端,MongoDB"
           data-author="" >
            <span class="post-title" title="MongoDB学习笔记">MongoDB学习笔记</span>
            <span class="post-date" title="2020-06-14 11:22:00">2020/06/14</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/06/04/AngularJs/"
           data-tag="前端,AngularJS"
           data-author="" >
            <span class="post-title" title="AngularJs学习笔记">AngularJs学习笔记</span>
            <span class="post-date" title="2020-06-04 23:33:49">2020/06/04</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/06/04/ES/"
           data-tag="前端,ES,模块化"
           data-author="" >
            <span class="post-title" title="ES和模块化学习笔记">ES和模块化学习笔记</span>
            <span class="post-date" title="2020-06-04 23:33:49">2020/06/04</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/04/26/jQuery/"
           data-tag="前端,web,JavaScript,jQuery"
           data-author="" >
            <span class="post-title" title="jQuery学习笔记">jQuery学习笔记</span>
            <span class="post-date" title="2020-04-26 20:33:14">2020/04/26</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/04/15/JavaScriptAdvance/"
           data-tag="前端,web,JavaScript"
           data-author="" >
            <span class="post-title" title="JavaScript高级学习笔记">JavaScript高级学习笔记</span>
            <span class="post-date" title="2020-04-15 19:33:14">2020/04/15</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/04/05/JavaScriptBase/"
           data-tag="前端,web,JavaScript"
           data-author="" >
            <span class="post-title" title="JavaScript基础学习笔记">JavaScript基础学习笔记</span>
            <span class="post-date" title="2020-04-05 12:33:14">2020/04/05</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/03/30/css/"
           data-tag="前端,web,CSS"
           data-author="" >
            <span class="post-title" title="CSS学习笔记">CSS学习笔记</span>
            <span class="post-date" title="2020-03-30 12:33:14">2020/03/30</span>
        </a>
        
        <a  class="全部文章 博客 valine "
           href="/2020/03/30/hexoValine/"
           data-tag="hexo"
           data-author="" >
            <span class="post-title" title="valine评论系统使用">valine评论系统使用</span>
            <span class="post-date" title="2020-03-30 12:16:01">2020/03/30</span>
        </a>
        
        <a  class="全部文章 笔记 Markdown "
           href="/2020/03/29/markdown/"
           data-tag="Markdown"
           data-author="" >
            <span class="post-title" title="Markdown语法大全">Markdown语法大全</span>
            <span class="post-date" title="2020-03-29 22:23:57">2020/03/29</span>
        </a>
        
        <a  class="全部文章 笔记 微信 "
           href="/2020/03/27/wechatpaper/"
           data-tag="微信"
           data-author="" >
            <span class="post-title" title="使用Markdown Here对微信公众号文章进行排版">使用Markdown Here对微信公众号文章进行排版</span>
            <span class="post-date" title="2020-03-27 22:36:35">2020/03/27</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/03/27/html/"
           data-tag="前端,web,HTML"
           data-author="" >
            <span class="post-title" title="HTML学习笔记">HTML学习笔记</span>
            <span class="post-date" title="2020-03-27 17:33:14">2020/03/27</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/03/24/chrometwo/"
           data-tag="前端,web"
           data-author="" >
            <span class="post-title" title="怎样拥有两个独立的Chrome">怎样拥有两个独立的Chrome</span>
            <span class="post-date" title="2020-03-24 10:33:14">2020/03/24</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/03/24/webBase/"
           data-tag="前端,web"
           data-author="" >
            <span class="post-title" title="web入门基础知识">web入门基础知识</span>
            <span class="post-date" title="2020-03-24 10:33:14">2020/03/24</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2020/03/08/theme-beautify/"
           data-tag="主题,Hexo,Blog,博客"
           data-author="" >
            <span class="post-title" title="Sakura美化">Sakura美化</span>
            <span class="post-date" title="2020-03-08 21:09:24">2020/03/08</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2020/03/08/hexo-themes/"
           data-tag="Hexo,Blog,博客,Sakura"
           data-author="" >
            <span class="post-title" title="hexo博客如何更换主题，并且进行常用的配置">hexo博客如何更换主题，并且进行常用的配置</span>
            <span class="post-date" title="2020-03-08 13:31:00">2020/03/08</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2020/03/07/wechat-pic/"
           data-tag="Hexo,Blog,博客,微信防盗链"
           data-author="" >
            <span class="post-title" title="微信公众号图片防盗链破解">微信公众号图片防盗链破解</span>
            <span class="post-date" title="2020-03-07 23:50:00">2020/03/07</span>
        </a>
        
        <a  class="全部文章 "
           href="/2020/03/07/mindmaptest/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="测试思维导图">测试思维导图</span>
            <span class="post-date" title="2020-03-07 20:15:12">2020/03/07</span>
        </a>
        
        <a  class="全部文章 网络 HCNA "
           href="/2020/03/07/hcna-vlan/"
           data-tag="HCNA,VLAN"
           data-author="" >
            <span class="post-title" title="HCNA学习——VLAN配置">HCNA学习——VLAN配置</span>
            <span class="post-date" title="2020-03-07 00:54:04">2020/03/07</span>
        </a>
        
        <a  class="全部文章 笔记 五笔学习 "
           href="/2020/03/04/wubi/"
           data-tag="五笔"
           data-author="" >
            <span class="post-title" title="五笔学习笔记">五笔学习笔记</span>
            <span class="post-date" title="2020-03-04 23:33:49">2020/03/04</span>
        </a>
        
        <a  class="全部文章 网络 HCNA "
           href="/2020/03/02/switchbase/"
           data-tag="HCNA,交换机"
           data-author="" >
            <span class="post-title" title="HCNA学习——交换机基础配置">HCNA学习——交换机基础配置</span>
            <span class="post-date" title="2020-03-02 23:19:15">2020/03/02</span>
        </a>
        
        <a  class="全部文章 网络 基础 "
           href="/2020/02/29/networkmodule/"
           data-tag="HCNA"
           data-author="" >
            <span class="post-title" title="两种主要的网络参考模型">两种主要的网络参考模型</span>
            <span class="post-date" title="2020-02-29 19:53:49">2020/02/29</span>
        </a>
        
        <a  class="全部文章 网络 HCNA "
           href="/2020/02/24/eNSP-use/"
           data-tag="HCNA,eNSP"
           data-author="" >
            <span class="post-title" title="eNSP使用">eNSP使用</span>
            <span class="post-date" title="2020-02-24 21:39:54">2020/02/24</span>
        </a>
        
        <a  class="全部文章 网络 HCNA "
           href="/2020/02/22/eNSP-install/"
           data-tag="HCNA,eNSP"
           data-author="" >
            <span class="post-title" title="安装华为模拟器eNSP">安装华为模拟器eNSP</span>
            <span class="post-date" title="2020-02-22 21:39:56">2020/02/22</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2020/02/08/hexo-blog/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="闲着也是闲着，不如搭个免费的博客玩玩">闲着也是闲着，不如搭个免费的博客玩玩</span>
            <span class="post-date" title="2020-02-08 21:34:47">2020/02/08</span>
        </a>
        
        <a  class="全部文章 转载 主题 "
           href="/2020/02/04/hexotheme/"
           data-tag="主题"
           data-author="" >
            <span class="post-title" title="都2020了，带你开发hexo主题">都2020了，带你开发hexo主题</span>
            <span class="post-date" title="2020-02-04 22:16:01">2020/02/04</span>
        </a>
        
        <a  class="全部文章 电脑 Win10 "
           href="/2019/11/07/WLU/"
           data-tag="Win10,Ubuntu"
           data-author="" >
            <span class="post-title" title="Win10启用其子系统Ubuntu并安装图形界面">Win10启用其子系统Ubuntu并安装图形界面</span>
            <span class="post-date" title="2019-11-07 10:21:17">2019/11/07</span>
        </a>
        
        <a  class="全部文章 笔记 转载 "
           href="/2019/10/31/English_ReadWay/"
           data-tag="考研,英语"
           data-author="" >
            <span class="post-title" title="唐迟阅读方法论">唐迟阅读方法论</span>
            <span class="post-date" title="2019-10-31 21:58:17">2019/10/31</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/27/web-HCL8/"
           data-tag="eNSP,ACL,NAT"
           data-author="" >
            <span class="post-title" title="ACL+NAT配置">ACL+NAT配置</span>
            <span class="post-date" title="2019-09-27 07:58:17">2019/09/27</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/27/web-HCL7/"
           data-tag="eNSP,OSPF"
           data-author="" >
            <span class="post-title" title="OSPF配置">OSPF配置</span>
            <span class="post-date" title="2019-09-27 07:58:04">2019/09/27</span>
        </a>
        
        <a  class="全部文章 资源 图集 "
           href="/2019/09/20/atlas1/"
           data-tag="逆水寒,图集"
           data-author="" >
            <span class="post-title" title="图集1-逆水寒">图集1-逆水寒</span>
            <span class="post-date" title="2019-09-20 20:15:12">2019/09/20</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/19/web-HCL6/"
           data-tag="eNsp,RIP"
           data-author="" >
            <span class="post-title" title="RIP配置">RIP配置</span>
            <span class="post-date" title="2019-09-19 16:13:56">2019/09/19</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/18/web-HCL4/"
           data-tag="HCL,华三"
           data-author="" >
            <span class="post-title" title="DHCP配置(续)--DHCP中继">DHCP配置(续)--DHCP中继</span>
            <span class="post-date" title="2019-09-18 16:14:16">2019/09/18</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/18/web-HCL5/"
           data-tag="eNsp,STP"
           data-author="" >
            <span class="post-title" title="STP及VRRP配置">STP及VRRP配置</span>
            <span class="post-date" title="2019-09-18 16:13:56">2019/09/18</span>
        </a>
        
        <a  class="全部文章 阅读 "
           href="/2019/09/15/book1/"
           data-tag="悦读"
           data-author="" >
            <span class="post-title" title="书单1--平凡的世界">书单1--平凡的世界</span>
            <span class="post-date" title="2019-09-15 19:32:39">2019/09/15</span>
        </a>
        
        <a  class="全部文章 网络 华三 "
           href="/2019/09/12/web-HCL3/"
           data-tag="HCL,华三,实验,配置"
           data-author="" >
            <span class="post-title" title="HCL配置(三)–-DHCP配置">HCL配置(三)–-DHCP配置</span>
            <span class="post-date" title="2019-09-12 15:42:43">2019/09/12</span>
        </a>
        
        <a  class="全部文章 网络 华三 "
           href="/2019/09/11/web-HCL2/"
           data-tag="HCL,华三,实验,配置"
           data-author="" >
            <span class="post-title" title="HCL配置(二)--VLAN间通信">HCL配置(二)--VLAN间通信</span>
            <span class="post-date" title="2019-09-11 18:06:05">2019/09/11</span>
        </a>
        
        <a  class="全部文章 网络 华三 "
           href="/2019/09/09/web-HCL1/"
           data-tag="HCL,华三,实验,配置"
           data-author="" >
            <span class="post-title" title="HCL配置(一)--ping通及Telnet">HCL配置(一)--ping通及Telnet</span>
            <span class="post-date" title="2019-09-09 21:54:19">2019/09/09</span>
        </a>
        
        <a  class="全部文章 网络 华三 "
           href="/2019/09/09/web-HCL0/"
           data-tag="HCL,华三,安装"
           data-author="" >
            <span class="post-title" title="HCL的安装和使用">HCL的安装和使用</span>
            <span class="post-date" title="2019-09-09 21:34:37">2019/09/09</span>
        </a>
        
        <a  class="全部文章 编程 数据结构 "
           href="/2019/08/28/DataStructure1/"
           data-tag="数据结构,C/C++,技术"
           data-author="" >
            <span class="post-title" title="数据结构(1)-绪论">数据结构(1)-绪论</span>
            <span class="post-date" title="2019-08-28 22:12:47">2019/08/28</span>
        </a>
        
        <a  class="全部文章 编程 数据结构 "
           href="/2019/08/25/DataStructure0/"
           data-tag="数据结构,C/C++"
           data-author="" >
            <span class="post-title" title="数据结构(0)--预备知识">数据结构(0)--预备知识</span>
            <span class="post-date" title="2019-08-25 10:18:51">2019/08/25</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2019/08/25/mac-blog4/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="Mac使用Hexo和GitHub搭建博客(4)--博客维护">Mac使用Hexo和GitHub搭建博客(4)--博客维护</span>
            <span class="post-date" title="2019-08-25 09:30:28">2019/08/25</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2019/08/25/mac-blog3/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="Mac使用Hexo和GitHub搭建博客(3)--发布文章">Mac使用Hexo和GitHub搭建博客(3)--发布文章</span>
            <span class="post-date" title="2019-08-25 08:46:41">2019/08/25</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2019/08/24/mac-blog2/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="Mac使用Hexo和GitHub搭建博客(2)--优化配置">Mac使用Hexo和GitHub搭建博客(2)--优化配置</span>
            <span class="post-date" title="2019-08-24 20:21:59">2019/08/24</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2019/08/24/mac-blog1/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="Mac使用Hexo和GitHub搭建博客(1)--搭建博客">Mac使用Hexo和GitHub搭建博客(1)--搭建博客</span>
            <span class="post-date" title="2019-08-24 20:14:35">2019/08/24</span>
        </a>
        
        <a  class="全部文章 "
           href="/2019/08/08/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2019-08-08 19:32:39">2019/08/08</span>
        </a>
        
        <a  class="全部文章 转载 主题 "
           href="/2018/12/12/Hexo-Theme-Sakura/"
           data-tag="主题"
           data-author="" >
            <span class="post-title" title="Hexo-Theme-Sakura">Hexo-Theme-Sakura</span>
            <span class="post-date" title="2018-12-12 22:16:01">2018/12/12</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-JavaScriptAdvance" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">JavaScript高级学习笔记</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="笔记">笔记</a> > 
            
            <a  data-rel="笔记&lt;---&gt;前端">前端</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color3">前端</a>
            
            <a class="color4">web</a>
            
            <a class="color1">JavaScript</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2020-09-11 21:47:00'>2020-04-15 19:33</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:10.5k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">一、基础总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1、数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2、数据、变量与内存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3、对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4、函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">5、回调函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6、IIFE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">7、函数中的this</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">二、函数高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1、原型和原型链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2、执行上下文与执行上下文栈</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3、作用域与作用域链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4、闭包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">三、面向对象高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1、对象创建模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2、继承模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">四、线程机制与事件机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1、进程与线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2、浏览器内核</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3、定时器引发的思考</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4、JS是单线程执行的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">5、浏览器的事件循环(轮询)模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6、H5 Web Workers(多线程)</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-4 i,
    .toc-level-4 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><p>基础总结</p>
</li>
<li><p>函数高级</p>
</li>
<li><p>面向对象高级</p>
</li>
<li><p>线程机制与事件机制</p>
</li>
</ul>
<h2><span id="一-基础总结">一、基础总结</span></h2><h3><span id="1-数据类型">1、数据类型</span></h3><p><strong>分类</strong></p>
<ul>
<li><p>基本（值）类型</p>
<ul>
<li>String：任意字符串</li>
<li>Number：任意的数字</li>
<li>boolean：true/false</li>
<li>undefined：undefined</li>
<li>null：null</li>
</ul>
</li>
<li><p>对象（引用）类型</p>
<ul>
<li>Object：任意对象</li>
<li>Function：一种特殊的对象（可以执行）</li>
<li>Array：一种特殊的对象（数值下标，内部数据是有序的）</li>
</ul>
</li>
</ul>
<pre><code class="javascript">var obj = {
  name: &#39;TOM&#39;,
  age: 12
}
fuction test(){
  var a = 3
}
var arr = [3, &#39;abc&#39;]
arr[1]</code></pre>
<p><strong>判断</strong></p>
<ul>
<li><p><code>typeof</code></p>
<ul>
<li>可以判断：undefined/ 数值 /字符串/布尔值/function</li>
<li>不能判断：null与Object Object与array</li>
</ul>
</li>
<li><p><code>instanceof</code>：判断对象的具体类型</p>
</li>
<li><p><code>===</code>可以判断：undefined/null/function</p>
</li>
<li><p><code>isNaN</code> 判断NaN ……</p>
</li>
</ul>
<pre><code class="javascript">//1. 基本
// typeof返回数据类型的字符串表达
var a
// undefined
console.log(a, typeof a, typeof a===&#39;undefined&#39;,a===undefined )  // undefined &#39;undefined&#39; true true
console.log(undefined===&#39;undefined&#39;) // false
// Number Sting Boolean
a = 4
console.log(typeof a===&#39;number&#39;) // true
a = &quot;abc123&quot;
console.log(isNaN(a)) // true
a = &#39;string iiii&#39;
console.log(typeof a===&#39;string&#39;) // true
a = true
console.log(typeof a===&#39;boolean&#39;) // true
// null
a = null
console.log(typeof a, a===null) // &#39;object&#39; true

//2. 对象
var b1 = {
    b2: [1, &#39;abc&#39;, console.log],
    b3: function () {
        console.log(&#39;b3&#39;) // b3
        return function () {
            return &#39;funb1&#39;
        }
    }
}
// Object Array Function
console.log(b1 instanceof Object, b1 instanceof Array) // true  false
console.log(b1.b2 instanceof Array, b1.b2 instanceof Object) // true true
console.log(b1.b3 instanceof Function, b1.b3 instanceof Object) // true true
console.log(typeof b1.b2) // &#39;object&#39;
// Function
console.log(typeof b1.b3===&#39;function&#39;) // true
console.log(typeof b1.b2[2]===&#39;function&#39;) // true

// 细节问题
b1.b2[2](4) // 4
console.log(b1.b3()()) // funb1
/*
b1.b3() ---&gt; b3当前的function
b1.b3()() ---&gt; return的function
*/</code></pre>
<p><strong>实例</strong></p>
<p>实例：实例对象</p>
<p>类型：类型对象</p>
<pre><code class="javascript">function Person(name, age){ // 构造函数 类型
    this.name = name
  this.age = age
} 
var p = new Person(&#39;Tom&#39;, 12) // 根据类型创建的实例对象</code></pre>
<p><strong>其他问题</strong></p>
<ol>
<li><p>undefined与null的区别?</p>
<ul>
<li>undefined代表定义未赋值</li>
<li>nulll定义并赋值了, 只是值为null</li>
</ul>
<pre><code class="javascript">var a
console.log(a)  // undefined
a = null
console.log(a) // null</code></pre>
</li>
</ol>
<ol start="2">
<li><p>什么时候给变量赋值为null呢?</p>
<ul>
<li>初始赋值, 表明将要赋值为对象</li>
<li>结束前, 让对象成为垃圾对象(被垃圾回收器回收)</li>
</ul>
<pre><code class="javascript">//起始
var b = null  // 初始赋值为null, 表明将要赋值为对象
//确定对象就赋值
b = [&#39;atguigu&#39;, 12]
//最后
b = null // 让b指向的对象成为垃圾对象(被垃圾回收器回收)
// b = 2</code></pre>
</li>
</ol>
<ol start="3">
<li><p>严格区别变量类型与数据类型?</p>
<ul>
<li><p>数据的类型</p>
<ul>
<li>基本类型 </li>
<li>对象类型 </li>
</ul>
</li>
<li><p>变量的类型(变量内存值的类型)</p>
<ul>
<li>基本类型: 保存就是基本类型的数据</li>
<li>引用类型: 保存的是地址值</li>
</ul>
<pre><code class="javascript">var c = function () {

}
console.log(typeof c) // &#39;function&#39;</code></pre>
</li>
</ul>
</li>
</ol>
<h3><span id="2-数据-变量与内存">2、数据、变量与内存</span></h3><ol>
<li>什么是数据?</li>
</ol>
<ul>
<li><p>存储在内存中代表特定信息的’东东’, 本质上是0101…</p>
</li>
<li><p>数据的特点: 可传递, 可运算</p>
</li>
<li><p>一切皆数据</p>
</li>
<li><p>内存中所有操作的目标: 数据</p>
<ul>
<li>算术运算</li>
<li>逻辑运算</li>
<li>赋值</li>
<li>运行函数</li>
</ul>
</li>
</ul>
<ol start="2">
<li>什么是内存?</li>
</ol>
<ul>
<li><p>内存条通电后产生的可储存数据的空间(临时的)</p>
</li>
<li><p>内存产生和死亡: 内存条(电路版)—&gt;通电—&gt;产生内存空间—&gt;存储数据—&gt;处理数据—&gt;断电—&gt;内存空间和数据都消失</p>
</li>
<li><p>一块小内存的2个数据</p>
<ul>
<li>内部存储的数据</li>
<li>地址值</li>
</ul>
</li>
<li><p>内存分类</p>
<ul>
<li>栈: 全局变量/局部变量</li>
<li>堆: 对象</li>
</ul>
</li>
</ul>
<ol start="3">
<li>什么是变量?</li>
</ol>
<ul>
<li>可变化的量, 由变量名和变量值组成</li>
</ul>
<ul>
<li>每个变量都对应的一块小内存, 变量名用来查找对应的内存, 变量值就是内存中保存的数据</li>
</ul>
<ol start="4">
<li>内存,数据, 变量三者之间的关系</li>
</ol>
<ul>
<li><p>内存用来存储数据的空间</p>
</li>
<li><p>变量是内存的标识</p>
</li>
</ul>
<pre><code class="javascript">var age = 18
console.log(age)

var obj = {name: &#39;Tom&#39;}
console.log(obj.name)

function fn () {
  var obj = {name: &#39;Tom&#39;}
}

var a = 3
var b = a + 2</code></pre>
<ol start="5">
<li>关于赋值与内存的问题</li>
</ol>
<p>问题: var a = xxx, a内存中到底保存的是什么?</p>
<ul>
<li><p>xxx是<strong>基本数据</strong>, 保存的就是这个<strong>数据</strong></p>
</li>
<li><p>xxx是<strong>对象</strong>, 保存的是对象的<strong>地址值</strong></p>
</li>
<li><p>xxx是一个<strong>变量</strong>, 保存的xxx的<strong>内存内容(可能是基本数据, 也可能是地址值)</strong></p>
</li>
</ul>
<pre><code class="javascript">var a = 3
a = function () {

}
var b = &#39;abc&#39;
a = b
b = {}
a = b</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815100154.png" alt="image-20200815100153040"></p>
<ol start="6">
<li>关于引用变量赋值问题</li>
</ol>
<ul>
<li><p>2个引用变量指向同一个对象, 通过一个变量修改对象内部数据, 另一个变量看到的是修改之后的数据</p>
</li>
<li><p>2个引用变量指向同一个对象, 让其中一个引用变量指向另一个对象, 另一引用变量依然指向前一个对象</p>
</li>
</ul>
<pre><code class="javascript">var obj1 = {name: &#39;Tom&#39;}
var obj2 = obj1
obj2.age = 12
console.log(obj1.age)  // 12
function fn (obj) {
  obj.name = &#39;A&#39;
}
fn(obj1)
console.log(obj2.name) //A

var a = {age: 12}
var b = a
a = {name: &#39;BOB&#39;, age: 13}
b.age = 14
console.log(b.age, a.name, a.age) // 14 Bob 13
function fn2 (obj) {
  obj = {age: 15}
}
fn2(a)
console.log(a.age) // 13</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815101835.png" alt="image-20200815101834022"></p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815102623.png" alt="image-20200815102622137"></p>
<ol start="7">
<li>关于数据传递问题</li>
</ol>
<p>问题: 在js调用函数时传递变量参数时, 是值传递还是引用传递</p>
<ul>
<li><p>理解1: 都是值(基本/地址值)传递</p>
</li>
<li><p>理解2: 可能是值传递, 也可能是引用传递(地址值)</p>
</li>
</ul>
<pre><code class="javascript">var a = 3
function fn (a) {
  a = a +1
}
fn(a)
console.log(a)  // 3

function fn2 (obj) {
  console.log(obj.name)
}
var obj = {name: &#39;Tom&#39;}
fn2(obj)  // Tom</code></pre>
<ol start="8">
<li>JS引擎如何管理内存</li>
</ol>
<p>问题: JS引擎如何管理内存?</p>
<ul>
<li>内存生命周期<ul>
<li>分配小内存空间, 得到它的使用权</li>
<li>存储数据, 可以反复进行操作</li>
<li>释放小内存空间</li>
</ul>
</li>
</ul>
<ul>
<li>释放内存<ul>
<li>局部变量: 函数执行完自动释放</li>
<li>对象: 成为垃圾对象==&gt;垃圾回收器回收</li>
</ul>
</li>
</ul>
<pre><code class="javascript">var a = 3
var obj = {}
obj = undefined

function fn () {
  var b = {}
}

fn() // b是自动释放, b所指向的对象是在后面的某个时刻由垃圾回收器回收</code></pre>
<h3><span id="3-对象">3、对象</span></h3><ol>
<li>什么是对象?</li>
</ol>
<ul>
<li><p>多个数据的封装体</p>
</li>
<li><p>用来保存多个数据的容器</p>
</li>
<li><p>一个对象代表现实中的一个事物</p>
</li>
</ul>
<ol start="2">
<li>为什么要用对象?</li>
</ol>
<ul>
<li>统一管理多个数据</li>
</ul>
<ol start="3">
<li>对象的组成</li>
</ol>
<ul>
<li><p>属性: 属性名(字符串)和属性值(任意)组成</p>
</li>
<li><p>方法: 一种特别的属性(属性值是函数)</p>
</li>
</ul>
<ol start="4">
<li>如何访问对象内部数据?</li>
</ol>
<ul>
<li><p><code>.属性名</code>: 编码简单, 有时不能用</p>
</li>
<li><p><code>[&#39;属性名&#39;]</code>: 编码麻烦, 能通用</p>
</li>
</ul>
<pre><code class="javascript">var p = {
  name: &#39;Tom&#39;,
  age: 12,
  setName: function (name) {
    this.name = name
  },
  setAge: function (age) {
    this.age = age
  }
}

p.setName(&#39;Bob&#39;)
p[&#39;setAge&#39;](23)
console.log(p.name, p[&#39;age&#39;])</code></pre>
<p>问题: 什么时候必须使用[‘属性名’]的方式?</p>
<ol>
<li><p>属性名包含特殊字符: <code>-</code>空格</p>
</li>
<li><p>属性名不确定</p>
</li>
</ol>
<pre><code class="javascript">var p = {}
//1. 给p对象添加一个属性: content type: text/json
// p.content-type = &#39;text/json&#39; //不能用
p[&#39;content-type&#39;] = &#39;text/json&#39;
console.log(p[&#39;content-type&#39;])

//2. 属性名不确定
var propName = &#39;myAge&#39;
var value = 18
// p.propName = value //不能用
p[propName] = value
console.log(p[propName])</code></pre>
<h3><span id="4-函数">4、函数</span></h3><ol>
<li>什么是函数?</li>
</ol>
<ul>
<li>实现特定功能的n条语句的封装体</li>
<li>只有函数是可以执行的, 其它类型的数据不能执行</li>
</ul>
<ol start="2">
<li>为什么要用函数?</li>
</ol>
<ul>
<li>提高代码复用</li>
<li>便于阅读交流</li>
</ul>
<ol start="3">
<li>如何定义函数?</li>
</ol>
<ul>
<li>函数声明</li>
<li>表达式</li>
</ul>
<ol start="4">
<li>如何调用(执行)函数?</li>
</ol>
<ul>
<li>test(): <strong>直接调用</strong></li>
<li>obj.test(): <strong>通过对象调用</strong></li>
<li>new test(): <strong>new调用</strong></li>
<li>test.call/apply(obj): <strong>临时让test成为obj的方法进行调用</strong></li>
</ul>
<pre><code class="javascript">/*
编写程序实现以下功能需求:
  1. 根据年龄输出对应的信息
  2. 如果小于18, 输出: 未成年, 再等等!
  3. 如果大于60, 输出: 算了吧!
  4. 其它, 输出: 刚好!
*/
function showInfo (age) {
  if(age&lt;18) {
    console.log(&#39;未成年, 再等等!&#39;)
  } else if(age&gt;60) {
    console.log(&#39;算了吧!&#39;)
  } else {
    console.log(&#39;刚好!&#39;)
  }
}

showInfo(17)
showInfo(20)
showInfo(65)

function fn1 () { //函数声明
  console.log(&#39;fn1()&#39;)
}
var fn2 = function () { //表达式
  console.log(&#39;fn2()&#39;)
}

fn1()
fn2()

var obj = {}
function test2 () {
  this.xxx = &#39;atguigu&#39;
}
// obj.test2()  不能直接, 根本就没有
test2.call(obj) // obj.test2()   // 可以让一个函数成为指定任意对象的方法进行调用
console.log(obj.xxx)</code></pre>
<h3><span id="5-回调函数">5、回调函数</span></h3><ol>
<li><p>什么函数才是回调函数?<br> 1). 你定义的<br> 2). 你没有调<br> 3). 但最终它执行了(在某个时刻或某个条件下)</p>
</li>
<li><p>常见的回调函数?</p>
<ul>
<li><p>dom事件回调函数 ==&gt;发生事件的dom元素</p>
</li>
<li><p>定时器回调函数 ===&gt;window</p>
</li>
<li><p>ajax请求回调函数(后面讲)</p>
</li>
<li><p>生命周期回调函数(后面讲)</p>
</li>
</ul>
</li>
</ol>
<pre><code class="html">&lt;button id=&quot;btn&quot;&gt;测试点击事件&lt;/button&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  document.getElementById(&#39;btn&#39;).onclick = function () { // dom事件回调函数
    alert(this.innerHTML)
  }
  //定时器
    // 超时定时器
    // 循环定时器
  setTimeout(function () { // 定时器回调函数
    alert(&#39;到点了&#39;+this)
  }, 2000)
  /*var a = 3
  alert(window.a)
  window.b = 4
  alert(b)*/
&lt;/script&gt;</code></pre>
<h3><span id="6-iife">6、IIFE</span></h3><ol>
<li>理解<ul>
<li>全称: Immediately-Invoked Function Expression（立即执行函数）</li>
</ul>
</li>
<li>作用<ul>
<li>隐藏实现</li>
<li>不会污染外部(全局)命名空间</li>
<li>用它来编码js模块</li>
</ul>
</li>
</ol>
<pre><code class="javascript">(function () { //匿名函数自调用
  var a = 3
  console.log(a + 3)
})()
var a = 4
console.log(a)
;(function () {
  var a = 1
  function test () {
    console.log(++a)
  }
  window.$ = function () { // 向外暴露一个全局函数
    return {
      test: test
    }
  }
})()
$().test() // 1.</code></pre>
<h3><span id="7-函数中的this">7、函数中的this</span></h3><ol>
<li>this是什么?<ul>
<li>任何函数本质上都是通过某个对象来调用的,如果没有直接指定就是window</li>
<li>所有函数内部都有一个变量this</li>
<li>它的值是调用函数的当前对象</li>
</ul>
</li>
<li>如何确定this的值?<ul>
<li>test(): window</li>
<li>p.test(): p</li>
<li>new test(): 新创建的对象</li>
<li>p.call(obj): obj</li>
</ul>
</li>
</ol>
<pre><code class="javascript">function Person(color) {
  console.log(this)
  this.color = color;
  this.getColor = function () {
    console.log(this)
    return this.color;
  };
  this.setColor = function (color) {
    console.log(this)
    this.color = color;
  };
}

Person(&quot;red&quot;); //this是谁? window

var p = new Person(&quot;yello&quot;); //this是谁? p

p.getColor(); //this是谁? p

var obj = {};
p.setColor.call(obj, &quot;black&quot;); //this是谁? obj

var test = p.setColor;
test(); //this是谁? window

function fun1() {
  function fun2() {
    console.log(this);
  }

  fun2(); //this是谁? window
}
fun1();</code></pre>
<h2><span id="二-函数高级">二、函数高级</span></h2><p>超级重点，两大神兽：==原型和闭包==</p>
<h3><span id="1-原型和原型链">1、原型和原型链</span></h3><p>(1) 原型</p>
<ol>
<li>函数的prototype属性(图)<ul>
<li>每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)</li>
<li>原型对象中有一个属性constructor, 它指向函数对象</li>
</ul>
</li>
</ol>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815113737.png" alt="image-20200815113735029"></p>
<ol start="2">
<li>给原型对象添加属性(一般都是方法)<ul>
<li>作用: 函数的所有实例对象自动拥有原型中的属性(方法)</li>
</ul>
</li>
</ol>
<pre><code class="javascript">// 每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)
console.log(Date.prototype, typeof Date.prototype)
function Fun () {//alt + shift +r(重命名rename)

}
console.log(Fun.prototype)  // 默认指向一个Object空对象(没有我们的属性)

// 原型对象中有一个属性constructor, 它指向函数对象
console.log(Date.prototype.constructor===Date)
console.log(Fun.prototype.constructor===Fun)

//给原型对象添加属性(一般是方法) ===&gt;实例对象可以访问
Fun.prototype.test = function () {
  console.log(&#39;test()&#39;)
}
var fun = new Fun()
fun.test()</code></pre>
<p>(2) 显式原型与隐式原型</p>
<ol>
<li>每个函数function都有一个prototype，即显式原型(属性)</li>
<li>每个实例对象都有一个<strong>proto</strong>，可称为隐式原型(属性)</li>
<li>对象的隐式原型的值为其对应构造函数的显式原型的值</li>
<li>内存结构(图)</li>
<li>总结:<ul>
<li>函数的<code>prototype</code>属性: 在定义函数时自动添加的, 默认值是一个空Object对象</li>
<li>对象的<code>__proto__</code>属性: 创建对象时自动添加的, 默认值为构造函数的prototype属性值</li>
<li>程序员能直接操作显式原型, 但不能直接操作隐式原型(ES6之前)</li>
</ul>
</li>
</ol>
<pre><code class="javascript">//定义构造函数
function Fn() {   // 内部语句: this.prototype = {}

}
// 1. 每个函数function都有一个prototype，即显式原型属性, 默认指向一个空的Object对象
console.log(Fn.prototype)
// 2. 每个实例对象都有一个__proto__，可称为隐式原型
//创建实例对象
var fn = new Fn()  // 内部语句: this.__proto__ = Fn.prototype
console.log(fn.__proto__)
// 3. 对象的隐式原型的值为其对应构造函数的显式原型的值
console.log(Fn.prototype===fn.__proto__) // true
//给原型添加方法
Fn.prototype.test = function () {
  console.log(&#39;test()&#39;)
}
//通过实例调用原型的方法
fn.test()</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815115018.png" alt="image-20200815115016550"></p>
<p>(3) 原型链</p>
<ol>
<li>原型链(图解)<ul>
<li>访问一个对象的属性时，<ul>
<li>先在自身属性中查找，找到返回</li>
<li>如果没有, 再沿着<code>__proto__</code>这条链向上查找, 找到返回</li>
<li>如果最终没找到, 返回undefined</li>
</ul>
</li>
<li>别名: 隐式原型链</li>
<li>作用: 查找对象的属性(方法)</li>
</ul>
</li>
</ol>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815115136.png" alt="image-20200815115135158"></p>
<ol start="2">
<li>构造函数/原型/实体对象的关系(图解)</li>
</ol>
<pre><code class="javascript">var o1 = new Object();
var o2 = {};</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815115415.png" alt="image-20200815115413214"></p>
<ol start="3">
<li>构造函数/原型/实体对象的关系2(图解)</li>
</ol>
<pre><code class="javascript">function Foo(){  }
// var Foo = new Function()
// Function = new Function()
// 所有函数的__proto__都是一样的</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815115508.png" alt="image-20200815115505581"></p>
<pre><code class="javascript">// console.log(Object)
//console.log(Object.prototype)
console.log(Object.prototype.__proto__)
function Fn() {
  this.test1 = function () {
    console.log(&#39;test1()&#39;)
  }
}
console.log(Fn.prototype)
Fn.prototype.test2 = function () {
  console.log(&#39;test2()&#39;)
}

var fn = new Fn()

fn.test1()
fn.test2()
console.log(fn.toString())
console.log(fn.test3)
// fn.test3()

/*
1. 函数的显示原型指向的对象默认是空Object实例对象(但Object不满足)
  */
console.log(Fn.prototype instanceof Object) // true
console.log(Object.prototype instanceof Object) // false
console.log(Function.prototype instanceof Object) // true
/*
2. 所有函数都是Function的实例(包含Function)
*/
console.log(Function.__proto__===Function.prototype)
/*
3. Object的原型对象是原型链尽头
  */
console.log(Object.prototype.__proto__) // null
</code></pre>
<ol start="4">
<li>原型继承</li>
</ol>
<ul>
<li>构造函数的实例对象自动拥有构造函数原型对象的属性(方法)</li>
<li>利用的就是原型链</li>
</ul>
<ol start="5">
<li>原型属性问题</li>
</ol>
<ul>
<li>读取对象的属性值时: 会自动到原型链中查找</li>
<li>设置对象的属性值时: 不会查找原型链, 如果当前对象中没有此属性, 直接添加此属性并设置其值</li>
<li>方法一般定义在原型中, 属性一般通过构造函数定义在对象本身上</li>
</ul>
<pre><code class="javascript">function Fn() {

}
Fn.prototype.a = &#39;xxx&#39;
var fn1 = new Fn()
console.log(fn1.a, fn1)

var fn2 = new Fn()
fn2.a = &#39;yyy&#39;
console.log(fn1.a, fn2.a, fn2)

function Person(name, age) {
  this.name = name
  this.age = age
}
Person.prototype.setName = function (name) {
  this.name = name
}
var p1 = new Person(&#39;Tom&#39;, 12)
p1.setName(&#39;Bob&#39;)
console.log(p1)

var p2 = new Person(&#39;Jack&#39;, 12)
p2.setName(&#39;Cat&#39;)
console.log(p2)
console.log(p1.__proto__===p2.__proto__) // true</code></pre>
<p>(4) 探索instanceof</p>
<ol>
<li>instanceof是如何判断的?<ul>
<li>表达式: A instanceof B</li>
<li>如果B函数的显式原型对象在A对象的原型链上, 返回true, 否则返回false</li>
</ul>
</li>
<li>Function是通过new自己产生的实例</li>
</ol>
<p><em>案例1</em></p>
<pre><code class="javascript">function Foo() {  }
var f1 = new Foo()
console.log(f1 instanceof Foo) // true
console.log(f1 instanceof Object) // true</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815120818.png" alt="image-20200815120816214"></p>
<p><em>案例2</em></p>
<pre><code class="javascript">console.log(Object instanceof Function) // true
console.log(Object instanceof Object) // true
console.log(Function instanceof Function) // true
console.log(Function instanceof Object) // true

function Foo() {}
console.log(Object instanceof  Foo) // false</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815120915.png" alt="image-20200815120913828"></p>
<p>(5) 面试题</p>
<pre><code class="javascript">/*
测试题1
  */
function A () {

}
A.prototype.n = 1

var b = new A()

A.prototype = {
  n: 2,
  m: 3
}

var c = new A()
console.log(b.n, b.m, c.n, c.m) // 1 undefined 2 3</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815122322.png" alt="image-20200815122319966"></p>
<pre><code class="javascript">/*
  测试题2
  */
function F (){}
Object.prototype.a = function(){
  console.log(&#39;a()&#39;)
}
Function.prototype.b = function(){
  console.log(&#39;b()&#39;)
}

var f = new F()
f.a() // a()
// f.b() // Uncaught TypeError: f.b is not a function
F.a() // a()
F.b() // b()
console.log(f) // F {}
console.log(Object.prototype) // {a: ƒ, constructor: ƒ, __defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, …}
console.log(Function.prototype) // ƒ () { [native code] }</code></pre>
<h3><span id="2-执行上下文与执行上下文栈">2、执行上下文与执行上下文栈</span></h3><p>(1) 变量提升与函数提升</p>
<ol>
<li>变量声明提升<ul>
<li>通过<strong>var定义(声明)的变量</strong>, 在定义语句之前就可以访问到</li>
<li>值: undefined</li>
</ul>
</li>
<li>函数声明提升<ul>
<li>通过<strong>function声明的函数</strong>, 在之前就可以直接调用</li>
<li>值: 函数定义(对象)</li>
</ul>
</li>
<li>问题: 变量提升和函数提升是如何产生的?<ul>
<li>在js中js引擎会优先解析var变量和function定义！在预解析完成后从上到下逐步进行！</li>
<li>解析var变量时，会把值存储在“执行环境”中，而不会去赋值，值是存储作用！例如:<br>alert（a）; var a = 2; 这时会输出undifiend,意思是没有被初始化没有被赋值!<br>这并不是没有被定义、错误了的意思！</li>
<li>在解析function时会把函数整体定义，这也就解释了为什么在function定义函数时为什么可以先调用后声明了！其实表面上看是先调用了，其实在内部机制中第一步实行的是把以function方式定义的函数先声明了（预处理）</li>
</ul>
</li>
</ol>
<pre><code class="javascript">/*
面试题 : 输出 undefined
  */
var a = 3
function fn () {
  console.log(a)
  var a = 4
}
fn() // undefined

console.log(b) //undefined  变量提升
fn2() //可调用  函数提升 fn2()
// fn3() //不能  变量提升 Uncaught TypeError: fn3 is not a function

var b = 3
function fn2() {
  console.log(&#39;fn2()&#39;)
}

var fn3 = function () {
  console.log(&#39;fn3()&#39;)
}</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815122405.png" alt="image-20200815122404360"></p>
<p>(2) 执行上下文</p>
<ol>
<li>代码分类(位置)<ul>
<li>全局代码</li>
<li>函数(局部)代码</li>
</ul>
</li>
<li>全局执行上下文<ul>
<li>在执行全局代码前将window确定为全局执行上下文</li>
<li>对全局数据进行预处理<ul>
<li>var定义的全局变量==&gt;undefined, 添加为window的属性</li>
<li>function声明的全局函数==&gt;赋值(fun), 添加为window的方法</li>
<li>this==&gt;赋值(window)</li>
</ul>
</li>
<li>开始执行全局代码<pre><code class="javascript">// 全局声明的变量和函数都会在window中：window.a1、window.a2()
console.log(a1, window.a1) // undefined undefined
window.a2() // a2() 
console.log(this) // Window
</code></pre>
</li>
</ul>
</li>
</ol>
<p>var a1 = 3 // 在这声明，事实上调到上面声明了，这里赋值(因此上面能访问)<br>function a2() { // 在这里声明，能够在上面调用<br>  console.log(‘a2()’)<br>}<br>console.log(a1) // 3</p>
<pre><code>


3. 函数执行上下文
  * 在调用函数, 准备执行函数体之前, 创建对应的函数执行上下文对象(虚拟的, 存在于栈中)
  * 对局部数据进行预处理
    * 形参变量——&gt;赋值(实参)——&gt;添加为执行上下文的属性
    * arguments==&gt;赋值(实参列表), 添加为执行上下文的属性
    * var定义的局部变量==&gt;undefined, 添加为执行上下文的属性
    * function声明的函数 ==&gt;赋值(fun), 添加为执行上下文的方法
    * this==&gt;赋值(调用函数的对象)
  * 开始执行函数体代码

![image-20200815123117687](https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815123118.png)



(3) 执行上下文栈

1. 在全局代码执行前, JS引擎就会创建一个栈来存储管理所有的执行上下文对象
2. 在全局执行上下文(window)确定后, 将其添加到栈中(压栈)
3. 在函数执行上下文创建后, 将其添加到栈中(压栈)
4. 在当前函数执行完后,将栈顶的对象移除(出栈)
5. 当所有的代码执行完后, 栈中只剩下window

```javascript
var a = 10
var bar = function (x) {
  var b = 5
  foo(x + b)
}
var foo = function (y) {
  var c = 5
  console.log(a + c + y)
}
bar(10)
// bar(10)</code></pre><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815123328.png" alt="image-20200815123327077"></p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815123402.png" alt="image-20200815123401244"></p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815123416.png" alt="image-20200815123414448"></p>
<pre><code class="javascript">console.log(&#39;gb: &#39;+ i)
var i = 1
foo(1)
function foo(i) {
  if (i == 4) {
    return
  }
  console.log(&#39;fb:&#39; + i)
  foo(i + 1) //递归调用: 在函数内部调用自己
  console.log(&#39;fe:&#39; + i)
}
console.log(&#39;ge: &#39; + i)
/*
1. 依次输出什么?
  gb: undefined
  fb: 1
  fb: 2
  fb: 3
  fe: 3
  fe: 2
  fe: 1
  ge: 1
2. 整个过程中产生了几个执行上下文?  5   */</code></pre>
<p>(4) 面试题</p>
<pre><code class="javascript">/*
  测试题1:  先执行变量提升, 再执行函数提升(先找var和function xxx(){})
  */
function a() {}
var a
console.log(typeof a) // function</code></pre>
<pre><code class="javascript">/*
  测试题2: 先提出去，window中有b，且未赋值
  */
if (!(b in window)) {
  var b = 1
}
console.log(b) // undefined</code></pre>
<pre><code class="javascript">/*
  测试题3: 针对变量名同名或函数名同名的情况：如果声明了同名的函数其定义会被后者覆盖，声明了同名的变量其值也会被后者覆盖
  */
var c = 1
function c(c) {
  console.log(c)
  var c = 3
}
console.log(c) // 1
c(2) // 报错 Uncaught TypeError: c is not a function

再看一个
//声明阶段
function x(){//函数声明
    //console.log(5)此句会被下句代码覆盖
    console.log(3)
}
var x;//变量声明，因为x已经声明过了，此处不进行声明（忽略）
//执行阶段
console.log(x) // ƒ x(){//函数声明//console.log(5);此句会被下句代码覆盖console.log(3);}
console.log(x()) // 3
x=1 
x=100 //x的值被覆盖
console.log(x) // 100
console.log(x()) // Uncaught TypeError: x is not a function</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815125003.png" alt="image-20200815125002631"></p>
<h3><span id="3-作用域与作用域链">3、作用域与作用域链</span></h3><p>(1) 作用域</p>
<ol>
<li>理解<ul>
<li>就是一块”地盘”, 一个代码段所在的区域</li>
<li>它是静态的(相对于上下文对象), 在编写代码时就确定了</li>
</ul>
</li>
<li>分类<ul>
<li>全局作用域</li>
<li>函数作用域</li>
<li>没有块作用域(ES6有了)<pre><code class="javascript">/*  //没块作用域
if(true) {
var c = 3
}
console.log(c) // 3 有块作用域则报错*/</code></pre>
</li>
</ul>
</li>
</ol>
<ol start="3">
<li>作用<ul>
<li>隔离变量，不同作用域下同名变量不会有冲突</li>
</ul>
</li>
</ol>
<p>例如把如下代码分割</p>
<pre><code class="javascript">var a = 10,
  b = 20
function fn(x) {
  var a = 100,
    c = 300;
  console.log(&#39;fn()&#39;, a, b, c, x) 
  function bar(x) {
    var a = 1000,
      d = 400
    console.log(&#39;bar()&#39;, a, b, c, d, x)
  }
  bar(100) // bar() 1000 20 300 400 100
  bar(200) // bar() 1000 20 300 400 200
}
fn(10) // fn() 100 20 300 10</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815125424.png" alt="image-20200815125422438"></p>
<p>(2) 作用域与执行上下文</p>
<ol>
<li>区别1<ul>
<li>全局作用域之外，每个函数都会创建自己的作用域，作用域在函数定义时就已经确定了。而不是在函数调用时</li>
<li>全局执行上下文环境是在全局作用域确定之后, js代码马上执行之前创建</li>
<li>函数执行上下文是在调用函数时, 函数体代码执行之前创建</li>
</ul>
</li>
<li>区别2<ul>
<li>作用域是静态的, 只要函数定义好了就一直存在, 且不会再变化</li>
<li>执行上下文是动态的, 调用函数时创建, 函数调用结束时就会自动释放</li>
</ul>
</li>
<li>联系<ul>
<li>执行上下文(对象)是从属于所在的作用域</li>
<li>全局上下文环境==&gt;全局作用域</li>
<li>函数上下文环境==&gt;对应的函数使用域</li>
</ul>
</li>
</ol>
<p>还是上面那串代码</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815125637.png" alt="image-20200815125635951"></p>
<p>(3) 作用域链</p>
<ol>
<li>理解<ul>
<li>多个上下级关系的作用域形成的链, 它的方向是从下向上的(从内到外)</li>
<li>查找变量时就是沿着作用域链来查找的</li>
</ul>
</li>
<li>查找一个变量的查找规则<ul>
<li>在当前作用域下的执行上下文中查找对应的属性, 如果有直接返回, 否则进入2</li>
<li>在上一级作用域的执行上下文中查找对应的属性, 如果有直接返回, 否则进入3</li>
<li>再次执行2的相同操作, 直到全局作用域, 如果还找不到就抛出找不到的异常</li>
</ul>
</li>
</ol>
<pre><code class="javascript">var a = 1
function fn1() {
  var b = 2
  function fn2() {
    var c = 3
    console.log(c) // 3
    console.log(b) // 2
    console.log(a) // 1
    console.log(d) // Uncaught ReferenceError: d is not defined
  }
  fn2()
}
fn1()</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815125756.png" alt="image-20200815125755108"></p>
<p>(4) 面试题</p>
<pre><code class="javascript">var x = 10;
function fn() {
  console.log(x);
}
function show(f) {
  var x = 20;
  f();
}
show(fn); // 10</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815125904.png" alt="image-20200815125902910"></p>
<pre><code class="javascript">var fn = function () {
  console.log(fn)
}
fn() // f(){console.log(fn)}

var obj = {
  fn2: function () {
    console.log(fn2)
    //console.log(this.fn2) // ƒ () {// console.log(fn2) console.log(this.fn2)}
  }
}
obj.fn2() // Uncaught ReferenceError: fn2 is not defined</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815125936.png" alt="image-20200815125935489"></p>
<h3><span id="4-闭包">4、闭包</span></h3><p>(1) 引入实例</p>
<pre><code class="html">&lt;button&gt;测试1&lt;/button&gt;
&lt;button&gt;测试2&lt;/button&gt;
&lt;button&gt;测试3&lt;/button&gt;
&lt;!--
需求: 点击某个按钮, 提示&quot;点击的是第n个按钮&quot;
--&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  var btns = document.getElementsByTagName(&#39;button&#39;)
  //遍历加监听
  /*// 无论点哪个都是 第4个 ——点击的时候循环已经执行完了
  for (var i = 0,length=btns.length; i &lt; length; i++) {
    var btn = btns[i]
    btn.onclick = function () {
      alert(&#39;第&#39;+(i+1)+&#39;个&#39;)
    }
  }*/
  /*
  for (var i = 0,length=btns.length; i &lt; length; i++) {
    var btn = btns[i]
    //将btn所对应的下标保存在btn上，利用这中方式可以实现
    btn.index = i
    btn.onclick = function () {
      alert(&#39;第&#39;+(this.index+1)+&#39;个&#39;)
    }
  }*/

  //利用闭包
  for (var i = 0,length=btns.length; i &lt; length; i++) {
    (function (j) {
      var btn = btns[j]
      btn.onclick = function () {
        alert(&#39;第&#39;+(j+1)+&#39;个&#39;)
      }
    })(i)
  }
&lt;/script&gt;</code></pre>
<p>(2) 理解闭包</p>
<ol>
<li>如何产生闭包?<ul>
<li>当一个<strong>嵌套的内部(子)函数引用了嵌套的外部(父)函数的变量(函数)</strong>时, 就产生了闭包</li>
</ul>
</li>
<li>闭包到底是什么?<ul>
<li>使用chrome调试查看</li>
<li>理解一: 闭包是嵌套的内部函数(绝大部分人)</li>
<li>理解二: 包含被引用变量(函数)的对象(极少数人)</li>
<li>注意: 闭包存在于嵌套的内部函数中</li>
</ul>
</li>
<li><strong><em>产生闭包的条件?</em></strong><ul>
<li>函数嵌套</li>
<li>内部函数引用了外部函数的数据(变量/函数)</li>
</ul>
</li>
</ol>
<pre><code class="javascript">function fn1 () {
  var a = 2
  var b = &#39;abc&#39;
  function fn2 () { //执行函数定义就会产生闭包(不用调用内部函数)
    console.log(a)
  }
  // fn2()
}
fn1()

function fun1() {
  var a = 3
  var fun2 = function () { // 声明变量形式定义函数，不会产生闭包
    console.log(a)
  }
}
fun1()</code></pre>
<p>(3) 常见的闭包</p>
<ol>
<li>将函数作为另一个函数的返回值</li>
<li>将函数作为实参传递给另一个函数调用</li>
</ol>
<pre><code class="javascript">// 1. 将函数作为另一个函数的返回值
function fn1() {
  var a = 2
  function fn2() {
    a++
    console.log(a)
  }
  return fn2
}
var f = fn1()
f() // 3
f() // 4
/* f调用的是内部函数，fn1外部函数执行了一次，产生1个闭包 */

// 2. 将函数作为实参传递给另一个函数调用
function showDelay(msg, time) {
  setTimeout(function () {
    alert(msg)
  }, time)
}
showDelay(&#39;test&#39;, 2000)</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815131913.png" alt="image-20200815131912058"></p>
<p>(4) 闭包的作用</p>
<ol>
<li>使用函数内部的变量在函数执行完后, 仍然存活在内存中(延长了局部变量的生命周期)</li>
<li>让函数外部可以操作(读写)到函数内部的数据(变量/函数)</li>
</ol>
<p><em>问题:</em></p>
<ul>
<li><p>函数执行完后, 函数内部声明的局部变量是否还存在? </p>
<p>一般是不存在, 存在于闭中的变量才可能存在</p>
</li>
<li><p>在函数外部能直接访问函数内部的局部变量吗? </p>
<p>不能, 但我们可以通过闭包让外部操作它</p>
</li>
</ul>
<pre><code class="javascript">function fn1() {
  var a = 2
  function fn2() {
    a++
    console.log(a)
    // return a
  }
  function fn3() {
    a--
    console.log(a)
  }
  return fn3
}
var f = fn1()
f() // 1
f() // 0</code></pre>
<p>(5) 闭包的生命周期</p>
<ol>
<li>产生: 在嵌套内部函数<strong>定义</strong>执行完时就产生了(不是在调用)</li>
<li>死亡: 在嵌套的内部函数成为垃圾对象时</li>
</ol>
<pre><code>function fn1() {
  //此时闭包就已经产生了(函数提升, 内部函数对象已经创建了)
  var a = 2
  function fn2 () {
    a++
    console.log(a)
  }
  return fn2
}
var f = fn1()
f() // 3
f() // 4
f = null //闭包死亡(包含闭包的函数对象成为垃圾对象)</code></pre><p>(6) 闭包的应用: 自定义JS模块</p>
<p>模块：</p>
<ul>
<li>具有特定功能的js文件<ul>
<li>将所有的数据和功能都封装在一个函数内部(私有的)</li>
<li>只向外暴露一个包括n个方法的对象或函数</li>
<li>模块的使用者, 只需要通过模块暴露的对象调用方法来实现对应的功能</li>
</ul>
</li>
</ul>
<p>例如：</p>
<p>文件<code>myModule1.js</code>就是一个模块</p>
<pre><code class="javascript">function myModule() {
  //私有数据
  var msg = &#39;Hello This is Module1&#39;
  //操作数据的函数
  function doSomething() {
    console.log(&#39;doSomething() &#39;+msg.toUpperCase())
  }
  function doOtherthing () {
    console.log(&#39;doOtherthing() &#39;+msg.toLowerCase())
  }

  //向外暴露对象(给外部使用的方法)
  return {
    doSomething: doSomething,
    doOtherthing: doOtherthing
  }
}</code></pre>
<p>在其他文件中引入</p>
<pre><code class="html">&lt;script type=&quot;text/javascript&quot; src=&quot;myModule.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  var module = myModule()
  module.doSomething()
  module.doOtherthing()
&lt;/script&gt;</code></pre>
<p>下面这种更好用一点，可以不需要先执行那个函数（IIFE）</p>
<p><code>myModule2.js</code></p>
<pre><code class="javascript">(function () {
  //私有数据
  var msg = &#39;Hello This is Module1&#39;
  //操作数据的函数
  function doSomething() {
    console.log(&#39;doSomething() &#39;+msg.toUpperCase())
  }
  function doOtherthing () {
    console.log(&#39;doOtherthing() &#39;+msg.toLowerCase())
  }

  //向外暴露对象(给外部使用的方法)
  window.myModule2 = {
    doSomething: doSomething,
    doOtherthing: doOtherthing
  }
})()</code></pre>
<p>引入使用</p>
<pre><code class="html">&lt;script type=&quot;text/javascript&quot; src=&quot;myModule2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  myModule2.doSomething()
  myModule2.doOtherthing()
&lt;/script&gt;</code></pre>
<p>压缩代码时，会把变量改为a、b、c这种的，因此最好这样做</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815132854.png" alt="image-20200815132852872"></p>
<p>(7) 闭包的缺点及解决</p>
<ol>
<li>缺点<ul>
<li>函数执行完后, 函数内的局部变量没有释放, 占用内存时间会变长</li>
<li>容易造成内存泄露</li>
</ul>
</li>
<li>解决<ul>
<li>能不用闭包就不用</li>
<li>及时释放</li>
</ul>
</li>
</ol>
<pre><code class="javascript">function fn1() {
  var arr = new Array[100000]
  function fn2() {
    console.log(arr.length)
  }
  return fn2
}
var f = fn1()
f()

f = null //让内部函数成为垃圾对象--&gt;回收闭包</code></pre>
<p>补充：内存溢出与内存泄露</p>
<ul>
<li>内存溢出<ul>
<li>一种程序运行出现的错误</li>
<li>当程序运行需要的内存超过了剩余的内存时，就会抛出内存溢出的错误</li>
</ul>
</li>
<li>内存泄露<ul>
<li>占用的内存没有及时释放</li>
<li>内存泄露积累多了就容易导致内存溢出</li>
<li>常见的内存泄露：<ul>
<li>意外的全局变量</li>
<li>没有及时清理的计时器或回调函数</li>
<li>闭包</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815133732.png" alt="image-20200815133731332"></p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815133741.png" alt="image-20200815133739782"></p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815133756.png" alt="image-20200815133755479"></p>
<p>(8) 面试题</p>
<pre><code class="javascript">//代码片段一
var name = &quot;The Window&quot;;
var object = {
  name : &quot;My Object&quot;,
  getNameFunc : function(){
    return function(){
      return this.name;
    };
  }
};
alert(object.getNameFunc()());  // the window

//代码片段二
var name2 = &quot;The Window&quot;;
var object2 = {
  name2 : &quot;My Object&quot;,
  getNameFunc : function(){
    var that = this;
    return function(){
      return that.name2;
    };
  }
};
alert(object2.getNameFunc()()); // my object

// 三
function fun(n,o) {
  console.log(o)
  return {
    fun:function(m){
      return fun(m,n)
    }
  }
}
var a = fun(0)
a.fun(1)
a.fun(2)
a.fun(3)//undefined,0,0,0

var b = fun(0).fun(1).fun(2).fun(3)//undefined,0,1,2

var c = fun(0).fun(1)
c.fun(2)
c.fun(3)//undefined,0,1,1</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815133831.png" alt="image-20200815133830697"></p>
<h2><span id="三-面向对象高级">三、面向对象高级</span></h2><h3><span id="1-对象创建模式">1、对象创建模式</span></h3><p>有如下五种方式：</p>
<p>(1) Object构造函数模式</p>
<ul>
<li>套路: 先创建空Object对象, 再动态添加属性/方法</li>
<li>适用场景: 起始时不确定对象内部数据</li>
<li>问题: 语句太多</li>
</ul>
<pre><code class="javascript">/*
一个人: name:&quot;Tom&quot;, age: 12
  */
// 先创建空Object对象
var p = new Object()
p = {} //此时内部数据是不确定的
// 再动态添加属性/方法
p.name = &#39;Tom&#39;
p.age = 12
p.setName = function (name) {
  this.name = name
}

//测试
console.log(p.name, p.age)
p.setName(&#39;Bob&#39;)
console.log(p.name, p.age)</code></pre>
<p>(2) 对象字面量模式</p>
<ul>
<li>套路: 使用{}创建对象, 同时指定属性/方法<ul>
<li>适用场景: 起始时对象内部数据是确定的</li>
<li>问题: 如果创建多个对象, 有重复代码</li>
</ul>
</li>
</ul>
<pre><code class="javascript">var p = {
  name: &#39;Tom&#39;,
  age: 12,
  setName: function (name) {
    this.name = name
  }
}

//测试
console.log(p.name, p.age)
p.setName(&#39;JACK&#39;)
console.log(p.name, p.age)

var p2 = {  //如果创建多个对象代码很重复
  name: &#39;Bob&#39;,
  age: 13,
  setName: function (name) {
    this.name = name
  }
}</code></pre>
<p>(3) <del>工厂模式</del></p>
<ul>
<li>套路: 通过工厂函数动态创建对象并返回<ul>
<li>适用场景: 需要创建多个对象</li>
<li>问题: 对象没有一个具体的类型, 都是Object类型</li>
</ul>
</li>
</ul>
<pre><code class="javascript">function createPerson(name, age) { //返回一个对象的函数===&gt;工厂函数
  var obj = {
    name: name,
    age: age,
    setName: function (name) {
      this.name = name
    }
  }

  return obj
}

// 创建2个人
var p1 = createPerson(&#39;Tom&#39;, 12)
var p2 = createPerson(&#39;Bob&#39;, 13)

// p1/p2是Object类型

function createStudent(name, price) {
  var obj = {
    name: name,
    price: price
  }
  return obj
}
var s = createStudent(&#39;张三&#39;, 12000)
// s也是Object</code></pre>
<p>(4) 自定义构造函数模式</p>
<ul>
<li>套路: 自定义构造函数, 通过new创建对象</li>
<li>适用场景: 需要创建多个类型确定的对象</li>
<li>问题: 每个对象都有相同的数据, 浪费内存</li>
</ul>
<pre><code class="javascript">//定义类型
function Person(name, age) {
  this.name = name
  this.age = age
  this.setName = function (name) {
    this.name = name
  }
}
var p1 = new Person(&#39;Tom&#39;, 12)
p1.setName(&#39;Jack&#39;)
console.log(p1.name, p1.age)
console.log(p1 instanceof Person)

function Student (name, price) {
  this.name = name
  this.price = price
}
var s = new Student(&#39;Bob&#39;, 13000)
console.log(s instanceof Student)

var p2 = new Person(&#39;JACK&#39;, 23)
console.log(p1, p2)</code></pre>
<p>方法两者都有，且相同，不需要单独拥有，可放到原型中(方法一般放到原型中)——&gt;</p>
<p>(5) 构造函数+原型的组合模式</p>
<ul>
<li>套路: 自定义构造函数, 属性在函数中初始化, 方法添加到原型上</li>
<li>适用场景: 需要创建多个类型确定的对象</li>
</ul>
<pre><code class="javascript">function Person(name, age) { //在构造函数中只初始化一般函数
  this.name = name
  this.age = age
}
Person.prototype.setName = function (name) {
  this.name = name
}

var p1 = new Person(&#39;Tom&#39;, 23)
var p2 = new Person(&#39;Jack&#39;, 24)
console.log(p1, p2)</code></pre>
<h3><span id="2-继承模式">2、继承模式</span></h3><p>继承，在js中有三种方式：</p>
<p>(1) 原型链继承</p>
<ol>
<li>套路<ul>
<li>定义父类型构造函数</li>
<li>给父类型的原型添加方法</li>
<li>定义子类型的构造函数</li>
<li>创建父类型的对象赋值给子类型的原型</li>
<li>将子类型原型的构造属性设置为子类型</li>
<li>给子类型原型添加方法</li>
<li>创建子类型的对象: 可以调用父类型的方法</li>
</ul>
</li>
<li>关键<ul>
<li>子类型的原型为父类型的一个实例对象</li>
</ul>
</li>
</ol>
<pre><code class="javascript">//父类型
function Supper() {
  this.supProp = &#39;Supper property&#39;
}
Supper.prototype.showSupperProp = function () {
  console.log(this.supProp)
}

//子类型
function Sub() {
  this.subProp = &#39;Sub property&#39;
}

// 子类型的原型为父类型的一个实例对象
Sub.prototype = new Supper()
// 让子类型的原型的constructor指向子类型
Sub.prototype.constructor = Sub
Sub.prototype.showSubProp = function () {
  console.log(this.subProp)
}

var sub = new Sub()
sub.showSupperProp()
// sub.toString()
sub.showSubProp()

console.log(sub)  // Sub</code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815135207.png" alt="image-20200815135206553"></p>
<p>(2) 借用构造函数继承</p>
<ol>
<li>套路:<ul>
<li>定义父类型构造函数</li>
<li>定义子类型构造函数</li>
<li>在子类型构造函数中调用父类型构造</li>
</ul>
</li>
<li>关键:<ul>
<li>在子类型构造函数中通用call()调用父类型构造函数</li>
</ul>
</li>
</ol>
<pre><code class="javascript">function Person(name, age) {
  this.name = name
  this.age = age
}
function Student(name, age, price) {
  Person.call(this, name, age)  // 相当于: this.Person(name, age)
  /*this.name = name
  this.age = age*/
  this.price = price
}

var s = new Student(&#39;Tom&#39;, 20, 14000)
console.log(s.name, s.age, s.price)</code></pre>
<p>(3) 组合继承</p>
<ol>
<li><p>利用原型链实现对父类型对象的方法继承</p>
</li>
<li><p>利用super()借用父类型构建函数初始化相同属性</p>
</li>
</ol>
<pre><code class="javascript">function Person(name, age) {
  this.name = name
  this.age = age
}
Person.prototype.setName = function (name) {
  this.name = name
}

function Student(name, age, price) {
  Person.call(this, name, age)  // 为了得到属性
  this.price = price
}
Student.prototype = new Person() // 为了能看到父类型的方法
Student.prototype.constructor = Student //修正constructor属性
Student.prototype.setPrice = function (price) {
  this.price = price
}

var s = new Student(&#39;Tom&#39;, 24, 15000)
s.setName(&#39;Bob&#39;)
s.setPrice(16000)
console.log(s.name, s.age, s.price)</code></pre>
<h2><span id="四-线程机制与事件机制">四、线程机制与事件机制</span></h2><h3><span id="1-进程与线程">1、进程与线程</span></h3><p>(1) 进程(process)</p>
<ul>
<li>程序的一次执行, 它占有一片独有的内存空间</li>
<li>可以通过windows任务管理器查看进程</li>
</ul>
<p>(2) 线程(thread)</p>
<ul>
<li>是进程内的一个独立执行单元</li>
<li>是程序执行的一个完整流程</li>
<li>是CPU的最小的调度单元</li>
</ul>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815135743.png" alt="线程与进程"></p>
<p>应用程序必须运行在某个进程的某个线程上<br>一个进程中至少有一个运行的线程: 主线程,  进程启动后自动创建<br>一个进程中也可以同时运行多个线程, 我们会说程序是多线程运行的<br>一个进程内的数据可以供其中的多个线程直接共享<br>多个进程之间的数据是不能直接共享的<br>线程池(thread pool): 保存多个线程对象的容器, 实现线程对象的反复利用</p>
<p>(3) 相关问题</p>
<ol>
<li>何为多进程与多线程?</li>
</ol>
<ul>
<li>多进程运行: 一应用程序可以同时启动多个实例运行</li>
<li>多线程: 在一个进程内, 同时有多个线程运行</li>
</ul>
<ol start="2">
<li>比较单线程与多线程?</li>
</ol>
<ul>
<li>多线程<ul>
<li>优点<ul>
<li>能有效提升CPU的利用率</li>
</ul>
</li>
<li>缺点<ul>
<li>创建多线程开销</li>
<li>线程间切换开销</li>
<li>死锁与状态同步问题</li>
</ul>
</li>
</ul>
</li>
<li>单线程<ul>
<li>优点<ul>
<li>顺序编程简单易懂</li>
</ul>
</li>
<li>缺点<ul>
<li>效率低</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>JS是单线程还是多线程?</li>
</ol>
<ul>
<li>js是单线程运行的，但使用H5中的 Web Workers可以多线程运行</li>
</ul>
<ol start="4">
<li>浏览器运行是单线程还是多线程?</li>
</ol>
<ul>
<li>都是多线程运行的</li>
</ul>
<ol start="5">
<li>浏览器运行是单进程还是多进程?</li>
</ol>
<ul>
<li>有的是单进程<ul>
<li>firefox</li>
<li>老版IE</li>
</ul>
</li>
<li>有的是多进程<ul>
<li>chrome</li>
<li>新版IE</li>
</ul>
</li>
<li>如何查看浏览器是否是多进程运行的呢?<ul>
<li>任务管理器–&gt;进程</li>
</ul>
</li>
</ul>
<h3><span id="2-浏览器内核">2、浏览器内核</span></h3><ul>
<li>支撑浏览器运行的最核心的程序</li>
<li>不同的浏览器可能不一样<ul>
<li>Chrome, Safari : webkit</li>
<li>firefox : Gecko</li>
<li>IE    : Trident</li>
<li>360,搜狗等国内浏览器: Trident + webkit</li>
</ul>
</li>
<li>内核由很多模块组成<ul>
<li>主线程<ul>
<li>js引擎模块 : 负责js程序的编译与运行</li>
<li>html,css文档解析模块 : 负责页面文本的解析</li>
<li>DOM/CSS模块 : 负责dom/css在内存中的相关处理 </li>
<li>布局和渲染模块 : 负责页面的布局和效果的绘制(内存中的对象)<pre><code>......</code></pre></li>
</ul>
</li>
<li>​    分线程<ul>
<li>定时器模块 : 负责定时器的管理</li>
<li>DOM事件响应模块 : 负责事件的管理</li>
<li>网络请求模块 : 负责ajax请求</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3><span id="3-定时器引发的思考">3、定时器引发的思考</span></h3><ol>
<li>定时器真是定时执行的吗?</li>
</ol>
<ul>
<li><p>定时器并不能保证真正定时执行</p>
</li>
<li><p>一般会延迟一丁点(可以接受), 也有可能延迟很长时间(不能接受)</p>
</li>
</ul>
<ol start="2">
<li>定时器回调函数是在分线程执行的吗?</li>
</ol>
<ul>
<li>在主线程执行的, js是单线程的</li>
</ul>
<ol start="3">
<li>定时器是如何实现的?</li>
</ol>
<ul>
<li>事件循环模型(后面讲)</li>
</ul>
<pre><code class="javascript">document.getElementById(&#39;btn&#39;).onclick = function () {
  var start = Date.now()
  console.log(&#39;启动定时器前...&#39;)
  setTimeout(function () {
    console.log(&#39;定时器执行了&#39;, Date.now()-start)
  }, 200)
  console.log(&#39;启动定时器后...&#39;)

  // 做一个长时间的工作
  for (var i = 0; i &lt; 1000000000; i++) {

  }
}</code></pre>
<h3><span id="4-js是单线程执行的">4、JS是单线程执行的</span></h3><ol>
<li><p>如何证明js执行是单线程的?</p>
<ul>
<li>setTimeout()的回调函数是在主线程执行的</li>
<li>定时器回调函数只有在运行栈中的代码全部执行完后才有可能执行</li>
</ul>
</li>
<li><p>为什么js要用单线程模式, 而不用多线程模式?</p>
<ul>
<li>JavaScript的单线程，与它的用途有关。</li>
<li>作为浏览器脚本语言，JavaScript的主要用途是与用户互动，以及操作DOM。</li>
<li>这决定了它只能是单线程，否则会带来很复杂的同步问题</li>
</ul>
</li>
<li><p>代码的分类:</p>
<ul>
<li>初始化代码</li>
<li>回调代码</li>
</ul>
</li>
<li><p>js引擎执行代码的基本流程</p>
<ul>
<li>先执行初始化代码: 包含一些特别的代码   回调函数(异步执行)<ul>
<li>设置定时器</li>
<li>绑定事件监听</li>
<li>发送ajax请求</li>
</ul>
</li>
<li>后面在某个时刻才会执行回调代码(回调函数包含的代码)</li>
</ul>
</li>
</ol>
<pre><code class="javascript">setTimeout(function () {
  console.log(&#39;timeout 2222&#39;)
  alert(&#39;22222222&#39;)
}, 2000)
setTimeout(function () {
  console.log(&#39;timeout 1111&#39;)
  alert(&#39;1111111&#39;)
}, 1000)
setTimeout(function () {
  console.log(&#39;timeout() 00000&#39;)
}, 0)
function fn() {
  console.log(&#39;fn()&#39;)
}
fn()

console.log(&#39;alert()之前&#39;)
alert(&#39;------&#39;) //暂停当前主线程的执行, 同时暂停计时, 点击确定后, 恢复程序执行和计时
console.log(&#39;alert()之后&#39;)</code></pre>
<h3><span id="5-浏览器的事件循环轮询模型">5、浏览器的事件循环(轮询)模型</span></h3><p>(1) 模型原理图</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815141019.png" alt="image-20200815141017614"></p>
<ol>
<li>所有代码分类<ul>
<li>初始化执行代码(同步代码): 包含绑定dom事件监听, 设置定时器, 发送ajax请求的代码</li>
<li>回调执行代码(异步代码): 处理回调逻辑</li>
</ul>
</li>
<li>js引擎执行代码的基本流程:<ul>
<li>初始化代码===&gt;回调代码</li>
</ul>
</li>
<li>模型的2个重要组成部分:<ul>
<li>事件(定时器/DOM事件/Ajax)管理模块</li>
<li>回调队列</li>
</ul>
</li>
<li>模型的运转流程<ul>
<li>执行初始化代码, 将事件回调函数交给对应模块管理</li>
<li>当事件发生时, 管理模块会将回调函数及其数据添加到回调列队中</li>
<li>只有当初始化代码执行完后(可能要一定时间), 才会遍历读取回调队列中的回调函数执行</li>
</ul>
</li>
</ol>
<pre><code class="javascript">function fn1() {
  console.log(&#39;fn1()&#39;)
}
fn1()
document.getElementById(&#39;btn&#39;).onclick = function () {
  console.log(&#39;点击了btn&#39;)
}
setTimeout(function () {
  console.log(&#39;定时器执行了&#39;)
}, 2000)
function fn2() {
  console.log(&#39;fn2()&#39;)
}
fn2()</code></pre>
<p>(2) 相关重要概念</p>
<ol>
<li>执行栈 execution stack</li>
</ol>
<ul>
<li>所有的代码都是在此空间中执行的</li>
</ul>
<ol start="2">
<li><p>浏览器内核 browser core</p>
<ul>
<li><p>js引擎模块(在主线程处理)</p>
</li>
<li><p>其它模块(在主/分线程处理)</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815141526.png" alt="运行原理图"></p>
</li>
</ul>
</li>
</ol>
<ol start="3">
<li><p>任务队列 task queue</p>
</li>
<li><p>消息队列 message queue</p>
</li>
<li><p>事件队列 event queue</p>
<p>上面这三个在同一个 callback queue </p>
</li>
</ol>
<ol start="6">
<li><p>事件轮询 event loop<br> 从任务队列中循环取出回调函数放入执行栈中处理(一个接一个)</p>
</li>
<li><p>事件驱动模型 event-driven interaction model</p>
</li>
<li><p>请求响应模型 request-response model</p>
</li>
</ol>
<h3><span id="6-h5-web-workers多线程">6、H5 Web Workers(多线程)</span></h3><p>(1) 介绍</p>
<ul>
<li>Web Workers 是 HTML5 提供的一个javascript多线程解决方案</li>
<li>我们可以将一些大计算量的代码交由web Worker运行而不冻结用户界面</li>
<li>但是子线程完全受主线程控制，且不得操作DOM。所以，这个新标准并没有改变JavaScript单线程的本质</li>
</ul>
<p>(2) 相关API</p>
<ul>
<li>Worker: 构造函数, 加载分线程执行的js文件</li>
<li>Worker.prototype.onmessage: 用于接收另一个线程的回调函数</li>
<li>Worker.prototype.postMessage: 向另一个线程发送消息</li>
</ul>
<p>(3) 使用</p>
<ul>
<li>创建在分线程执行的js文件</li>
</ul>
<pre><code class="javascript">var onmessage =function (event){ //不能用函数声明
    console.log(&#39;onMessage()22&#39;);
    var upper = event.data.toUpperCase();//通过event.data获得发送来的数据
    postMessage( upper );//将获取到的数据发送会主线程
}</code></pre>
<ul>
<li>在主线程中的js中发消息并设置回调</li>
</ul>
<pre><code class="javascript">//创建一个Worker对象并向它传递将在新线程中执行的脚本的URL
var worker = new Worker(&quot;worker.js&quot;);  
//接收worker传过来的数据函数
worker.onmessage = function (event) {     
    console.log(event.data);             
};
//向worker发送数据
worker.postMessage(&quot;hello world&quot;);    </code></pre>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/20200815143823.png" alt="image-20200815143821391"></p>
<p>(4) 应用练习</p>
<ul>
<li>直接在主线程</li>
</ul>
<pre><code class="javascript">&lt;input type=&quot;text&quot; placeholder=&quot;数值&quot; id=&quot;number&quot;&gt;
&lt;button id=&quot;btn&quot;&gt;计算&lt;/button&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// 1 1 2 3 5 8    f(n) = f(n-1) + f(n-2)
function fibonacci(n) {
  return n&lt;=2 ? 1 : fibonacci(n-1) + fibonacci(n-2)  //递归调用
}
// console.log(fibonacci(7))
var input = document.getElementById(&#39;number&#39;)
document.getElementById(&#39;btn&#39;).onclick = function () {
  var number = input.value
  var result = fibonacci(number)
  alert(result)
}
&lt;/script&gt;</code></pre>
<ul>
<li><p>使用Worker在分线程</p>
<ul>
<li>主线程</li>
</ul>
<pre><code class="javascript">var input = document.getElementById(&#39;number&#39;)
document.getElementById(&#39;btn&#39;).onclick = function () {
  var number = input.value

  //创建一个Worker对象
  var worker = new Worker(&#39;worker.js&#39;)
  // 绑定接收消息的监听
  worker.onmessage = function (event) {
    console.log(&#39;主线程接收分线程返回的数据: &#39;+event.data)
    alert(event.data)
  }

  // 向分线程发送消息
  worker.postMessage(number)
  console.log(&#39;主线程向分线程发送数据: &#39;+number)
}
// console.log(this) // window</code></pre>
</li>
</ul>
<ul>
<li><p>分线程 worker.js</p>
<pre><code class="javascript">function fibonacci(n) {
return n&lt;=2 ? 1 : fibonacci(n-1) + fibonacci(n-2)  //递归调用
}

console.log(this)
this.onmessage = function (event) {
var number = event.data
console.log(&#39;分线程接收到主线程发送的数据: &#39;+number)
//计算
var result = fibonacci(number)
postMessage(result)
console.log(&#39;分线程向主线程返回数据: &#39;+result)
// alert(result)  alert是window的方法, 在分线程不能调用
// 分线程中的全局对象不再是window, 所以在分线程中不可能更新界面
}</code></pre>
</li>
</ul>
<p>(5) 不足</p>
<ul>
<li>worker内代码不能操作DOM(更新UI)</li>
<li>不能跨域加载JS</li>
<li>不是每个浏览器都支持这个新特性</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
      
      
       
    </div>
</article>




<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>

<!-- 
<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>JavaScript高级学习笔记</p>
    <p><span class="copy-title">字数:</span><span class="post-count">10.5k</span></p>
    <p><span class="copy-title">本文作者:</span><a  title="Luwang">Luwang</a></p>
    <p><span class="copy-title">发布时间:</span>2020-04-15, 19:33:14</p>
    <p><span class="copy-title">最后更新:</span>2020-09-11, 21:47:00</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/2020/04/15/JavaScriptAdvance/" title="JavaScript高级学习笔记">https://wallleap.cn/2020/04/15/JavaScriptAdvance/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="CC BY-NC-SA 4.0 International" target = "_blank">&#34;署名-非商用-相同方式共享 4.0&#34;</a> 转载请保留原文链接及作者。
    </p>
</div>
 -->

    <div class="article_copyright">
        <p><span class="copy-title">文章标题:</span>JavaScript高级学习笔记</p>
        <p><span class="copy-title">文章字数:</span><span class="post-count">10.5k</span></p>
        <p><span class="copy-title">本文作者:</span><a  title="Luwang">Luwang</a></p>
        <p><span class="copy-title">发布时间:</span>2020-04-15, 19:33:14</p>
        <p><span class="copy-title">最后更新:</span>2020-09-11, 21:47:00</p>
        <span class="copy-title">原始链接:</span><a class="post-url" href="/2020/04/15/JavaScriptAdvance/" title="JavaScript高级学习笔记">https://wallleap.cn/2020/04/15/JavaScriptAdvance/</a>
        <p>
            <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>
    
    
    

    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: 'c34c4610e9454bf73702',
            clientSecret: 'bccb16d6af22e10394fcf4fc3bb916f541b0492c',
            repo: 'comment',
            owner: 'wallleap',
            admin: ['wallleap'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>







    </div>
    <div class="copyright">
        <!-- <p class="footer-entry"><span class="miit">
                <img src="/img/gov.png" title="中华人民共和国工业和信息化部">
                <a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">赣ICP备20000895号</a>
        </span>
    
    ©2019-2020 wallleap
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p> -->



<div id="colophon" class="site-footer" role="contentinfo" style="background-color: transparent;font-size: 12px;">
    <div class="site-info">
        <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
        <a style="color: #b9b9b9;" href="https://www.jinrishici.com/" target="_blank" rel="noopener"><span id="poem_sentence" style="text-align: left;"></span>
        <span id="poem_info" style="text-align: right;"></span></a>
        <script type="text/javascript">
          jinrishici.load(function(result) {
            var sentence = document.querySelector("#poem_sentence")
            var info = document.querySelector("#poem_info")
            sentence.innerHTML = result.data.content
            info.innerHTML = '【' + result.data.origin.dynasty + '】' + result.data.origin.author + '《' + result.data.origin.title + '》'
          });
        </script>
      <!-- // 文字滚动 -->
      
      <!-- <div id="binft" style="text-align:center; color: #666666;"></div>
      <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/textScroll.js"></script> -->
     
      <div class="footertext">
        <div class="img-preload">
          <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/other/wordpress-rotating-ball-o.svg">
          <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/other/disqus-preloader.svg">
        </div>
    
          
  
        <p style="color: #666666;"><a href="#" style="color: #b9b9b9;">Blog wallleap</a>
          , Copyright &copy; 2019-2020 
          by Luwang All Rights Reserved.</p>
      </div>
      <!-- <div class="footer-device">
      <p style="font-family: 'Ubuntu', sans-serif;">
          <i class="fa fa-fire" aria-hidden="true"></i>
          <span style="color: #666;">
            Theme <a style="color: #b9b9b9;" href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank" style="color: #b9b9b9; text-decoration: underline dotted rgba(0, 0, 0, .1);">3-hexo</a>
             <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> 
             by <a href="https://yelog.org/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">yelog</a>
             , Powered by <a style="color: #b9b9b9;" href="https://hexo.io/" target="_blank">Hexo</a>
             , Hosted by <a style="color: #b9b9b9;" href="https://coding.net/" target="_blank">Coding Pages</a>
              & <a style="color: #b9b9b9;" href="https://github.com/" target="_blank">Github Pages</a>
          </span>
        </p>
      </div> -->
  
      
      <a style="color: #b9b9b9;" href="http://beian.miit.gov.cn/" target="_blank">	
        <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/logo/ICP.png" style="vertical-align: text-bottom; width: 17px;" />
        赣ICP备20000895号-1
      </a>
      <a href="https://icp.gov.moe" target="_blank"><img style="width:17px;margin-bottom: -2px;" src="https://icp.gov.moe/images/ico64.png">萌ICP备 </a><a href="https://icp.gov.moe/?keyword=20200895" target="_blank"> 20200895号</a>
      
      <span style="color: #666;padding-left: 20px;">
        <i class="fa fa-clock-o" aria-hidden="true"></i>
        <span id="time" align="center">载入时间中...</span>
        <script>
          var now = new Date(); 
          function createtime() { 
            var grt= new Date("08/08/2019 17:38:00");//在此处修改你的建站时间
            now.setTime(now.getTime()+250); 
            days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
            hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
            if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
            mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
            seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
            snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
            document.getElementById("time").innerHTML = "小站已经苟活 "+dnum+" 天 "+hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
         } 
         setInterval("createtime()",250);
        </script>
        <!-- <span style="color:#666;padding-left: 20px;"><i class="fa fa-eye" aria-hidden="true"></i>访问量: <span class="site_pv"></span>次</span> -->
        <span style="padding-left: 20px; color:#666;"><i class="fa fa-cog fa-spin" aria-hidden="true"></i></span>
        <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278079074'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1278079074%26online%3D2' type='text/javascript'%3E%3C/script%3E"));</script>
        
      </span>
      <div style="text-align:center; padding-top: 20px;">
        <div class="github-badge">
          <a rel="license" href="https://hexo.io/" target="_blank" title="由Hexo强力驱动">
          <span class="badge-subject"><i class="fa fa-fire" aria-hidden="true"></i> Powered</span><span class="badge-value bg-blue">Hexo</span></a>
        </div>
        <div class="github-badge">
          <a rel="license" href="https://github.io/" target="_blank" title="静态网页托管于Github">
          <span class="badge-subject">Hosted</span><span class="badge-value bg-brightgreen"><i class="fa fa-github" aria-hidden="true"></i> Github</span></a>
        </div>
        <div class="github-badge">
            <a rel="license" href="https://coding.net/" target="_blank" title="静态网页托管于CODING">
            <span class="badge-subject"><i class="fa fa-heart" aria-hidden="true"></i> Hosted</span>
            <span class="badge-value bg-gray">CODING</span></a>
          </div>
        <div class="github-badge">
            <a rel="license" href="https://www.jsdelivr.com/" target="_blank" title="jsDelivr提供CDN加速服务">
            <span class="badge-subject"><i class="fa fa-firefox fa-spin" aria-hidden="true"></i> CND</span><span class="badge-value bg-cdn">Github&jsDelivr</span></a>
        </div>
        <div class="github-badge">
            <a rel="license" href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank" title="站点使用 Sakura 主题，作者：Mashiro & Hojun">
            <span class="badge-subject"><i class="fa fa-themeisle" aria-hidden="true"></i> Theme</span><span class="badge-value bg-theme">3-blog</span></a>
        </div>
        <div class="github-badge">
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="本站点采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可">
            <span class="badge-subject"><i class="fa fa-copyright"></i></span><span class="badge-value bg-lightgrey">BY-NC-SA 4.0</span></a>
        </div>
        <div class="github-badge">
          <span class="badge-subject"><i class="fa fa-user" aria-hidden="true"></i> UV</span>
          <span  class="site_uv badge-value bg-orange""></span>
        </div>
        <div class="github-badge">
          <span class="badge-subject"><i class="fa fa-eye" aria-hidden="true"></i> PV</span>
          <span class="site_pv badge-value bg-brightgreen"></span>
        </div>
      </div>  
  
      <div class="site-img" style="margin-top:20px;">
        <a href="#"><img width="350px" src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/wechat/wallleap.png"></a>
        <!-- <a href="https://www.google.com/search?sxsrf=ACYBGNT2ZrasjGUBG6Nj1_Xye1N67lpsrA%3A1573382249794&source=hp&ei=aejHXey4LYHu-gSQlLqgDg&q=site%3Awallleap.cn&oq=site%3Awallleap.cn&gs_l=psy-ab.3...32142.36345..36698...0.0..4.1018.9243.3-5j2j5j3j1......0....1..gws-wiz.....10..35i362i39j35i39j0.9jvLRXQs6zM&ved=0ahUKEwiskd7Qud_lAhUBt54KHRCKDuQQ4dUDCAY&uact=5" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/Google.svg" width="100px" height="80px"></a>
        <a href="https://www.baidu.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/baidu.png" width="100px" height="80px"></a>
        <a href="https://www.jsdelivr.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/JsDelivr_Logo.svg" width="100px" height="80px"></a>
        <a href="https://github.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/github-logo.jpg" width="100px" height="80px"></a>
        <a href="https://aliyun.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/aliyun-logo.png" width="100px" height="80px"></a>
        <a href="https://dev.tencent.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/tencentyun-logo.jpg" width="100px" height="80px"></a>   -->
      </div>
      <!-- <div>
        <a href="https://hexo.io" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Powered-Hexo-blue" alt="Hexo"></a>
        <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Theme-3--hexo-%232c2735" alt="3-blog"></a>
        <a href="https://github.com/" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Hosted-GitHub-%2324292e" alt="GitHub"></a>
        <a href="https://coding.net/" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Hosted-CODING-%23141a3f" alt="CODING"></a>
        <a href="https://www.jsdelivr.com/" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/CDN-jsDelivr-%23ee3232" alt="jsDelivr"></a>
      </div> -->
    </div><!-- .site-info -->
  </div>
    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


<script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'photoSwipe';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        

        // PhotoSwipe
        $('article').each(function(i){
            $(this).find('img').each(function(){
                if ($(this).closest('figure').hasClass('article-gallery-img')) {
                    return;
                }
                var alt = this.alt;
                $(this)
                    .wrap('<figure class="article-gallery-img" itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject"></figure>')
                    .wrap('<a href="' + this.src + '" title="' + alt + '"></a>');
                $(this).after('<div class="img_alt"><span>' + (alt || '') + '</span></div>');
            });
        });

        var pswpElement = document.querySelectorAll('.pswp')[0];
        if (pswpElement) {
            var gallerySelector = '.article-gallery, article';

            var initPhotoSwipeFromDOM = function(gallerySelector) {

                // parse slide data (url, title, size ...) from DOM elements
                // (children of gallerySelector)
                var parseThumbnailElements = function(el) {
                    var thumbElements = $(el).find('figure.article-gallery-img').toArray(),
                        numNodes = thumbElements.length,
                        items = [],
                        figureEl,
                        linkEl,
                        size,
                        imgEl,
                        item;

                    for (var i = 0; i < numNodes; i++) {

                        figureEl = thumbElements[i]; // <figure> element

                        // include only element nodes
                        if (figureEl.nodeType !== 1) {
                            continue;
                        }

                        linkEl = figureEl.children[0]; // <a> element
                        imgEl = linkEl.children[0]; // <img>

                        size = linkEl.getAttribute('data-size');
                        size = size && size.split('x');

                        // create slide object
                        item = {
                            src: linkEl.getAttribute('href'),
                            w: size && parseInt(size[0], 10) || imgEl.width,
                            h: size && parseInt(size[1], 10) || imgEl.height
                        };

                        if (figureEl.children.length > 1) {
                            // <figcaption> content
                            item.title = figureEl.children[1].innerHTML;
                        }

                        if (linkEl.children.length > 0) {
                            // <img> thumbnail element, retrieving thumbnail url
                            item.msrc = linkEl.children[0].getAttribute('src');
                        }

                        item.el = figureEl; // save link to element for getThumbBoundsFn
                        items.push(item);
                    }

                    return items;
                };

                // find nearest parent element
                var closest = function closest(el, fn) {
                    return el && (fn(el) ? el : closest(el.parentNode, fn));
                };

                // triggers when user clicks on thumbnail
                var onThumbnailsClick = function(e) {
                    e = e || window.event;

                    var eTarget = e.target || e.srcElement;

                    // find root element of slide
                    var clickedListItem = closest(eTarget, function(el) {
                        return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                    });

                    if (!clickedListItem) {
                        return;
                    }

                    if (e.preventDefault) {
                        e.preventDefault();
                    } else {
                        e.returnValue = false;
                    }

                    // find index of clicked item by looping through all child nodes
                    // alternatively, you may define index via data- attribute
                    var clickedGallery = $(clickedListItem).closest(gallerySelector)[0],
                        childNodes = $(clickedGallery).find('figure.article-gallery-img').toArray(),
                        numChildNodes = childNodes.length,
                        nodeIndex = 0,
                        index;

                    for (var i = 0; i < numChildNodes; i++) {
                        if (childNodes[i].nodeType !== 1) {
                            continue;
                        }

                        if (childNodes[i] === clickedListItem) {
                            index = nodeIndex;
                            break;
                        }
                        nodeIndex++;
                    }



                    if (index >= 0) {
                        // open PhotoSwipe if valid index found
                        openPhotoSwipe(index, clickedGallery);
                    }
                    return false;
                };

                // parse picture index and gallery index from URL (#&pid=1&gid=2)
                var photoswipeParseHash = function() {
                    var hash = window.location.hash.substring(1),
                        params = {};

                    if (hash.length < 5) {
                        return params;
                    }

                    var vars = hash.split('&');
                    for (var i = 0; i < vars.length; i++) {
                        if (!vars[i]) {
                            continue;
                        }
                        var pair = vars[i].split('=');
                        if (pair.length < 2) {
                            continue;
                        }
                        params[pair[0]] = pair[1];
                    }

                    if (params.gid) {
                        params.gid = parseInt(params.gid, 10);
                    }

                    return params;
                };

                var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                    var pswpElement = document.querySelectorAll('.pswp')[0],
                        gallery,
                        options,
                        items;

                    items = parseThumbnailElements(galleryElement);

                    // define options (if needed)
                    options = {

                        // define gallery index (for URL)
                        galleryUID: galleryElement.getAttribute('data-pswp-uid'),

                        getThumbBoundsFn: function(index) {
                            // See Options -> getThumbBoundsFn section of documentation for more info
                            var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                                rect = thumbnail.getBoundingClientRect();

                            return {
                                x: rect.left,
                                y: rect.top + pageYScroll,
                                w: rect.width
                            };
                        }
                    };

                    // PhotoSwipe opened from URL
                    if (fromURL) {
                        if (options.galleryPIDs) {
                            // parse real index when custom PIDs are used
                            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url
                            for (var j = 0; j < items.length; j++) {
                                if (items[j].pid == index) {
                                    options.index = j;
                                    break;
                                }
                            }
                        } else {
                            // in URL indexes start from 1
                            options.index = parseInt(index, 10) - 1;
                        }
                    } else {
                        options.index = parseInt(index, 10);
                    }

                    // exit if index not found
                    if (isNaN(options.index)) {
                        return;
                    }

                    if (disableAnimation) {
                        options.showAnimationDuration = 0;
                    }

                    // Pass data to PhotoSwipe and initialize it
                    gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);

                    gallery.listen('imageLoadComplete', function(index, item) {
                        var linkEl = item.el.children[0];
                        var img = item.container.children[0];
                        if (!linkEl.getAttribute('data-size')) {
                            linkEl.setAttribute('data-size', img.naturalWidth + 'x' + img.naturalHeight);
                            item.w = img.naturalWidth;
                            item.h = img.naturalHeight;
                            gallery.invalidateCurrItems();
                            gallery.updateSize(true);
                        }
                    });

                    gallery.init();
                };

                // loop through all gallery elements and bind events
                var galleryElements = document.querySelectorAll(gallerySelector);

                for (var i = 0, l = galleryElements.length; i < l; i++) {
                    galleryElements[i].setAttribute('data-pswp-uid', i + 1);
                    galleryElements[i].onclick = onThumbnailsClick;
                }

                // Parse URL and open gallery if it contains #&pid=3&gid=1
                var hashData = photoswipeParseHash();
                if (hashData.pid && hashData.gid) {
                    openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);
                }
            };

            // execute above function
            initPhotoSwipeFromDOM(gallerySelector);
        }
        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    
    .nav-right nav a.hover > span{
        color: #03a788 !important;
    }
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element, as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. -->
        <!-- don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>








<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<div class="aplayer"

    data-id="2162711186"

    data-server="netease"

    data-type="playlist"

    data-fixed="true"

    data-autoplay="false"

    data-loop="all"

    data-order="random"

    data-preload="auto"

    data-volume="0.7"

    data-mutex="true"

>
</div>
<script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>

<script>
(function() {

  var arr = new Array();
  var $tags = $('.post-tags').children('a');
  $tags.each(function() {
    arr.push($(this).html())
  })
  if (arr.indexOf("图集") !== -1) {

    $('.hj_img').each(function() {
      $(this).wrap('<a class="fancybox" data-fancybox="gallery" href="' + $(this).prop("src") + '"></a>'); 
    })
    //初始化fancybox，padding设为0，loop设为false
    $('.fancybox').fancybox({
      padding: 0,
      loop: false
    });
  }
})();
</script>

<!-- // 文字 -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script>
<!-- // 爱心 -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/love.js"></script>
<!-- // 按键屏蔽 需要jQuery -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/noSomeKey.js"></script>

</html>
