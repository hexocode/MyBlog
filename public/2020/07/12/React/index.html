<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>React全家桶(技术栈)学习笔记 | wallleap</title>
  <meta name="keywords" content=" 前端 , 框架 , React ">
  <meta name="description" content="React全家桶(技术栈)学习笔记 | wallleap">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="念两句诗          叙别梦、扬州一觉。          【宋代】吴文英《夜游宫·人去西楼雁杳》       .images{ 	float: left;     width: 100%;     height: 300px;     position: relative;     margin: 20px 0">
<meta property="og:type" content="website">
<meta property="og:title" content="图集">
<meta property="og:url" content="https://wallleap.cn/photo/index.html">
<meta property="og:site_name" content="wallleap">
<meta property="og:description" content="念两句诗          叙别梦、扬州一觉。          【宋代】吴文英《夜游宫·人去西楼雁杳》       .images{ 	float: left;     width: 100%;     height: 300px;     position: relative;     margin: 20px 0">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268%3Bg%3D0/sign=46b93e4b7d1ed21b79c929e39555baf9/14ce36d3d539b600fbdea00ee950352ac65cb773.jpg">
<meta property="article:published_time" content="2020-02-23T07:09:21.000Z">
<meta property="article:modified_time" content="2020-03-24T14:15:05.640Z">
<meta property="article:author" content="Luwang">
<meta property="article:tag" content="wallleap">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268%3Bg%3D0/sign=46b93e4b7d1ed21b79c929e39555baf9/14ce36d3d539b600fbdea00ee950352ac65cb773.jpg">


<link rel="icon" href="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/favicon.ico">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/sublime.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css" rel="stylesheet">
<link href="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css" rel="stylesheet">

<script src="//cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/customize.css">
<link rel="stylesheet" href="/css/github-badge.css">

<link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/honjun/hexo-tag-emojis-byhj/css/emoji.css">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
	.pace .pace-progress {  background: rgb(251, 129, 30); /*进度条颜色*/
	height: 3px;  }
	.pace .pace-progress-inner {  box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
	}
	.pace .pace-activity {  border-top-color: rgb(251, 129, 30);    /*上边框颜色*/
	border-left-color: rgb(251, 129, 30);    /*左边框颜色*/
	}
</style>

  

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b19f0ec10bac681106907eb1ee978d34";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
    </script>
  <!-- site-verification -->
  <meta name="google-site-verification" content="ZT29P3khtw1qk30lwEOdMqAGXvN3HGllzjzbB5Wln4k" />
  <meta name="baidu-site-verification" content="AQqaOCFUn0" />
  <meta name="360-site-verification" content="e9f3f65ff40b09c81ba47287a55363cd" />
  <meta name="sogou_site_verification" content="jAPTO5JOth"/>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151908301-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-151908301-1');
  </script>
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="wallleap" type="application/atom+xml">
</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="false" />
</div>


<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/avatar.jpg" />
</a>
<div class="author">
    <span>Luwang</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/wallleap" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
        <a title="weibo" href="http://weibo.com/u/6023739034" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-weibo"></use>
                </svg>
            
        </a>
        
    
        
        <a title="jianshu" href="https://www.jianshu.com/u/9357dd145d53" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-jianshu"></use>
                </svg>
            
        </a>
        
    
        
        <a title="zhihu" href="https://www.zhihu.com/people/8afbefe61c28c0fafed189b234afc91d" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-zhihu"></use>
                </svg>
            
        </a>
        
    
        
        <a title="csdn" href="https://me.csdn.net/qq_36949103" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-csdn"></use>
                </svg>
            
        </a>
        
    
        
    
        
        <a title="email" href="mailto:15579576761@163.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=990083804&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
        <a title="kugou" href="https://www.kugou.com/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-kugou"></use>
                </svg>
            
        </a>
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=453867086" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active" data-rel="全部文章">全部文章<small>(53)</small></div></li>
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="博客"><i class="fold iconfont icon-right"></i>博客<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="博客<--->valine">valine<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="电脑"><i class="fold iconfont icon-right"></i>电脑<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="电脑<--->Win10">Win10<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="笔记"><i class="fold iconfont icon-right"></i>笔记<small>(28)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="笔记<--->后端">后端<small>(2)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->Hexo">Hexo<small>(8)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->Markdown">Markdown<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->五笔学习">五笔学习<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->前端">前端<small>(13)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->微信">微信<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->转载">转载<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="笔记<--->黑苹果">黑苹果<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="编程"><i class="fold iconfont icon-right"></i>编程<small>(2)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="编程<--->数据结构">数据结构<small>(2)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="网络"><i class="fold iconfont icon-right"></i>网络<small>(15)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="网络<--->HCNA">HCNA<small>(4)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="网络<--->华三">华三<small>(4)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="网络<--->基础">基础<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="资源"><i class="fold iconfont icon-right"></i>资源<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="资源<--->图集">图集<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
            <li><div data-rel="转载"><i class="fold iconfont icon-right"></i>转载<small>(2)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="转载<--->主题">主题<small>(2)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="阅读">阅读<small>(1)</small></div>
                
            </li>
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">关于</a><a style="width: 50%"  class="friends">友链</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="53">
<input type="hidden" id="yelog_site_word_count" value="274.5k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
            <li><a target="_blank" href="https://www.zh66.club">皮皮家园</a></li>
            
            <li><a target="_blank" href="https://jwmm.xyz/">喵喵喵~</a></li>
            
            <li><a target="_blank" href="https://evrstr.tk/">evrStr</a></li>
            
            <li><a target="_blank" href="https://leeyiding.com/">LeeYD</a></li>
            
            <li><a target="_blank" href="https://cndrew.cn/">Uncle_drew</a></li>
            
            <li><a target="_blank" href="https://yremp.live/">Yremp</a></li>
            
            <li><a target="_blank" href="https://immmmm.com/">木木木木木</a></li>
            
            <li><a target="_blank" href="https://you.ci/">有次博客</a></li>
            
            <li><a target="_blank" href="https://www.fezhu.top/">Uncleacc</a></li>
            
            <li><a target="_blank" href="https://nateshao.gitee.io/">千羽</a></li>
            
            <li><a target="_blank" href="https://chanshiyu.com/">蝉时雨</a></li>
            
            <li><a target="_blank" href="https://www.antmoe.com/">小康博客</a></li>
            
            <li><a target="_blank" href="https://www.lete114.top/">Lete乐特</a></li>
            
            <li><a target="_blank" href="/">等待收录中……</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ACL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ajax</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>AngularJS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Blog</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>C/C++</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>CSS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>eNsp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>eNSP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ES</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>GitHub</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hackintosh</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HCL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HCNA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hexo</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Hexo</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HTML</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JavaScript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jQuery</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Markdown</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>MongoDB</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NAT</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NodeJS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>OSPF</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>React</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>RIP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Sakura</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>STP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ubuntu</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>VLAN</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Vue</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>w650dc</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>web</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Win10</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>主题</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>五笔</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>交换机</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>企业网</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>前端</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>华三</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>博客</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>后端</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>图集</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>安装</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>实验</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>微信</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>微信防盗链</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>悦读</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>技术</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据结构</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>框架</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>模块化</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>考研</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>英语</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>逆水寒</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>配置</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>黑苹果</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a id="top" class="全部文章 笔记 黑苹果 "
           href="/2019/03/14/w650dc-hackintosh/"
           data-tag="w650dc,hackintosh,黑苹果"
           data-author="" >
            <span class="post-title" title="毁灭者DC W650DC装黑苹果心得">毁灭者DC W650DC装黑苹果心得</span>
            <span class="post-date" title="2019-03-14 21:27:46">2019/03/14</span>
        </a>
        
        <a id="top" class="全部文章 网络 "
           href="/2019/09/30/web-HCL9/"
           data-tag="eNSP,企业网"
           data-author="" >
            <span class="post-title" title="使用eNSP搭建企业网络">使用eNSP搭建企业网络</span>
            <span class="post-date" title="2019-09-30 07:58:17">2019/09/30</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/08/28/VUE/"
           data-tag="前端,web,JavaScript,Vue"
           data-author="" >
            <span class="post-title" title="Vue学习笔记">Vue学习笔记</span>
            <span class="post-date" title="2020-08-28 12:33:14">2020/08/28</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/08/20/AJAX/"
           data-tag="前端,web,Ajax"
           data-author="" >
            <span class="post-title" title="Ajax学习笔记">Ajax学习笔记</span>
            <span class="post-date" title="2020-08-20 12:33:14">2020/08/20</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/07/12/React/"
           data-tag="前端,框架,React"
           data-author="" >
            <span class="post-title" title="React全家桶(技术栈)学习笔记">React全家桶(技术栈)学习笔记</span>
            <span class="post-date" title="2020-07-12 16:54:50">2020/07/12</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/07/04/Git/"
           data-tag="前端,Git"
           data-author="" >
            <span class="post-title" title="Git学习笔记">Git学习笔记</span>
            <span class="post-date" title="2020-07-04 23:33:49">2020/07/04</span>
        </a>
        
        <a  class="全部文章 笔记 后端 "
           href="/2020/06/14/nodejs/"
           data-tag="后端,NodeJS"
           data-author="" >
            <span class="post-title" title="NodeJs学习笔记">NodeJs学习笔记</span>
            <span class="post-date" title="2020-06-14 11:33:49">2020/06/14</span>
        </a>
        
        <a  class="全部文章 笔记 后端 "
           href="/2020/06/14/MongoDB/"
           data-tag="后端,MongoDB"
           data-author="" >
            <span class="post-title" title="MongoDB学习笔记">MongoDB学习笔记</span>
            <span class="post-date" title="2020-06-14 11:22:00">2020/06/14</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/06/04/AngularJs/"
           data-tag="前端,AngularJS"
           data-author="" >
            <span class="post-title" title="AngularJs学习笔记">AngularJs学习笔记</span>
            <span class="post-date" title="2020-06-04 23:33:49">2020/06/04</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/06/04/ES/"
           data-tag="前端,ES,模块化"
           data-author="" >
            <span class="post-title" title="ES和模块化学习笔记">ES和模块化学习笔记</span>
            <span class="post-date" title="2020-06-04 23:33:49">2020/06/04</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/04/26/jQuery/"
           data-tag="前端,web,JavaScript,jQuery"
           data-author="" >
            <span class="post-title" title="jQuery学习笔记">jQuery学习笔记</span>
            <span class="post-date" title="2020-04-26 20:33:14">2020/04/26</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/04/15/JavaScriptAdvance/"
           data-tag="前端,web,JavaScript"
           data-author="" >
            <span class="post-title" title="JavaScript高级学习笔记">JavaScript高级学习笔记</span>
            <span class="post-date" title="2020-04-15 19:33:14">2020/04/15</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/04/05/JavaScriptBase/"
           data-tag="前端,web,JavaScript"
           data-author="" >
            <span class="post-title" title="JavaScript基础学习笔记">JavaScript基础学习笔记</span>
            <span class="post-date" title="2020-04-05 12:33:14">2020/04/05</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/03/30/css/"
           data-tag="前端,web,CSS"
           data-author="" >
            <span class="post-title" title="CSS学习笔记">CSS学习笔记</span>
            <span class="post-date" title="2020-03-30 12:33:14">2020/03/30</span>
        </a>
        
        <a  class="全部文章 博客 valine "
           href="/2020/03/30/hexoValine/"
           data-tag="hexo"
           data-author="" >
            <span class="post-title" title="valine评论系统使用">valine评论系统使用</span>
            <span class="post-date" title="2020-03-30 12:16:01">2020/03/30</span>
        </a>
        
        <a  class="全部文章 笔记 Markdown "
           href="/2020/03/29/markdown/"
           data-tag="Markdown"
           data-author="" >
            <span class="post-title" title="Markdown语法大全">Markdown语法大全</span>
            <span class="post-date" title="2020-03-29 22:23:57">2020/03/29</span>
        </a>
        
        <a  class="全部文章 笔记 微信 "
           href="/2020/03/27/wechatpaper/"
           data-tag="微信"
           data-author="" >
            <span class="post-title" title="使用Markdown Here对微信公众号文章进行排版">使用Markdown Here对微信公众号文章进行排版</span>
            <span class="post-date" title="2020-03-27 22:36:35">2020/03/27</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/03/27/html/"
           data-tag="前端,web,HTML"
           data-author="" >
            <span class="post-title" title="HTML学习笔记">HTML学习笔记</span>
            <span class="post-date" title="2020-03-27 17:33:14">2020/03/27</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/03/24/chrometwo/"
           data-tag="前端,web"
           data-author="" >
            <span class="post-title" title="怎样拥有两个独立的Chrome">怎样拥有两个独立的Chrome</span>
            <span class="post-date" title="2020-03-24 10:33:14">2020/03/24</span>
        </a>
        
        <a  class="全部文章 笔记 前端 "
           href="/2020/03/24/webBase/"
           data-tag="前端,web"
           data-author="" >
            <span class="post-title" title="web入门基础知识">web入门基础知识</span>
            <span class="post-date" title="2020-03-24 10:33:14">2020/03/24</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2020/03/08/theme-beautify/"
           data-tag="主题,Hexo,Blog,博客"
           data-author="" >
            <span class="post-title" title="Sakura美化">Sakura美化</span>
            <span class="post-date" title="2020-03-08 21:09:24">2020/03/08</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2020/03/08/hexo-themes/"
           data-tag="Hexo,Blog,博客,Sakura"
           data-author="" >
            <span class="post-title" title="hexo博客如何更换主题，并且进行常用的配置">hexo博客如何更换主题，并且进行常用的配置</span>
            <span class="post-date" title="2020-03-08 13:31:00">2020/03/08</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2020/03/07/wechat-pic/"
           data-tag="Hexo,Blog,博客,微信防盗链"
           data-author="" >
            <span class="post-title" title="微信公众号图片防盗链破解">微信公众号图片防盗链破解</span>
            <span class="post-date" title="2020-03-07 23:50:00">2020/03/07</span>
        </a>
        
        <a  class="全部文章 "
           href="/2020/03/07/mindmaptest/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="测试思维导图">测试思维导图</span>
            <span class="post-date" title="2020-03-07 20:15:12">2020/03/07</span>
        </a>
        
        <a  class="全部文章 网络 HCNA "
           href="/2020/03/07/hcna-vlan/"
           data-tag="HCNA,VLAN"
           data-author="" >
            <span class="post-title" title="HCNA学习——VLAN配置">HCNA学习——VLAN配置</span>
            <span class="post-date" title="2020-03-07 00:54:04">2020/03/07</span>
        </a>
        
        <a  class="全部文章 笔记 五笔学习 "
           href="/2020/03/04/wubi/"
           data-tag="五笔"
           data-author="" >
            <span class="post-title" title="五笔学习笔记">五笔学习笔记</span>
            <span class="post-date" title="2020-03-04 23:33:49">2020/03/04</span>
        </a>
        
        <a  class="全部文章 网络 HCNA "
           href="/2020/03/02/switchbase/"
           data-tag="HCNA,交换机"
           data-author="" >
            <span class="post-title" title="HCNA学习——交换机基础配置">HCNA学习——交换机基础配置</span>
            <span class="post-date" title="2020-03-02 23:19:15">2020/03/02</span>
        </a>
        
        <a  class="全部文章 网络 基础 "
           href="/2020/02/29/networkmodule/"
           data-tag="HCNA"
           data-author="" >
            <span class="post-title" title="两种主要的网络参考模型">两种主要的网络参考模型</span>
            <span class="post-date" title="2020-02-29 19:53:49">2020/02/29</span>
        </a>
        
        <a  class="全部文章 网络 HCNA "
           href="/2020/02/24/eNSP-use/"
           data-tag="HCNA,eNSP"
           data-author="" >
            <span class="post-title" title="eNSP使用">eNSP使用</span>
            <span class="post-date" title="2020-02-24 21:39:54">2020/02/24</span>
        </a>
        
        <a  class="全部文章 网络 HCNA "
           href="/2020/02/22/eNSP-install/"
           data-tag="HCNA,eNSP"
           data-author="" >
            <span class="post-title" title="安装华为模拟器eNSP">安装华为模拟器eNSP</span>
            <span class="post-date" title="2020-02-22 21:39:56">2020/02/22</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2020/02/08/hexo-blog/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="闲着也是闲着，不如搭个免费的博客玩玩">闲着也是闲着，不如搭个免费的博客玩玩</span>
            <span class="post-date" title="2020-02-08 21:34:47">2020/02/08</span>
        </a>
        
        <a  class="全部文章 转载 主题 "
           href="/2020/02/04/hexotheme/"
           data-tag="主题"
           data-author="" >
            <span class="post-title" title="都2020了，带你开发hexo主题">都2020了，带你开发hexo主题</span>
            <span class="post-date" title="2020-02-04 22:16:01">2020/02/04</span>
        </a>
        
        <a  class="全部文章 电脑 Win10 "
           href="/2019/11/07/WLU/"
           data-tag="Win10,Ubuntu"
           data-author="" >
            <span class="post-title" title="Win10启用其子系统Ubuntu并安装图形界面">Win10启用其子系统Ubuntu并安装图形界面</span>
            <span class="post-date" title="2019-11-07 10:21:17">2019/11/07</span>
        </a>
        
        <a  class="全部文章 笔记 转载 "
           href="/2019/10/31/English_ReadWay/"
           data-tag="考研,英语"
           data-author="" >
            <span class="post-title" title="唐迟阅读方法论">唐迟阅读方法论</span>
            <span class="post-date" title="2019-10-31 21:58:17">2019/10/31</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/27/web-HCL8/"
           data-tag="eNSP,ACL,NAT"
           data-author="" >
            <span class="post-title" title="ACL+NAT配置">ACL+NAT配置</span>
            <span class="post-date" title="2019-09-27 07:58:17">2019/09/27</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/27/web-HCL7/"
           data-tag="eNSP,OSPF"
           data-author="" >
            <span class="post-title" title="OSPF配置">OSPF配置</span>
            <span class="post-date" title="2019-09-27 07:58:04">2019/09/27</span>
        </a>
        
        <a  class="全部文章 资源 图集 "
           href="/2019/09/20/atlas1/"
           data-tag="逆水寒,图集"
           data-author="" >
            <span class="post-title" title="图集1-逆水寒">图集1-逆水寒</span>
            <span class="post-date" title="2019-09-20 20:15:12">2019/09/20</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/19/web-HCL6/"
           data-tag="eNsp,RIP"
           data-author="" >
            <span class="post-title" title="RIP配置">RIP配置</span>
            <span class="post-date" title="2019-09-19 16:13:56">2019/09/19</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/18/web-HCL4/"
           data-tag="HCL,华三"
           data-author="" >
            <span class="post-title" title="DHCP配置(续)--DHCP中继">DHCP配置(续)--DHCP中继</span>
            <span class="post-date" title="2019-09-18 16:14:16">2019/09/18</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2019/09/18/web-HCL5/"
           data-tag="eNsp,STP"
           data-author="" >
            <span class="post-title" title="STP及VRRP配置">STP及VRRP配置</span>
            <span class="post-date" title="2019-09-18 16:13:56">2019/09/18</span>
        </a>
        
        <a  class="全部文章 阅读 "
           href="/2019/09/15/book1/"
           data-tag="悦读"
           data-author="" >
            <span class="post-title" title="书单1--平凡的世界">书单1--平凡的世界</span>
            <span class="post-date" title="2019-09-15 19:32:39">2019/09/15</span>
        </a>
        
        <a  class="全部文章 网络 华三 "
           href="/2019/09/12/web-HCL3/"
           data-tag="HCL,华三,实验,配置"
           data-author="" >
            <span class="post-title" title="HCL配置(三)–-DHCP配置">HCL配置(三)–-DHCP配置</span>
            <span class="post-date" title="2019-09-12 15:42:43">2019/09/12</span>
        </a>
        
        <a  class="全部文章 网络 华三 "
           href="/2019/09/11/web-HCL2/"
           data-tag="HCL,华三,实验,配置"
           data-author="" >
            <span class="post-title" title="HCL配置(二)--VLAN间通信">HCL配置(二)--VLAN间通信</span>
            <span class="post-date" title="2019-09-11 18:06:05">2019/09/11</span>
        </a>
        
        <a  class="全部文章 网络 华三 "
           href="/2019/09/09/web-HCL1/"
           data-tag="HCL,华三,实验,配置"
           data-author="" >
            <span class="post-title" title="HCL配置(一)--ping通及Telnet">HCL配置(一)--ping通及Telnet</span>
            <span class="post-date" title="2019-09-09 21:54:19">2019/09/09</span>
        </a>
        
        <a  class="全部文章 网络 华三 "
           href="/2019/09/09/web-HCL0/"
           data-tag="HCL,华三,安装"
           data-author="" >
            <span class="post-title" title="HCL的安装和使用">HCL的安装和使用</span>
            <span class="post-date" title="2019-09-09 21:34:37">2019/09/09</span>
        </a>
        
        <a  class="全部文章 编程 数据结构 "
           href="/2019/08/28/DataStructure1/"
           data-tag="数据结构,C/C++,技术"
           data-author="" >
            <span class="post-title" title="数据结构(1)-绪论">数据结构(1)-绪论</span>
            <span class="post-date" title="2019-08-28 22:12:47">2019/08/28</span>
        </a>
        
        <a  class="全部文章 编程 数据结构 "
           href="/2019/08/25/DataStructure0/"
           data-tag="数据结构,C/C++"
           data-author="" >
            <span class="post-title" title="数据结构(0)--预备知识">数据结构(0)--预备知识</span>
            <span class="post-date" title="2019-08-25 10:18:51">2019/08/25</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2019/08/25/mac-blog4/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="Mac使用Hexo和GitHub搭建博客(4)--博客维护">Mac使用Hexo和GitHub搭建博客(4)--博客维护</span>
            <span class="post-date" title="2019-08-25 09:30:28">2019/08/25</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2019/08/25/mac-blog3/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="Mac使用Hexo和GitHub搭建博客(3)--发布文章">Mac使用Hexo和GitHub搭建博客(3)--发布文章</span>
            <span class="post-date" title="2019-08-25 08:46:41">2019/08/25</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2019/08/24/mac-blog2/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="Mac使用Hexo和GitHub搭建博客(2)--优化配置">Mac使用Hexo和GitHub搭建博客(2)--优化配置</span>
            <span class="post-date" title="2019-08-24 20:21:59">2019/08/24</span>
        </a>
        
        <a  class="全部文章 笔记 Hexo "
           href="/2019/08/24/mac-blog1/"
           data-tag="Hexo,GitHub,Blog,博客"
           data-author="" >
            <span class="post-title" title="Mac使用Hexo和GitHub搭建博客(1)--搭建博客">Mac使用Hexo和GitHub搭建博客(1)--搭建博客</span>
            <span class="post-date" title="2019-08-24 20:14:35">2019/08/24</span>
        </a>
        
        <a  class="全部文章 "
           href="/2019/08/08/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2019-08-08 19:32:39">2019/08/08</span>
        </a>
        
        <a  class="全部文章 转载 主题 "
           href="/2018/12/12/Hexo-Theme-Sakura/"
           data-tag="主题"
           data-author="" >
            <span class="post-title" title="Hexo-Theme-Sakura">Hexo-Theme-Sakura</span>
            <span class="post-date" title="2018-12-12 22:16:01">2018/12/12</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-React" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">React全家桶(技术栈)学习笔记</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="笔记">笔记</a> > 
            
            <a  data-rel="笔记&lt;---&gt;前端">前端</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color3">前端</a>
            
            <a class="color3">框架</a>
            
            <a class="color1">React</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2020-07-15 18:26:58'>2020-07-12 16:54</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:19.1k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">第1章 React入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">1.1 React的基本认识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.1.1 官网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.1.2 介绍描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.1.3 React的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.1.4 React高效的原因(区域、次数——更新界面效率提高)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">1.2 React的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.2.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.2.3 相关js库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.2.4 在页面中导入js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.2.5 编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.2.6 使用React开发者工具调试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">1.3 React JSX</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.3.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.3.2 虚拟DOM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.3.3 JSX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.3.4 渲染虚拟DOM(元素)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.3.5 建虚拟DOM的2种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.3.6 JSX练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">1.4 模块与组件和模块化与组件化的理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.4.1 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.4.2 组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.4.3 模块化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">1.4.4 组件化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">第2章 React面向组件编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">2.1 基本理解和使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.1.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.1.2 自定义组件(Component) :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.1.3 注意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.1.4 render()渲染组件标签的基本流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">2.2 组件三大属性1: state</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.2.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.2.2 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.2.3 编码操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.2.4 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">2.3 组件三大属性2: props</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.3.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.3.2 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.3.3 作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.3.4 编码操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.3.5 代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.3.6 面试题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">2.4 组件三大属性3: refs与事件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.4.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.4.2 组件的3大属性之二: refs属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.4.3 事件处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.4.4 强烈注意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.4.5 代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.4.6 区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">2.5 组件的组合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.5.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.5.2 功能界面的组件化编码流程(无比重要)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.5.3 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">2.6 收集表单数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.6.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.6.2 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.6.3 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">2.7 组件生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.7.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.7.2 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.7.3 生命周期流程图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.7.4 生命周期详述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.7.5 重要的勾子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.7.6 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">2.8 虚拟DOM与DOM Diff算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.8.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">2.8.2 基本原理图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">第3章 react应用(基于react脚手架)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">3.1 使用create-react-app创建react应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3.1.1 react脚手架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3.1.2 创建项目并启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3.1.3 react脚手架项目结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">3.2 demo: 评论管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3.2.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3.2.2 拆分组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3.2.3 实现静态组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">3.2.4 实现动态组件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">第4章 react ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">4.1 理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.1.1 前置说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.1.2 常用的ajax请求库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.1.3 效果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">4.2 axios</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.2.1 文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.2.2 相关API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">4.3 Fetch</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.3.1 文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.3.2 相关API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">4.4 demo: github users</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.4.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.4.2 拆分组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.4.3 编写静态组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">4.4.4 编写动态组件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">第5章 几个重要技术总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">5.1 组件间通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">5.1.1 方式一: 通过props传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">5.1.2 方式二: 使用消息订阅(subscribe)-发布(publish)机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">5.1.3 方式三: redux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">5.2 事件监听理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">5.2.1 原生DOM事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">5.2.2 自定义事件(消息机制)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">5.3 ES6常用新语法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">第6章 react-router4</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">6.1 相关理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.1.1 react-router的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.1.2 SPA的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.1.3 路由的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.1.4 前端路由的实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">6.2 react-router相关API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.2.1 组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.2.2 其它</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">6.3 基本路由使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.3.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.3.2 准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.3.3 路由组件: views&#x2F;about.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.3.4 路由组件: views&#x2F;home.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.3.5 包装NavLink组件: components&#x2F;my-nav-link.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.3.6 应用组件: components&#x2F;app.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.3.7 自定义样式: index.css</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.3.8 入口JS: index.js</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">6.4 嵌套路由使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.4.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.4.2 二级路由组件: views&#x2F;news.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.4.3 二级路由组件: views&#x2F;message.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.4.4 一级路由组件: views&#x2F;home.jsx</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">6.5 向路由组件传递参数数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.5.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.5.2 三级路由组件: views&#x2F;message-detail.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.5.3 二级路由组件: views&#x2F;message.jsx</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">6.6 多种路由跳转方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.6.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">6.6.2 二级路由: views&#x2F;message.jsx</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">第7章 react-ui</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">7.1 最流行的开源React UI组件库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">7.1.1 material-ui(国外)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">7.1.2 ant-design(国内蚂蚁金服)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">7.2 ant-design-mobile使用入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">7.2.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">7.2.2 使用create-react-app创建react应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">7.2.3 搭建antd-mobile的基本开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">7.2.4 实现按需打包(组件js&#x2F;css)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">第8章 redux</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">8.1 redux理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.1.1 学习文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.1.2 redux是什么?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.1.3 redux工作流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.1.4 什么情况下需要使用redux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">8.2 redux的核心API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.2.1 createStore()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.2.2 store对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.2.3 applyMiddleware()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.2.4 combineReducers()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">8.3 redux的三个核心概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.3.1 action</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.3.2 reducer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.3.3 store</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">8.4 使用redux编写应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.4.1 效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.4.2 下载依赖包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.4.3 src&#x2F;redux&#x2F;action-types.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.4.4 src&#x2F;redux&#x2F;actions.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.4.5 src&#x2F;redux&#x2F;reducers.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.4.6 src&#x2F;components&#x2F;app.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.4.7 src&#x2F;index.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.4.8 问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">8.5 react-redux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.5.1 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.5.2 React-Redux将所有组件分成两大类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.5.3 相关API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.5.4 使用react-redux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.5.5 问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">8.6 redux异步编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.6.1 下载redux插件(异步中间件)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.6.2 redux&#x2F;store.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.6.3 index.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.6.4 redux&#x2F;actions.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.6.5 components&#x2F;counter.jsx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.6.6 containers&#x2F;app.jsx</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">8.7 使用上redux调试工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.7.1 安装chrome浏览器插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.7.2 下载工具依赖包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.7.3 编码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">8.8 Redux版评论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.8.1 需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.8.2 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.8.3 目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.8.4 文件内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#null"><span class="toc-text">8.9 相关重要知识: 纯函数和高阶函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.9.1 纯函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-text">8.9.2 高阶函数</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-4 i,
    .toc-level-4 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1><span id="第1章-react入门">第1章 React入门</span></h1><h2><span id="11-react的基本认识">1.1 React的基本认识</span></h2><h3><span id="111-官网">1.1.1 官网</span></h3><p>1)     英文官网:<a href="https://reactjs.org/" target="_blank" rel="noopener"> https://reactjs.org/</a></p>
<p>2)     中文官网: <a href="https://doc.react-china.org/" target="_blank" rel="noopener">https://doc.react-china.org/</a></p>
<h3><span id="112-介绍描述">1.1.2 介绍描述</span></h3><p>1)     用于构建用户界面的 JavaScript 库(只关注于View)</p>
<ul>
<li>JS库：<ul>
<li>jQuery——函数库(方法、函数包装DOM操作)</li>
<li>React 基本上不操作DOM——JS框架</li>
</ul>
</li>
<li>构建用户界面：把数据展现出来</li>
</ul>
<p>2)     由<strong>Facebook</strong>开源</p>
<h3><span id="113-react的特点">1.1.3 React的特点</span></h3><p>1)     Declarative(声明式编码)</p>
<p>（申请一块内存，只需要声明一个变量即可）不需要亲自操作DOM，只需要告诉它，我要更新，就会帮你更新，只需要更新数据，界面不需要手动更新（以前需要更新DOM）</p>
<p>2)     Component-Based(组件化编码)</p>
<p>简化特别复杂的功能，可以拆分为多个简单的部分（一个小的界面功能就是一个组件），维护也方便</p>
<p>3)     Learn Once, Write Anywhere(支持客户端与服务器渲染)</p>
<p>一次学习，随处编写：不仅能写web应用，还能写React Native打包为Android、IOS应用</p>
<p>4)     高效</p>
<p>5)     单向数据流</p>
<h3><span id="114-react高效的原因区域-次数更新界面效率提高">1.1.4 React高效的原因(区域、次数——更新界面效率提高)</span></h3><p>1)     <strong>虚拟(virtual)DOM</strong>,，不总是直接操作DOM</p>
<ul>
<li>虚拟DOM：对象——与组件对应，修改映射到真实的DOM上(批量修改、界面重绘<strong>次数少</strong>)</li>
</ul>
<p>2)     <strong>DOM Diff算法</strong>,，最小化页面重绘</p>
<ul>
<li>界面中组件是否更新(更新<strong>区域小</strong>)</li>
</ul>
<h2><span id="12-react的基本使用">1.2 React的基本使用</span></h2><p>注意: 此时只是测试语法使用, 并不是真实项目开发使用</p>
<h3><span id="121-效果">1.2.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592556203130.png" alt="React基本使用"></p>
<p>将h1标签利用react放到test中</p>
<h3><span id="123-相关js库">1.2.3 相关js库</span></h3><p>可以到bootcdn引用地址，访问链接<kbd>Ctrl</kbd>+<kbd>S</kbd>保存到本地</p>
<p>1)     <code>react.js</code>: React的核心库</p>
<ul>
<li>development.js：开发版，开发编写的时候使用</li>
<li>production.min.js：生产版，上线的时候使用，压缩过的</li>
</ul>
<p>2)     <code>react-dom.js</code>: 提供操作DOM的react扩展库</p>
<p>3)     <code>babel.min.js</code>: 解析JSX语法代码转为纯JS语法代码的库,这里不是ES6转ES5(jsx是js扩展语法)</p>
<h3><span id="124-在页面中导入js">1.2.4 在页面中导入js</span></h3><pre><code class="html">&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;</code></pre>
<h3><span id="125-编码">1.2.5 编码</span></h3><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;01_HelloWorld&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;test&quot;&gt;&lt;/div&gt;

  &lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/babel&quot;&gt;/*告诉babel.js解析里面的jsx的代码*/
    // 1. 创建虚拟DOM元素对象
    var vDom = &lt;h1&gt;Hello React!&lt;/h1&gt;   // jsx，不是字符串，不能加引号
    // 2. 将虚拟DOM渲染到页面真实DOM容器中
    ReactDOM.render(vDom, document.getElementById(&#39;test&#39;))  // react-dom.js提供的  render——渲染   将vDom加入到#test中
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3><span id="126-使用react开发者工具调试">1.2.6 使用React开发者工具调试</span></h3><p>​          <img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react2.gif" alt="React开发调试插件">  </p>
<p>React Developer Tool.crx</p>
<h2><span id="13-react-jsx">1.3 React JSX</span></h2><h3><span id="131-效果">1.3.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592556978982.png" alt="ReactJSX"></p>
<p>两个#test分别加入相应内容</p>
<p>代码：</p>
<pre><code class="html">&lt;div id=&quot;test1&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;test2&quot;&gt;&lt;/div&gt;

&lt;script src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt; // 还没用到jsx语法，不需要babel
  const msg = &#39;I Like You!&#39;
  const myId = &#39;Atguigu&#39;

  // 1.创建虚拟DOM
  // var element = React.createElement(&#39;h1&#39;, {id:&#39;myTitle&#39;},&#39;hello&#39;)
  const vDom1 = React.createElement(&#39;h2&#39;, {id:myId.toLowerCase()},msg.toUpperCase())
  // 2.渲染虚拟DOM
  ReactDOM.render(vDom1, document.getElementById(&#39;test1&#39;))
&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  // 1.创建虚拟DOM
  const vDom2 = &lt;h3 id={myId.toUpperCase()}&gt;{msg.toLowerCase()}&lt;/h3&gt;  // 变量用{}括起来
  // 2.渲染虚拟DOM
  ReactDOM.render(vDom2, document.getElementById(&#39;test2&#39;))
&lt;/script&gt;</code></pre>
<h3><span id="132-虚拟dom">1.3.2 虚拟DOM</span></h3><p>1)     React提供了一些API来创建一种 <strong>特别</strong> 的一般js对象</p>
<p>a.     <code>var element = React.createElement(&#39;h1&#39;, {id:&#39;myTitle&#39;},&#39;hello&#39;)</code></p>
<p>b.     上面创建的就是一个简单的虚拟DOM对象，babel将会把jsx语法转为上述的形式</p>
<p>2)     虚拟DOM对象最终都会被React<strong>转换为</strong>真实的DOM（虚拟DOM中的对应真实DOM中的标签元素）</p>
<p>3)     我们编码时基本只需要操作react的虚拟DOM相关数据, react会转换为真实DOM变化而更新界面</p>
<p>补充知识：<code>debugger</code>可以在某条js代码处添加断点</p>
<p>虚拟DOM——轻对象，更新虚拟DOM页面不重绘</p>
<p>真实DOM——重对象，更新真实DOM页面会发生变化（页面重绘）</p>
<h3><span id="133-jsx">1.3.3 JSX</span></h3><p>1)     全称: JavaScript XML</p>
<p>2)     react定义的一种类似于XML的<strong>JS扩展语法</strong>: XML+JS</p>
<p>3)     作用: 用来创建react虚拟DOM(元素)对象</p>
<ul>
<li><p><code>var ele = &lt;h1&gt;Hello JSX!&lt;/h1&gt;</code></p>
</li>
<li><p>注意1: 它不是字符串, 也不是HTML/XML标签</p>
</li>
<li><p>注意2: 它最终产生的就是一个JS对象</p>
</li>
</ul>
<p>4)     <strong>标签名任意</strong>: HTML标签或其它标签</p>
<p>5)     标签属性任意: HTML标签属性或其它</p>
<p>6)     基本语法规则</p>
<ul>
<li><p><strong>遇到 &lt;开头</strong>的代码, 以<strong>标签</strong>的语法解析: html同名标签转换为html同名元素, 其它标签需要特别解析</p>
</li>
<li><p><strong>遇到以 { 开头</strong>的代码，以<strong>JS语法</strong>解析: 标签中的js代码必须用{ }包含</p>
</li>
</ul>
<p>7)     babel.js的作用</p>
<ul>
<li><p>浏览器不能直接解析JSX代码, 需要<strong>babel转译为纯JS的代码</strong>才能运行</p>
</li>
<li><p>只要用了JSX，都要加上<code>type=&quot;text/babel&quot;</code>, 声明需要babel来处理</p>
</li>
</ul>
<h3><span id="134-渲染虚拟dom元素">1.3.4 渲染虚拟DOM(元素)</span></h3><p>1)     语法: <code>ReactDOM.render(virtualDOM, containerDOM)</code></p>
<p>2)     作用: 将虚拟DOM元素渲染到页面中的真实容器DOM中显示</p>
<p>3)     参数说明</p>
<ul>
<li><p>参数一: 纯js或jsx创建的虚拟dom对象</p>
</li>
<li><p>参数二: 用来包含虚拟DOM元素的真实dom元素对象(一般是一个div)</p>
</li>
</ul>
<h3><span id="135-建虚拟dom的2种方式">1.3.5 建虚拟DOM的2种方式</span></h3><p>1)     纯JS(一般不用)</p>
<p><code>React.createElement(&#39;h1&#39;, {id:&#39;myTitle&#39;}, title)</code></p>
<p>2)     <strong>JSX</strong>:</p>
<p><code>&lt;h1 id=&#39;myTitle&#39;&gt;{title}&lt;/h1&gt;</code></p>
<h3><span id="136-jsx练习">1.3.6 JSX练习</span></h3><p>需求: 动态展示列表数据</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592558986188.png" alt="JSX"></p>
<p>代码：</p>
<pre><code class="html">&lt;h2&gt;前端JS框架列表&lt;/h2&gt;
&lt;div id=&quot;example1&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  /*
    功能: 动态展示列表数据
    - 如何将一个数据的数组，转换为一个标签的数组
      使用数组的map()方法
  */
  // 数据：名称、类型，数组存放
  const names = [&#39;jQuery&#39;, &#39;zepto&#39;, &#39;angular&#39;, &#39;react&#39;, &#39;vue&#39;]
  // 1.创建虚拟DOM，有嵌套结构，最好用小括号括起来
  const ul = (
    &lt;ul&gt;
      {
        names.map((name, index) =&gt; &lt;li key={index}&gt;{name}&lt;/li&gt;)
      }
    &lt;/ul&gt;
  )
  // 2.渲染虚拟DOM
  ReactDOM.render(ul, document.getElementById(&#39;example1&#39;))
&lt;/script&gt;</code></pre>
<h2><span id="14-模块与组件和模块化与组件化的理解">1.4 模块与组件和模块化与组件化的理解</span></h2><h3><span id="141-模块">1.4.1 模块</span></h3><p>1)     理解: 向外<strong>提供特定功能的</strong>js程序, 一般就是一个<strong>js文件</strong></p>
<p>2)     为什么: js代码更多更复杂</p>
<p>3)     作用: 复用js, 简化js的编写, 提高js运行效率</p>
<p>有特定功能的js文件，内部有数据及对数据的操作</p>
<ul>
<li><p>数据：变量</p>
</li>
<li><p>操作：函数</p>
</li>
</ul>
<p>私有的函数向外暴露</p>
<ul>
<li>暴露一个函数：暴露函数本身</li>
<li>暴露多个函数：以对象形式暴露</li>
</ul>
<h3><span id="142-组件">1.4.2 组件</span></h3><p>1)     理解: 用来<strong>实现特定(局部)功能效果</strong>的<strong>代码</strong>集合(html/css/js)</p>
<p>2)     为什么: 一个界面的功能更复杂</p>
<p>3)     作用: 复用编码, 简化项目编码, 提高运行效率</p>
<h3><span id="143-模块化">1.4.3 模块化</span></h3><p>当应用的<strong>js都以模块来编写</strong>的, 这个应用就是一个模块化的应用</p>
<p>形容项目或编码</p>
<h3><span id="144-组件化">1.4.4 组件化</span></h3><p>当应用是以多组件的方式实现, 这个应用就是一个组件化的应用</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592560823655.png" alt="component"></p>
<h1><span id="第2章-react面向组件编程">第2章 React面向组件编程</span></h1><p>面向对象——面向模块——面向组件</p>
<h2><span id="21-基本理解和使用">2.1 基本理解和使用</span></h2><h3><span id="211-效果">2.1.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react1592561100045.png" alt="组件"></p>
<p>组件标签：可以随便取的标签，首字母大写，与HTML标签区分开</p>
<h3><span id="212-自定义组件component">2.1.2 自定义组件(Component) :</span></h3><p>1)     定义组件(2种方式)</p>
<p>  方式1: <strong>工厂函数组件(简单组件：没有状态的组件)</strong>——效率高，不需要创建对象</p>
<pre><code>function MyComponent(){
    return &lt;h2&gt;工厂函数组件(简单组件)&lt;/h2&gt;
}</code></pre><p>方式2: <strong>ES6类组件(复杂组件)</strong>——需要创建对象，有了状态只能使用这种方式</p>
<pre><code class="javascript">class MyComponent2 extends React.Component{
  render(){
    console.log(this)  // 组件类对象 MyComponent2{...}
    return &lt;h2&gt;ES6类组件(复杂组件)&lt;/h2&gt;
  }
}</code></pre>
<p>2)     渲染组件标签</p>
<pre><code class="JavaScript">ReactDOM.render(&lt;MyComponent  /&gt;, document.getElementById(&#39;example1&#39;))
ReactDOM.render(&lt;MyComponent2  /&gt;, document.getElementById(&#39;example2&#39;))</code></pre>
<h3><span id="213-注意">2.1.3 注意</span></h3><p>1)     组件名必须首字母大写</p>
<p>2)     虚拟DOM元素只能有一个根元素</p>
<p>3)     虚拟DOM元素必须有结束标签</p>
<h3><span id="214-render渲染组件标签的基本流程">2.1.4 render()渲染组件标签的基本流程</span></h3><p>1)     React内部会创建组件实例对象</p>
<p>2)     得到包含的虚拟DOM并解析为真实DOM</p>
<p>3)     插入到指定的页面元素内部</p>
<h2><span id="22-组件三大属性1-state">2.2 组件三大属性1: state</span></h2><h3><span id="221-效果">2.2.1 效果</span></h3><p> <img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/Like%E7%BB%84%E4%BB%B6.gif" alt="state"></p>
<h3><span id="222-理解">2.2.2 理解</span></h3><p>1)     state是组件对象最重要的属性, 值是对象(可以包含多个数据)</p>
<p>2)     组件被称为”状态机”, 通过更新组件的state来更新对应的页面显示(重新渲染组件)</p>
<h3><span id="223-编码操作">2.2.3 编码操作</span></h3><p>1)     初始化状态:</p>
<pre><code class="javascript">constructor (props) {
  super(props)
  this.state = {
   stateProp1 : value1,
   stateProp2 : value2
  }
}</code></pre>
<p>2)     读取某个状态值</p>
<pre><code class="javascript">this.state.statePropertyName</code></pre>
<p>3)     更新状态—-&gt;组件界面更新</p>
<pre><code class="javascript">this.setState({
  stateProp1 : value1,
  stateProp2 : value2
})</code></pre>
<h3><span id="224-代码">2.2.4 代码</span></h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求: 自定义组件, 功能说明如下
    1. 显示h2标题, 初始文本为: 你喜欢我
    2. 点击标题更新为: 我喜欢你
  */
  // 1.定义组件
  class Like extends React.Component {
    constructor(props){
      super(props)
      // 初始化状态
      this.state = {
        isLikeMe: false
      }

      // 将新增方法中的this强制绑定为组件对象
      this.handleClick = this.handleClick.bind(this) // 也可以不在这里绑定
    }

    handleClick(){
      // console.log(this) // handleClick是新添加方法，内部this默认不是组件对象，而是undefined  render是重写组件类的方法 到上面或下面绑定this
      // 得到状态，并取反
      const isLikeMe = !this.state.isLikeMe
      // 更新状态
      this.setState({isLikeMe}) // isLikeMe: isLikeMe
    }
    render() {
      // 读取状态
      // const isLikeMe = this.state.isLikeMe
      const {isLikeMe} = this.state // 解构赋值
      return &lt;h2 onClick={this.handleClick}&gt;{isLikeMe?&#39;你喜欢我&#39;:&#39;我喜欢你&#39;}&lt;/h2&gt; // this——组件对象 // this.handleClick.bind(this) —— 在这里绑定也可以
    }
  }
  // 2.渲染组件标签
  ReactDOM.render(&lt;Like /&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h2><span id="23-组件三大属性2-props">2.3 组件三大属性2: props</span></h2><h3><span id="231-效果">2.3.1 效果</span></h3><pre><code>需求: 自定义用来显示一个人员信息的组件
  1). 姓名必须指定
  2). 如果性别没有指定, 默认为男
  3). 如果年龄没有指定, 默认为18</code></pre><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-4.png" alt="props"></p>
<h3><span id="232-理解">2.3.2 理解</span></h3><p>1)     每个组件对象都会有props(properties的简写)属性</p>
<p>2)     组件标签的所有属性都保存在props中</p>
<h3><span id="233-作用">2.3.3 作用</span></h3><p>1)     通过标签属性从组件外向组件内传递变化的数据</p>
<p>2)     注意: 组件内部不要修改props数据</p>
<h3><span id="234-编码操作">2.3.4 编码操作</span></h3><p>1)     内部读取某个属性值</p>
<p><code>this.props.propertyName</code></p>
<p>2)     对props中的属性值进行类型限制和必要性限制</p>
<blockquote>
<p>注意：</p>
<p>自 React v15.5 起，<code>React.PropTypes</code> 已移入另一个包中。请使用 <a href="https://www.npmjs.com/package/prop-types" target="_blank" rel="noopener"><code>prop-types</code> 库</a> 代替。需要先引入该库。</p>
<p>我们提供了一个 <a href="https://react.docschina.org/blog/2017/04/07/react-v15.5.0.html#migrating-from-reactproptypes" target="_blank" rel="noopener">codemod 脚本</a>来做自动转换。</p>
</blockquote>
<pre><code class="javascript">Person.propTypes = {
    name: React.PropTypes.string.isRequired,
    age: React.PropTypes.number.isRequired
}</code></pre>
<p>3)     扩展属性: 将对象的所有属性通过props传递</p>
<p><code>&lt;Person {...person}/&gt;</code></p>
<p>4)     默认属性值</p>
<pre><code class="javascript">Person.defaultProps = {
    name: &#39;Mary&#39;
}</code></pre>
<p>5)     组件类的构造函数</p>
<pre><code class="javascript">constructor (props) {
    super(props)
    console.log(props) // 查看所有属性

}</code></pre>
<h3><span id="235-代码">2.3.5 代码</span></h3><pre><code class="html">&lt;div id=&quot;example1&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;example2&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/prop-types.js&quot;&gt;&lt;/script&gt; &lt;!-- 验证类型和必要性 --&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;

  /*
需求: 自定义用来显示一个人员信息的组件, 效果如页面. 说明
  1). 如果性别没有指定, 默认为男
  2). 如果年龄没有指定, 默认为18
  */

  // 1、定义组件
  /*function Person(props){
    return (
      &lt;ul&gt;
        &lt;li&gt;姓名：{props.name}&lt;/li&gt;
        &lt;li&gt;性别：{props.sex}&lt;/li&gt;
        &lt;li&gt;年龄：{props.age}&lt;/li&gt;
      &lt;/ul&gt;
    )
  }*/
  class Person extends React.Component{
    render(){
      return (
        &lt;ul&gt;
          &lt;li&gt;姓名：{this.props.name}&lt;/li&gt;  // this——组件对象
          &lt;li&gt;性别：{this.props.sex}&lt;/li&gt;
          &lt;li&gt;年龄：{this.props.age}&lt;/li&gt;
        &lt;/ul&gt;
      )
    }
  }
  // 指定属性默认值
  Person.defaultProps = {
    sex: &#39;男&#39;,
    age: 18
  }
  // 指定属性值的类型和必要性
  Person.propTypes = {
    name: PropTypes.string.isRequired,
    age: PropTypes.number
  }

  // 2、渲染组件标签
  const p1 = {
    name: &#39;Tom&#39;,
    sex: &#39;女&#39;,
    age: 18
  }
  // ReactDOM.render(&lt;Person name={p1.name} sex={p1.sex} age={p1.age}/&gt;, document.getElementById(&#39;example1&#39;))
  ReactDOM.render(&lt;Person {...p1}/&gt;, document.getElementById(&#39;example1&#39;)) // ...作用：1.打包：function fn(...as){} fun(1,2,3) 2.解包：const arr1=[1,2,3] const arr2=[6,...arr1,9] 这里也是在解包
  const p2 = {
    name: &#39;JACK&#39;,
    age: 17
  }
  ReactDOM.render(&lt;Person name={p2.name} age={p2.age}/&gt;, document.getElementById(&#39;example2&#39;))
&lt;/script&gt;</code></pre>
<h3><span id="236-面试题">2.3.6 面试题</span></h3><p>问题: 请区别一下组件的props和state属性</p>
<p>1)     state: <strong>组件自身内部可变化的数据</strong></p>
<p><em>2)</em>    props: 从组件外部向组件内部<strong>传递数据</strong>，组件内部只读不修改</p>
<h2><span id="24-组件三大属性3-refs与事件处理">2.4 组件三大属性3: refs与事件处理</span></h2><h3><span id="241-效果">2.4.1 效果</span></h3><p>需求: 自定义组件, 功能说明如下:</p>
<ol start="2">
<li>点击按钮, 提示第一个输入框中的值</li>
<li>当第2个输入框失去焦点时, 提示这个输入框中的值</li>
</ol>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/props_event.gif" alt="props_event"></p>
<h3><span id="242-组件的3大属性之二-refs属性">2.4.2 组件的3大属性之二: refs属性</span></h3><p>1)     组件内的标签都可以定义ref属性来标识自己</p>
<p>a.     &lt;input type=”text” ref={input =&gt; this.msgInput = input}/&gt;</p>
<p>b.     回调函数在组件初始化渲染完或卸载时自动调用</p>
<p>2)     在组件中可以通过this.msgInput来得到对应的真实DOM元素</p>
<p>3)     作用: 通过ref获取组件内容特定标签对象, 进行读取其相关数据</p>
<h3><span id="243-事件处理">2.4.3 事件处理</span></h3><p>1)     通过onXxx属性指定组件的事件处理函数(注意大小写)</p>
<p>a.     React使用的是自定义(合成)事件, 而不是使用的原生DOM事件</p>
<p>b.     React中的事件是通过事件委托方式处理的(委托给组件最外层的元素)</p>
<p>2)     通过event.target得到发生事件的DOM元素对象</p>
<pre><code>handleFocus(event) {
 event.target // 返回input对象
}</code></pre><h3><span id="244-强烈注意">2.4.4 强烈注意</span></h3><p>1)     组件内置的方法中的this为组件对象</p>
<p>2)     在组件类中自定义的方法中this为null</p>
<p>a.     强制绑定this: 通过函数对象的bind()</p>
<p>b.     箭头函数(ES6模块化编码时才能使用)</p>
<h3><span id="245-代码">2.4.5 代码</span></h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求: 自定义组件, 功能说明如下:
    1. 界面如果页面所示
    2. 点击按钮, 提示第一个输入框中的值
    3. 当第2个输入框失去焦点时, 提示这个输入框中的值
 */
  // 1、定义组件 // React中必须要结束标签
  class MyComponent extends React.Component{

    constructor(props){
      super(props)
      this.showInput = this.showInput.bind(this)
      this.handleBlur = this.handleBlur.bind(this)
    }

    showInput(){
      const input = this.refs.content
      // alert(input.value)
      alert(this.input.value)
    }

    handleBlur(event){
      alert(event.target.value)
    }

    render(){
      return(
        &lt;div&gt;
          &lt;input type=&quot;text&quot; ref=&quot;content&quot;/&gt;&amp;nbsp;&amp;nbsp;
          &lt;input type=&quot;text&quot; ref={input =&gt; this.input = input}/&gt;&amp;nbsp;&amp;nbsp;
          &lt;button onClick={this.showInput}&gt;提示输入&lt;/button&gt;&amp;nbsp;&amp;nbsp;
          &lt;input type=&quot;text&quot; placeholder=&quot;失去焦点提示内容&quot; onBlur={this.handleBlur}/&gt;
        &lt;/div&gt;
      )
    }
  }

  // 2、渲染组件标签
  ReactDOM.render(&lt;MyComponent/&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h3><span id="246-区别">2.4.6 区别</span></h3><ol>
<li>state</li>
<li>props</li>
<li>refs</li>
</ol>
<h2><span id="25-组件的组合">2.5 组件的组合</span></h2><h3><span id="251-效果">2.5.1 效果</span></h3><pre><code>功能: 组件化实现此功能
  1. 显示所有todo列表
  2. 输入文本, 点击按钮显示到列表的首位, 并清除输入的文本</code></pre><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/component%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8.gif" alt="component组合使用"></p>
<h3><span id="252-功能界面的组件化编码流程无比重要">2.5.2 功能界面的组件化编码流程(无比重要)</span></h3><p>1)     拆分组件: 拆分界面,抽取组件</p>
<p>2)     实现静态组件: 使用组件实现静态页面效果(只有静态界面，没有动态数据和交互)</p>
<p>3)     实现动态组件</p>
<ul>
<li><p>实现初始化数据动态显示</p>
</li>
<li><p>实现交互功能(从绑定事件监听开始)</p>
</li>
</ul>
<h3><span id="253-代码">2.5.3 代码</span></h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/prop-types.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
  // 静态组件——&gt;动态组件
  /*
  * -名称、类型：todos、数组，Add需要、List需要
  * -数据保存在哪个组件内？
  *   放到App
  *   看数据是某个组件需要(给这个)，还是某些组件需要(给共同的父组件)
  * -需要在子组件中改变父组件的状态
  *    子组件中不能直接改变父组件的状态
  *    状态在哪个组件，更新状态的行为就应该定义在哪个组件，由子组件来调用(通过组件属性传递)
  *    父组件定义函数，传递给子组件，子组件调用
  */
  class App extends React.Component{

    constructor(props){
      super(props)
      // 初始化状态
      this.state = {
        todos: [&#39;吃饭&#39;, &#39;睡觉&#39;, &#39;敲代码&#39;, &#39;打游戏&#39;]
      }

      this.addTodo = this.addTodo.bind(this)  // 没定义加上bind
    }

    addTodo(todo){
      // this.state.todos.unshift(todo) // 不能这样做
      const {todos} = this.state
      todos.unshift(todo)
      // 更新状态
      this.setState({todos})
    }

    render(){
      const {todos} = this.state
      return(
        &lt;div&gt;
          &lt;h1&gt;Simple TODO List&lt;/h1&gt;
          &lt;Add count={todos.length} addTodo={this.addTodo}/&gt;
          &lt;List todos={todos}/&gt;
        &lt;/div&gt;
      )
    //  &lt;List todos={this.state.todos}/&gt; 前面赋值了
    }
  }

  class Add extends React.Component{
    constructor(props){
      super(props)
      this.add = this.add.bind(this)
    }
    add(){
      // 1、读取输入的数据
      const todo = this.todoInput.value.trim()
      // 2、检查合法性
      if(!todo){
        return
      }
      // 3、添加
      this.props.addTodo(todo)
      // 4、清除输入
      this.todoInput.value = &#39;&#39;
    }
    render(){
      return(
        &lt;div&gt;
          &lt;input type=&quot;text&quot; ref={input =&gt; this.todoInput=input}/&gt;
          &lt;button onClick={this.add}&gt;add #{this.props.count+1}&lt;/button&gt;
        &lt;/div&gt;
      )
    }
  }
  Add.propTypes = {
    count: PropTypes.number.isRequired,
    addTodo: PropTypes.func.isRequired
  }

  class List extends React.Component{
    render(){
      return(
        &lt;ul&gt;
          {
            this.props.todos.map((todo, index) =&gt; &lt;li key={index}&gt;{todo}&lt;/li&gt;)
          }
        &lt;/ul&gt;
      )
      /*this.props.todos.map((todo, index) =&gt; {return &lt;li key={index}&gt;{todo}&lt;/li&gt;})*/
      /* 加了大括号需要加return */
    }
  }

  List.protoTypes = {
    todos: PropTypes.array.isRequired
  }


  ReactDOM.render(&lt;App /&gt;,document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h2><span id="26-收集表单数据">2.6 收集表单数据</span></h2><h3><span id="261-效果">2.6.1 效果</span></h3><pre><code>需求: 自定义包含表单的组件
  1. 输入用户名密码后, 点击登陆提示输入信息
  3. 不提交表单</code></pre><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/component%E8%A1%A8%E5%8D%95.gif" alt="component表单 (2)"></p>
<h3><span id="262-理解">2.6.2 理解</span></h3><p>1)     问题: 在react应用中, 如何收集表单输入数据</p>
<p>2)     包含表单的组件分类</p>
<p>a.     受控组件: 表单项输入数据能自动收集成状态</p>
<p>b.     非受控组件: 需要时才手动读取表单输入框中的数据</p>
<h3><span id="263-代码">2.6.3 代码</span></h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求: 自定义包含表单的组件
    1. 界面如下所示
    2. 输入用户名密码后, 点击登陆提示输入信息
    3. 不提交表单
  */
  class LoginForm extends React.Component{
    constructor(props){
      super(props)
      // 初始化状态
      this.state  = {
        pwd: &#39;&#39;
      }
      this.handleSubmit = this.handleSubmit.bind(this)
      this.handleChange = this.handleChange.bind(this)
    }

    handleSubmit(event){
      const name = this.nameInput.value // 非受控组件
      const {pwd} = this.state // 受控组件
      alert(`准备提交的用户名为${name}，密码为${pwd}`)
      // 阻止事件的默认行为
      event.preventDefault()
    }
    // 当事件和标签是同一个时，使用event更方便

    handleChange(event){
      // 读取输入的值
      const pwd = event.target.value
      // 更新pwd的状态
      this.setState({pwd})
    }

    render(){
      return(
        &lt;form action=&quot;/test&quot; onSubmit={this.handleSubmit}&gt;
          用户名：&lt;input type=&quot;text&quot; ref={input =&gt; this.nameInput = input}/&gt;
          密码：&lt;input type=&quot;password&quot; value={this.state.pwd} onChange={this.handleChange}/&gt;
          &lt;input type=&quot;submit&quot; value=&quot;登录&quot;/&gt;
        &lt;/form&gt;
      )
    }
    // 原生jsonChange事件是在失去焦点时触发，react中是输入则触发
  }

  ReactDOM.render(&lt;LoginForm /&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h2><span id="27-组件生命周期">2.7 组件生命周期</span></h2><h3><span id="271-效果">2.7.1 效果</span></h3><pre><code>需求: 自定义组件
  1. 让指定的文本做显示/隐藏的渐变动画
  2. 切换持续时间为2S
  3. 点击按钮从界面中移除组件界面</code></pre><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/component%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.gif" alt="component生命周期"></p>
<h3><span id="272-理解">2.7.2 理解</span></h3><p>1)     组件对象从创建到死亡它会经历特定的生命周期阶段</p>
<p>2)     React组件对象包含一系列的勾子函数(生命周期回调函数), 在生命周期特定时刻回调</p>
<p>3)     我们在定义组件时, 可以重写特定的生命周期回调函数, 做特定的工作</p>
<h3><span id="273-生命周期流程图">2.7.3 生命周期流程图</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/reactlife.png" alt="生命周期流程图"></p>
<p>Mount：挂载，将虚拟标签放到容器(页面)中</p>
<p>render()渲染</p>
<p>左边初始化过程，这些方法称为声明周期回调函数，或称为生命周期的勾子，这些方法在特定的时刻调用</p>
<p>(回调函数：你定义的，你没有调用，但是最终执行了；声明式编程,流程设定好,、命令式编程jQuery,每一步自己操作)</p>
<p>will将、did完成</p>
<h3><span id="274-生命周期详述">2.7.4 生命周期详述</span></h3><p>1)     组件的三个生命周期状态:</p>
<ul>
<li><p>Mount：插入真实 DOM</p>
</li>
<li><p>Update：被重新渲染</p>
</li>
<li><p>Unmount：被移出真实 DOM</p>
</li>
</ul>
<p>2)     React 为每个状态都提供了勾子(hook)函数，可重写</p>
<ul>
<li><p><code>componentWillMount()</code></p>
</li>
<li><p><code>componentDidMount()</code></p>
</li>
<li><p><code>componentWillUpdate()</code></p>
</li>
<li><p><code>componentDidUpdate()</code></p>
</li>
<li><p><code>componentWillUnmount()</code></p>
</li>
</ul>
<p>3)    生命周期流程:</p>
<p>a.     第一次初始化渲染显示: ReactDOM.render()</p>
<ul>
<li><p>constructor(): 创建对象初始化state</p>
</li>
<li><p>componentWillMount() : 将要插入回调</p>
</li>
<li><p>render() : 用于插入虚拟DOM回调</p>
</li>
<li><p>componentDidMount() : 已经插入回调</p>
</li>
</ul>
<p>b.     每次更新state: this.setSate()</p>
<ul>
<li><p>componentWillUpdate() : 将要更新回调</p>
</li>
<li><p>render() : 更新(重新渲染)</p>
</li>
<li><p>componentDidUpdate() : 已经更新回调</p>
</li>
</ul>
<p>c.     移除组件: ReactDOM.unmountComponentAtNode(containerDom)</p>
<ul>
<li>componentWillUnmount() : 组件将要被移除回调</li>
</ul>
<p>三个阶段，可以都打印一下，看下方法执行的过程(与写的顺序无关)</p>
<h3><span id="275-重要的勾子">2.7.5 重要的勾子</span></h3><p>1)     render(): 初始化渲染或更新渲染调用</p>
<p>2)     componentDidMount(): 开启监听, 发送ajax请求</p>
<p>3)     componentWillUnmount(): 做一些收尾工作, 如: 清理定时器</p>
<p>4)     componentWillReceiveProps(): 后面需要时讲</p>
<h3><span id="276-代码">2.7.6 代码</span></h3><pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求: 自定义组件
    1. 让指定的文本做显示/隐藏的动画
    2. 切换时间为2S
    3. 点击按钮从界面中移除组件界面
   */
  class Life extends React.Component{

    constructor(props){
      super(props)
      // 初始化状态
      this.state = {
        opacity: 1
      }

      this.distroyComponent = this.distroyComponent.bind(this)
    }

    distroyComponent(){
      ReactDOM.unmountComponentAtNode(document.getElementById(&#39;example&#39;))
    }

    // 重写方法
    componentDidMount(){
      // 启动循环定时器
      this.intervalId = setInterval(function () { // 两个函数需要同一个变量，放到上一层共同组件上
        console.log(&#39;定时器执行……&#39;)
        let {opacity} = this.state
        opacity -= 0.1
        if(opacity&lt;=0){
          opacity = 1
        }
        // 更新状态
        this.setState({opacity})
      }.bind(this), 200) // componentDidMount的this
    }
    componentWillUnmount(){
      // 清理定时器
      clearInterval(this.intervalId)
    }

    render(){ // 一旦改变，就会重新调用;永远写在其他下方，构造器在最上方
      const {opacity} = this.state
      return(
        &lt;div&gt;
          &lt;h2 style={{opacity: opacity}}&gt;{this.props.msg}&lt;/h2&gt;
          &lt;button onClick={this.distroyComponent}&gt;不活了&lt;/button&gt;
        &lt;/div&gt;
      )
    }// style中两个大括号，外面的代表写的是js代码，里面的是对象（样式名：值，也可以写ES6）
  }

  ReactDOM.render(&lt;Life msg=&quot;react太难了&quot;/&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;</code></pre>
<h2><span id="28-虚拟dom与dom-diff算法">2.8 虚拟DOM与DOM Diff算法</span></h2><p>虚拟DOM：减少操作真实DOM的次数，更新界面次数变少</p>
<p>DOM Diff算法：计算哪里需要更新，哪里不需要更新，减少更新界面的区域</p>
<p>共同提高更新界面的效率</p>
<h3><span id="281-效果">2.8.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/vDOM.gif" alt="component虚拟DOM"></p>
<pre><code class="html">&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;
&lt;br&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
  /*
  验证:
  虚拟DOM+DOM Diff算法: 最小化页面重绘
  */

  class HelloWorld extends React.Component {
    constructor(props) {
      super(props)
      this.state = {
          date: new Date()
      }
    }

    componentDidMount () {
      setInterval(() =&gt; {
        this.setState({
            date: new Date()
        })
      }, 1000)
    }

    render () {
      console.log(&#39;render()&#39;)
      return (
        &lt;p&gt;
          Hello, &lt;input type=&quot;text&quot; placeholder=&quot;Your name here&quot;/&gt;!&amp;nbsp;
          &lt;span&gt;It is {this.state.date.toTimeString()}&lt;/span&gt;
        &lt;/p&gt;
      )
    }
  }

  ReactDOM.render(
    &lt;HelloWorld/&gt;,
    document.getElementById(&#39;example&#39;)
  )
&lt;/script&gt;</code></pre>
<p> 只有时间更新，其他不更新</p>
<h3><span id="282-基本原理图">2.8.2 基本原理图</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-5.png" alt="基本原理"></p>
<ul>
<li><p>初始化：虚拟DOM树(div&gt;p&gt;span……)，更新虚拟DOM界面不会变——&gt;更新真实DOM界面才会变化(更新状态)</p>
</li>
<li><p>更新(关键)：调用setState()更新状态(会进行对比)——&gt;根据差异更新真实DOM、重绘页面变化的区域</p>
</li>
</ul>
<h1><span id="第3章-react应用基于react脚手架">第3章 react应用(基于react脚手架)</span></h1><h2><span id="31-使用create-react-app创建react应用">3.1 使用create-react-app创建react应用</span></h2><h3><span id="311-react脚手架">3.1.1 react脚手架</span></h3><p>1)     xxx脚手架: 用来帮助程序员快速创建一个基于xxx库的模板项目</p>
<ul>
<li><p>包含了所有需要的配置</p>
</li>
<li><p>指定好了所有的依赖</p>
</li>
<li><p>可以直接安装/编译/运行一个简单效果</p>
</li>
</ul>
<p>2)     react提供了一个用于创建react项目的脚手架库: create-react-app</p>
<p>3)     项目的整体技术架构为: react + webpack + es6 + eslint</p>
<p>4)     使用脚手架开发的项目的特点: 模块化、组件化、工程化</p>
<h3><span id="312-创建项目并启动">3.1.2 创建项目并启动</span></h3><p><code>npm install -g create-react-app</code> 全局下载</p>
<p><code>create-react-app hello-react</code></p>
<p><code>cd hello-react</code></p>
<p><code>npm start</code></p>
<p>浏览器访问<a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a></p>
<p>注：</p>
<p><code>npm root -g</code> 查看全局下载目录<br>C:\Users\Shinelon\AppData\Roaming\npm\node_modules</p>
<h3><span id="313-react脚手架项目结构">3.1.3 react脚手架项目结构</span></h3><pre><code>ReactNews

 |--node_modules---第三方依赖模块文件夹

 |--public

   |-- index.html-----------------主页面

 |--scripts

   |-- build.js-------------------build打包引用配置

   |-- start.js-------------------start运行引用配置

 |--src------------源码文件夹

   |--components-----------------react组件

      |-- app.jsx

   |--index.css

   |--index.js-------------------应用入口js(main.js)

 |--.gitignore------git版本管制忽略的配置

 |--package.json----应用包配置文件 

 |--README.md-------应用描述说明的readme文件</code></pre><p> <code>package.json</code></p>
<ul>
<li><code>&quot;dependencies&quot;</code>：运行时依赖</li>
<li><code>&quot;devDependencies&quot;</code>：开发时依赖，编译打包时需要，开发时不需要，编译打包时工具包</li>
</ul>
<p><code>public/index.html</code>主界面</p>
<ul>
<li>只有一个<code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code>，依靠组件</li>
</ul>
<p><code>src/index.js</code>应用入口</p>
<ul>
<li>引入包(<code>import * from &quot;*&quot;</code>)、CSS(<code>import &quot;*.css&quot;</code>)</li>
<li>渲染组件</li>
</ul>
<p><code>README.md</code>对项目的说明文件</p>
<p>SPA(Single Page Application)：单应用</p>
<ul>
<li>index.html</li>
</ul>
<pre><code class="html">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code></pre>
<ul>
<li><code>src/components/app.jsx</code></li>
</ul>
<pre><code class="jsx">import React, {Component} from &#39;react&#39;
import logo from &#39;../logo.svg&#39;

export default class App extends Component {
  render() {
    return(
      &lt;div&gt;
        &lt;img className=&#39;logo&#39; src={logo} alt=&quot;logo&quot;/&gt;
        &lt;p className=&quot;title&quot;&gt;react组件&lt;/p&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import App from &#39;./components/app&#39;

import &#39;./index.css&#39;

ReactDOM.render(&lt;App /&gt;, document.getElementById(&#39;root&#39;))</code></pre>
<ul>
<li><code>src/index.css</code></li>
</ul>
<pre><code class="css">.logo{
  width: 200px;
  height: 200px;
}
.title{
  color: red;
  font-size: 25px;
}</code></pre>
<p><code>cd react_app</code><br><code>npm start</code>或<code>npm run start</code></p>
<h2><span id="32-demo-评论管理">3.2 demo: 评论管理</span></h2><h3><span id="321-效果">3.2.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/demo_comment.gif" alt="demo_comment"></p>
<h3><span id="322-拆分组件">3.2.2 拆分组件</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200708170522553.png" alt="image-20200708170522553"></p>
<p>应用组件: App</p>
<ul>
<li>state: comments/array</li>
</ul>
<p>添加评论组件: CommentAdd</p>
<ul>
<li><p>state: username/string, content/string</p>
</li>
<li><p>props: add/func</p>
</li>
</ul>
<p>评论列表组件: CommentList</p>
<ul>
<li>props: comment/object, delete/func, index/number</li>
</ul>
<p>评论项组件: CommentItem</p>
<ul>
<li>props: comments/array, delete/func</li>
</ul>
<h3><span id="323-实现静态组件">3.2.3 实现静态组件</span></h3><p>render(){return}中的内容</p>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import App from &#39;./components/app/app&#39;

ReactDOM.render(&lt;App/&gt;, document.getElementById(&#39;root&#39;))</code></pre>
<ul>
<li><code>src/components/app/app.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import CommentAdd from &#39;../comment-add/comment-add&#39;
import CommentList from &#39;../comment-list/comment-list&#39;

export default class App extends React.Component {

  constructor (props) {
    super(props)

    this.state = {
      comments: []
    }

    this.delete = this.delete.bind(this)
  }

  componentDidMount () {
    //模拟异步获取数据
    setTimeout(() =&gt; {
      const comments = [
        {
          username: &quot;Tom&quot;,
          content: &quot;ReactJS好难啊!&quot;,
          id: Date.now()
        },
        {
          username: &quot;JACK&quot;,
          content: &quot;ReactJS还不错!&quot;,
          id: Date.now() + 1
        }
      ]
      this.setState({
        comments
      })
    }, 1000)
  }

  add = (comment) =&gt; {
    let comments = this.state.comments
    comments.unshift(comment)
    this.setState({ comments })
  }

  delete (index) {
    let comments = this.state.comments
    comments.splice(index, 1)
    this.setState({ comments })
  }

  render () {
    return (
      &lt;div&gt;
        &lt;header className=&quot;site-header jumbotron&quot;&gt;
          &lt;div className=&quot;container&quot;&gt;
            &lt;div className=&quot;row&quot;&gt;
              &lt;div className=&quot;col-xs-12&quot;&gt;
                &lt;h1&gt;请发表对React的评论&lt;/h1&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/header&gt;
        &lt;div className=&quot;container&quot;&gt;
          &lt;CommentAdd add={this.add}/&gt;
          &lt;CommentList comments={this.state.comments} delete={this.delete}/&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}

// export default App 可以写到上面</code></pre>
<ul>
<li><code>src/components/comment-add/comment-add.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;

class CommentAdd extends React.Component {
  constructor (props) {
    super(props)
    this.state = {
      username: &#39;&#39;,
      content: &#39;&#39;
    }
    this.addComment = this.addComment.bind(this)
    this.changeUsername = this.changeUsername.bind(this)
    this.changeContent = this.changeContent.bind(this)
  }

  addComment () {
    // 根据输入的数据创建评论对象
    let { username, content } = this.state
    let comment = { username, content }
    // 添加到comments中, 更新state
    this.props.add(comment)
    // 清除输入的数据
    this.setState({
      username: &#39;&#39;,
      content: &#39;&#39;
    })
  }

  changeUsername (event) {
    this.setState({
      username: event.target.value
    })
  }

  changeContent (event) {
    this.setState({
      content: event.target.value
    })
  }

  render () {
    return (
      &lt;div className=&quot;col-md-4&quot;&gt;
        &lt;form className=&quot;form-horizontal&quot;&gt;
          &lt;div className=&quot;form-group&quot;&gt;
            &lt;label&gt;用户名&lt;/label&gt;
            &lt;input type=&quot;text&quot; className=&quot;form-control&quot; placeholder=&quot;用户名&quot;
                   value={this.state.username} onChange={this.changeUsername}/&gt;
          &lt;/div&gt;
          &lt;div className=&quot;form-group&quot;&gt;
            &lt;label&gt;评论内容&lt;/label&gt;
            &lt;textarea className=&quot;form-control&quot; rows=&quot;6&quot; placeholder=&quot;评论内容&quot;
                      value={this.state.content} onChange={this.changeContent}&gt;&lt;/textarea&gt;
          &lt;/div&gt;
          &lt;div className=&quot;form-group&quot;&gt;
            &lt;div className=&quot;col-sm-offset-2 col-sm-10&quot;&gt;
              &lt;button type=&quot;button&quot; className=&quot;btn btn-default pull-right&quot; onClick={this.addComment}&gt;提交&lt;/button&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    )
  }
}
CommentAdd.propTypes = {
  add: PropTypes.func.isRequired
}

export default CommentAdd</code></pre>
<ul>
<li><code>src/components/comment-list/comment-list.css</code></li>
</ul>
<pre><code class="css">.reply {
  margin-top: 0px;
}</code></pre>
<ul>
<li><code>src/components/comment-list/comment-list.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import CommentItem from &#39;../comment-item/comment-item&#39;
import &#39;./commentList.css&#39;
class CommentList extends React.Component {
  constructor (props) {
    super(props)
  }
  render () {
    let comments = this.props.comments
    let display = comments.length &gt; 0 ? &#39;none&#39; : &#39;block&#39;</code></pre>
<p>下面h2中由于用了双大括号，一直报错，因此请直接到github看源码</p>
<pre><code class="jsx">    return (
      &lt;div className=&quot;col-md-8&quot;&gt;
        &lt;h3 className=&quot;reply&quot;&gt;评论回复：&lt;/h3&gt;
        &lt;h2 style=双大括号 display: display 双大括号&gt;暂无评论，点击左侧添加评论&lt;/h2&gt;
        &lt;ul className=&quot;list-group&quot;&gt;
          {
            comments.map((comment, index) =&gt; {
              console.log(comment)
              return &lt;CommentItem comment={comment} key={index} index={index} delete={this.props.delete}/&gt;
            })
          }
        &lt;/ul&gt;
      &lt;/div&gt;
    )
    }
}
CommentList.propTypes = {
  comments: PropTypes.array.isRequired,
  delete: PropTypes.func.isRequired
}
export default CommentList</code></pre>
<ul>
<li><code>src/components/comment-item/comment-item.css</code></li>
</ul>
<pre><code class="css">li {
  transition: .5s;
  overflow: hidden;
}

.handle {
  width: 40px;
  border: 1px solid #ccc;
  background: #fff;
  position: absolute;
  right: 10px;
  top: 1px;
  text-align: center;
}

.handle a {
  display: block;
  text-decoration: none;
}

.list-group-item .centence {
  padding: 0px 50px;
}

.user {
  font-size: 22px;
}</code></pre>
<ul>
<li><code>src/components/comment-item/comment-item.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import &#39;./commentItem.css&#39;

class CommentItem extends React.Component {
  constructor (props) {
    super(props)
    this.deleteComment = this.deleteComment.bind(this)
  }

  deleteComment () {
    let username = this.props.comment.username
    if (window.confirm(`确定删除${username}的评论吗?`)) {
      this.props.delete(this.props.index)
    }
  }

  render () {
    let comment = this.props.comment
    return (
      &lt;li className=&quot;list-group-item&quot;&gt;
        &lt;div className=&quot;handle&quot;&gt;
          &lt;a href=&quot;javascript:&quot; onClick={this.deleteComment}&gt;删除&lt;/a&gt;
        &lt;/div&gt;
        &lt;p className=&quot;user&quot;&gt;&lt;span &gt;{comment.username}&lt;/span&gt;&lt;span&gt;说:&lt;/span&gt;&lt;/p&gt;
        &lt;p className=&quot;centence&quot;&gt;{comment.content}&lt;/p&gt;
      &lt;/li&gt;
    )
  }
}
CommentItem.propTypes = {
  comment: PropTypes.object.isRequired,
  index: PropTypes.number.isRequired,
  delete: PropTypes.func.isRequired
}

export default CommentItem</code></pre>
<h3><span id="324-实现动态组件">3.2.4 实现动态组件</span></h3><p>动态展示初始化数据</p>
<ul>
<li><p>初始化状态数据</p>
</li>
<li><p>传递属性数据</p>
</li>
</ul>
<p>响应用户操作, 更新组件界面</p>
<ul>
<li><p>绑定事件监听, 并处理</p>
</li>
<li><p>更新state</p>
</li>
</ul>
<h1><span id="第4章-react-ajax">第4章 react ajax</span></h1><h2><span id="41-理解">4.1 理解</span></h2><h3><span id="411-前置说明">4.1.1 前置说明</span></h3><p>1)     React本身只关注于界面, 并不包含发送ajax请求的代码</p>
<p>2)     前端应用需要通过ajax请求与后台进行交互(json数据)</p>
<p>3)     react应用中需要集成第三方ajax库(或自己封装)</p>
<h3><span id="412-常用的ajax请求库">4.1.2 常用的ajax请求库</span></h3><p>1)     jQuery: 比较重, 如果需要另外引入不建议使用</p>
<p>2)     <strong>axios</strong>: 轻量级, 建议使用</p>
<p>​    a.     封装XmlHttpRequest对象的ajax</p>
<p>​    b.     promise风格</p>
<p>​    c.     可以用在浏览器端和node服务器端</p>
<p>3)     fetch: 原生函数, 但老版本浏览器不支持</p>
<p>​    a.     不再使用XmlHttpRequest对象提交ajax请求</p>
<p>​    b.     为了兼容低版本的浏览器, 可以引入兼容库fetch.js</p>
<h3><span id="413-效果">4.1.3 效果</span></h3><pre><code>需求:
  1. 界面效果如下
  2. 根据指定的关键字在github上搜索匹配的最受关注的库
  3. 显示库名, 点击链接查看库
4. 测试接口: https://api.github.com/search/repositories?q=r&amp;sort=stars
</code></pre><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/ajax.gif" alt="ajax"></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;11_ajax&lt;/title&gt;
  &lt;style&gt;
    h2{
      text-align: center;
      margin-top: 200px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;example&quot;&gt;&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.19.2/axios.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/babel&quot;&gt;
  /*
  需求:
    1. 界面效果如下
    2. 根据指定的关键字在github上搜索匹配的最受关注的库
    3. 显示库名, 点击链接查看库
    4. 测试接口: https://api.github.com/search/repositories?q=r&amp;sort=stars
  */
  class MostStarRepo extends React.Component{
    state = {
      repoName: &#39;&#39;,
      repoUrl: &#39;&#39;
    }

    componentDidMount(){
      // 使用axios发送异步的ajax请求
      const url = `https://api.github.com/search/repositories?q=re&amp;sort=stars`
      axios.get(url)
          .then(response =&gt; {
            const result = response.data
            // console.log(response)
            // 得到数据
            const {name, html_url} = result.items[0]
            // 更新状态
            this.setState({repoName:name, repoUrl: html_url})
          })
          .catch((error) =&gt; {
            alert(error.message)
          })
      // 使用fetch发送异步的ajax请求
      /*fetch(url)
          .then(response =&gt; {
            return response.json()
          })
          .then(data =&gt; {
            // 得到数据
            const {name, html_url} = data.items[0]
            // 更新状态
            this.setState({repoName:name, repoUrl: html_url})
          })
      */
    }

    render(){
      const {repoName, repoUrl} = this.state
      if(!repoName){
        return(
          &lt;h2&gt;LOADING...&lt;/h2&gt;
        )
      }else{
        return(
          &lt;h2&gt;Most star repo is &lt;a href={repoUrl}&gt;{repoName}&lt;/a&gt;&lt;/h2&gt;
        )
      }

    }
  }
  ReactDOM.render(&lt;MostStarRepo /&gt;, document.getElementById(&#39;example&#39;))
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2><span id="42-axios">4.2 axios</span></h2><h3><span id="421-文档">4.2.1 文档</span></h3><p><a href="https://github.com/axios/axios" target="_blank" rel="noopener">https://github.com/axios/axios</a></p>
<h3><span id="422-相关api">4.2.2 相关API</span></h3><p>1)     GET请求</p>
<pre><code class="javascript">axios.get(&#39;/user?ID=12345&#39;)
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });

axios.get(&#39;/user&#39;, {
    params: {
      ID: 12345
    }
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
</code></pre>
<p>2)     POST请求</p>
<pre><code class="javascript">axios.post(&#39;/user&#39;, {
    firstName: &#39;Fred&#39;,
axios.post(&#39;/user&#39;, {
    firstName: &#39;Fred&#39;,
    lastName: &#39;Flintstone&#39;
})
.then(function (response) {
  console.log(response);
})
.catch(function (error) {
  console.log(error);
});
</code></pre>
<h2><span id="43-fetch">4.3 Fetch</span></h2><h3><span id="431-文档">4.3.1 文档</span></h3><p>1)     <a href="https://github.github.io/fetch/" target="_blank" rel="noopener">https://github.github.io/fetch/</a></p>
<p>2)     <a href="https://segmentfault.com/a/1190000003810652" target="_blank" rel="noopener">https://segmentfault.com/a/1190000003810652</a></p>
<h3><span id="432-相关api">4.3.2 相关API</span></h3><p>1)     GET请求</p>
<pre><code class="javascript">fetch(url).then(function(response) {
  return response.json()
}).then(function(data) {
  console.log(data)
}).catch(function(e) {
  console.log(e)
});
</code></pre>
<p>2)     POST请求</p>
<pre><code class="javascript">fetch(url, {
  method: &quot;POST&quot;,
  body: JSON.stringify(data),
}).then(function(data) {
  console.log(data)
}).catch(function(e) {
  console.log(e)
})</code></pre>
<h2><span id="44-demo-github-users">4.4 demo: github users</span></h2><h3><span id="441-效果">4.4.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/demo_users.gif" alt="demo_users"></p>
<h3><span id="442-拆分组件">4.4.2 拆分组件</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200711091558440.png" alt="image-20200711091558440"></p>
<p>App</p>
<p>​       * state: searchName/string</p>
<p>  Search</p>
<p>​      * props: setSearchName/func</p>
<p>  List</p>
<p>​      * props: searchName/string</p>
<p>​      * state: firstView/bool, loading/bool, users/array, errMsg/string</p>
<h3><span id="443-编写静态组件">4.4.3 编写静态组件</span></h3><h3><span id="444-编写动态组件">4.4.4 编写动态组件</span></h3><p>componentWillReceiveProps(nextProps): 监视接收到新的props, 发送ajax</p>
<p>​     使用axios库发送ajax请求</p>
<ul>
<li><code>public/index.html</code></li>
</ul>
<pre><code class="html">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code></pre>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import { render } from &#39;react-dom&#39;

import App from &#39;./components/app&#39;
import &#39;./index.css&#39;

render(&lt;App /&gt;, document.getElementById(&#39;root&#39;))</code></pre>
<ul>
<li><code>src/index.css</code></li>
</ul>
<pre><code class="css">.album {
  min-height: 50rem; /* Can be removed; just added for demo purposes */
  padding-top: 3rem;
  padding-bottom: 3rem;
  background-color: #f7f7f7;
}

.card {
  float: left;
  width: 33.333%;
  padding: .75rem;
  margin-bottom: 2rem;
  border: 1px solid #efefef;
  text-align: center;
}

.card &gt; img {
  margin-bottom: .75rem;
  border-radius: 100px;
}

.card-text {
  font-size: 85%;
}
</code></pre>
<ul>
<li><code>src/componets/app.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import Search from &#39;./search&#39;
import UserList from &#39;./user-list&#39;

export default class App extends React.Component {

  state = {
    searchName: &#39;&#39;
  }

  refreshName = (searchName) =&gt; this.setState({searchName})

  render() {
    return (
      &lt;div className=&quot;container&quot;&gt;
        &lt;section className=&quot;jumbotron&quot;&gt;
          &lt;h3 className=&quot;jumbotron-heading&quot;&gt;Search Github Users&lt;/h3&gt;
          &lt;Search refreshName={this.refreshName}/&gt;
        &lt;/section&gt;
        &lt;UserList searchName={this.state.searchName}/&gt;
      &lt;/div&gt;
    )
  }

}
</code></pre>
<ul>
<li><code>src/componets/search.jsx</code></li>
</ul>
<pre><code class="jsx">/**
 * 上部的搜索模块
 */
import React, {Component} from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;

class Search extends Component {

  static propTypes = {
    refreshName: PropTypes.func.isRequired
  }

  search = () =&gt; {
    var name = this.nameInput.value
    this.props.refreshName(name)
  }

  render() {
    return (
      &lt;div&gt;
        &lt;input type=&quot;text&quot; placeholder=&quot;enter the name you search&quot;
               ref={(input =&gt; this.nameInput = input)}/&gt;
        &lt;button onClick={this.search}&gt;Search&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}

export default Search</code></pre>
<ul>
<li><code>src/componets/user-list.jsx</code></li>
</ul>
<pre><code class="jsx">/**
 * 下部的用户列表模块
 */
import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import axios from &#39;axios&#39;
// npm install axios --save 

class UserList extends React.Component {

  static propTypes = {
    searchName: PropTypes.string.isRequired
  }

  state = {
    firstView: true,
    loading: false,
    users: null,
    error: null
  }

  async componentWillReceiveProps(nextProps)  {
    let searchName = nextProps.searchName
    console.log(&#39;发送ajax请求&#39;, searchName)
    const url = `https://api.github.com/search/users?q=${searchName}`
    this.setState({ firstView: false, loading: true })

    // 使用axios库
    axios.get(url)
      .then((response) =&gt; {
        console.log(response)
        this.setState({ loading: false, users: response.data.items })
      })
      .catch((error)=&gt;{
        // debugger
        console.log(&#39;error&#39;, error.response.data.message, error.message)
        this.setState({ loading: false, error: error.message })
      })

    try {
      const result = await axios.get(url)
      this.setState({ loading: false, users: result.data.items })
    } catch(err) {
      // debugger
      console.log(&#39;----&#39;, err.message)
    }
  }

  render () {

    if (this.state.firstView) {
      return &lt;h2&gt;Enter name to search&lt;/h2&gt;
    } else if (this.state.loading) {
      return &lt;h2&gt;Loading result...&lt;/h2&gt;
    } else if (this.state.error) {
      return &lt;h2&gt;{this.state.error}&lt;/h2&gt;
    } else {
      return (
        &lt;div className=&quot;row&quot;&gt;
          {
            this.state.users.map((user) =&gt; (
              &lt;div className=&quot;card&quot; key={user.html_url}&gt;
                &lt;a href={user.html_url} target=&quot;_blank&quot;&gt;
                  &lt;img src={user.avatar_url} style={{width: '100px'}} alt=&#39;user&#39;/&gt;
                &lt;/a&gt;
                &lt;p className=&quot;card-text&quot;&gt;{user.login}&lt;/p&gt;
              &lt;/div&gt;
            ))
          }
        &lt;/div&gt;
      )
    }
  }
}

export default UserList</code></pre>
<h1><span id="第5章-几个重要技术总结">第5章 几个重要技术总结</span></h1><h2><span id="51-组件间通信">5.1 组件间通信</span></h2><h3><span id="511-方式一-通过props传递">5.1.1 方式一: 通过props传递</span></h3><p>1)     共同的数据放在父组件上, 特有的数据放在自己组件内部(state)</p>
<p>2)     通过props可以传递一般数据和函数数据, 只能一层一层传递</p>
<p>3)     一般数据–&gt;父组件传递数据给子组件–&gt;子组件读取数据</p>
<p>4)     函数数据–&gt;子组件传递数据给父组件–&gt;子组件调用函数</p>
<p>父组件传到孙组件、兄弟组件之间不能直接通信，经过子组件、服务器传递</p>
<h3><span id="512-方式二-使用消息订阅subscribe-发布publish机制">5.1.2 方式二: 使用消息订阅(subscribe)-发布(publish)机制</span></h3><p>1)     工具库: PubSubJS</p>
<p>2)     下载: <code>npm install pubsub-js --save</code></p>
<p>3)     使用: </p>
<pre><code class="javascript">import PubSub from &#39;pubsub-js&#39; //引入
PubSub.publish(&#39;delete&#39;, data) //发布消息
// 消息名，消息
PubSub.subscribe(&#39;delete&#39;, function(msg, data){ }); //订阅
// 消息名，回调函数</code></pre>
<p>以上一个demo为例(用户搜索的)，search和userlist(main)之间需要通信，它们是兄弟组件</p>
<p>在这里是通过父组件，利用props进行通信</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200714161016458.png" alt="props-search"></p>
<p>这是以前的app.ejs</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200714161302225.png" alt="app.ejs"></p>
<p>现在不通过父组件来通信</p>
<p><code>src/components/app.ejs</code></p>
<pre><code class="ejs">import React from &#39;react&#39;
import Search from &#39;./search&#39;
import UserList from &#39;./user-list&#39;

export default class App extends React.Component {

  render() {
    return (
      &lt;div className=&quot;container&quot;&gt;
        &lt;section className=&quot;jumbotron&quot;&gt;
          &lt;h3 className=&quot;jumbotron-heading&quot;&gt;Search Github Users&lt;/h3&gt;
          &lt;Search/&gt;
        &lt;/section&gt;
        &lt;UserList/&gt;
      &lt;/div&gt;
    )
  }

}</code></pre>
<p><code>src/components/search.ejs</code></p>
<pre><code class="ejs">/**
 * 上部的搜索模块
 */
import React, {Component} from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import PubSub from &#39;pubsub-js&#39; //引入
class Search extends Component {
  search = () =&gt; {
    var searchName = this.nameInput.value
    if(searchName){
      // 搜索
      // 发布消息 search
PubSub.publish(&#39;search&#39;, searchName)
    }
  }
  render() {
    return (
      &lt;div&gt;
        &lt;input type=&quot;text&quot; placeholder=&quot;enter the name you search&quot;
               ref={(input =&gt; this.nameInput = input)}/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Search&quot; onClick={this.search} /&gt;
      &lt;/div&gt;
    )
  }
}
export default Search</code></pre>
<p><code>src/components/user-list.ejs</code></p>
<pre><code class="ejs">/**
 * 下部的用户列表模块
 */
import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import axios from &#39;axios&#39;
import PubSub from &#39;pubsub-js&#39; //引入
class UserList extends React.Component {
  static propTypes = {
    searchName: PropTypes.string.isRequired
  }
  state = {
    firstView: true,
    loading: false,
    users: null,
    error: null
  }
  componentDidMount(){
    // 订阅消息 search
   PubSub.subscribe(&#39;search&#39;, (msg, searchName) =&gt; { // 指定了新的name，需要请求    
      this.setState({ firstView: false, loading: true })
      // 使用axios库
      const url = `https://api.github.com/search/users?q=${searchName}`
      axios.get(url)
        .then((response) =&gt; {
    console.log(response)
          this.setState({ loading: false, users: response.data.items })
        })
        .catch((error)=&gt;{
          // debugger       console.log(&#39;error&#39;, error.response.data.message, error.message)
          this.setState({ loading: false, error: error.message })
        })
      try {
        const result = axios.get(url)
        this.setState({ loading: false, users: result.data.items })
      } catch(err) {
        // debugger
        console.log(&#39;----&#39;, err.message)
      }
    })
  }
  render () {
    if (this.state.firstView) {
      return &lt;h2&gt;Enter name to search&lt;/h2&gt;
    } else if (this.state.loading) {
      return &lt;h2&gt;Loading result...&lt;/h2&gt;
    } else if (this.state.error) {
      return &lt;h2&gt;{this.state.error}&lt;/h2&gt;
    } else {
      return (
        &lt;div className=&quot;row&quot;&gt;
          {         this.state.users.map((user) =&gt; (
              &lt;div className=&quot;card&quot; key={user.html_url}&gt;
                &lt;a href={user.html_url} target=&quot;_blank&quot;&gt;
                  &lt;img src={user.avatar_url} style={{width: '100px'}} alt=&#39;user&#39;/&gt;
                &lt;/a&gt;
                &lt;p className=&quot;card-text&quot;&gt;{user.login}&lt;/p&gt;
              &lt;/div&gt;
            ))
          }
        &lt;/div&gt;
      )
    }
  }
}
export default UserList</code></pre>
<p>再以之前的评论的为例</p>
<p>App.ejs中有个删除评论的函数，传给了List组件(并没有用到)，接着传给Item</p>
<pre><code class="jsx">delete={this.delete}</code></pre>
<h3><span id="513-方式三-redux">5.1.3 方式三: redux</span></h3><p>后面专门讲解</p>
<h2><span id="52-事件监听理解">5.2 事件监听理解</span></h2><h3><span id="521-原生dom事件">5.2.1 原生DOM事件</span></h3><p>1)     绑定事件监听</p>
<p>a.     事件名(类型): 只有有限的几个, 不能随便写</p>
<p>b.     回调函数</p>
<p>2)         触发事件</p>
<p>a.     用户操作界面</p>
<p>b.     事件名(类型)</p>
<p>c.     数据</p>
<h3><span id="522-自定义事件消息机制">5.2.2 自定义事件(消息机制)</span></h3><p>1)     绑定事件监听</p>
<p>a.     事件名(类型): 任意</p>
<p>b.     回调函数: 通过形参接收数据, 在函数体处理事件</p>
<p>2)     触发事件(编码)</p>
<p>a.     事件名(类型): 与绑定的事件监听的事件名一致</p>
<p>b.     数据: 会自动传递给回调函数</p>
<h2><span id="53-es6常用新语法">5.3 ES6常用新语法</span></h2><p>1)     定义常量/变量: <code>const/let</code></p>
<p>2)     解构赋值:<code>let {a, b} = this.props</code>  <code>import {aa} from &#39;xxx&#39;</code></p>
<p>3)     对象的简洁表达: <code>{a, b}</code></p>
<p>4)     箭头函数: </p>
<p>a.     常用场景</p>
<ul>
<li><p>组件的自定义方法: <code>xxx = () =&gt; {}</code></p>
</li>
<li><p>参数匿名函数</p>
</li>
</ul>
<p>b.     优点:</p>
<p>​          * 简洁</p>
<p>​          * 没有自己的this,使用引用this查找的是外部this</p>
<p>5)     扩展(三点)运算符: 拆解对象<code>(const MyProps = {}, &lt;Xxx {...MyProps}&gt;)</code></p>
<p>6)     类: <code>class/extends/constructor/super</code></p>
<p>7)     ES6模块化: <code>export default | import</code></p>
<h1><span id="第6章-react-router4">第6章 react-router4</span></h1><h2><span id="61-相关理解">6.1 相关理解</span></h2><h3><span id="611-react-router的理解">6.1.1 react-router的理解</span></h3><p>1)     react的一个插件库(依赖/基于React)</p>
<p>2)     专门用来实现一个SPA应用</p>
<p>3)     基于react的项目基本都会用到此库</p>
<h3><span id="612-spa的理解">6.1.2 SPA的理解</span></h3><p>1)     单页Web应用（single page web application，SPA）</p>
<p>2)     整个应用只有一个完整的页面</p>
<p>3)     点击页面中的链接不会刷新页面, 本身也不会向服务器发请求</p>
<p>4)     当点击路由链接时, 只会做页面的<strong>局部更新</strong></p>
<p>5)     数据都需要通过<strong>ajax请求</strong>获取, 并在前端<strong>异步展现</strong></p>
<h3><span id="613-路由的理解">6.1.3 路由的理解</span></h3><p>1)     什么是路由?</p>
<p>a.     一个路由就是一个<strong>映射关系(key:value)</strong></p>
<p>b.     key为<strong>路由路径(path)</strong>, value可能是function(后台路由)/<strong>component(前台路由)</strong></p>
<p>2)     路由分类</p>
<p>a.     后台路由: node服务器端路由, value是function, 用来处理客户端提交的请求并返回一个响应数据</p>
<p>b.     前台路由: 浏览器端路由, value是component, 当请求的是路由path时, 浏览器端前没有发送http请求, 但界面会更新显示对应的组件 </p>
<p>3)     后台路由</p>
<p>a.     注册路由: <code>router.get(path, function(req, res))</code></p>
<p>b.     当node接收到一个请求时, 根据请求路径找到匹配的路由, 调用路由中的函数来处理请求, 返回响应数据</p>
<p>4)         前端路由</p>
<p>a.     注册路由: <code>&lt;Route path=&quot;/about&quot; component={About}&gt;</code></p>
<p>b.     当浏览器的<strong>hash</strong>变为<code>#about</code>时, 当前路由组件就会变为About组件</p>
<h3><span id="614-前端路由的实现">6.1.4 前端路由的实现</span></h3><p>(底层实现)</p>
<p>1)     history库</p>
<p>a.     网址: <a href="https://github.com/ReactTraining/history" target="_blank" rel="noopener">https://github.com/ReactTraining/history</a></p>
<p>b.     管理浏览器会话历史(history)的工具库</p>
<p>c.     包装的是原生BOM中<code>window.history</code>和<code>window.location.hash</code></p>
<p>2)     history API</p>
<p>a.     <code>History.createBrowserHistory()</code>: 得到封装window.history的管理对象</p>
<p>b.     <code>History.createHashHistory()</code>: 得到封装window.location.hash的管理对象</p>
<p>c.     <code>history.push()</code>: 添加一个新的历史记录</p>
<p>d.     <code>history.replace()</code>: 用一个新的历史记录替换当前的记录</p>
<p>e.     <code>history.goBack()</code>: 回退到上一个历史记录</p>
<p>f.     <code>history.goForword()</code>: 前进到下一个历史记录</p>
<p>g.     <code>history.listen(function(location){})</code>: 监视历史记录的变化</p>
<p>3)     测试</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/history-%E6%96%B9%E5%BC%8F1.gif" alt="history-方式1"></p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/history-%E6%96%B9%E5%BC%8F2.gif" alt="history-方式2"></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;history test&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;p&gt;&lt;input type=&quot;text&quot;&gt;&lt;/p&gt;
  &lt;a href=&quot;/test1&quot; onclick=&quot;return push(&#39;/test1&#39;)&quot;&gt;test1&lt;/a&gt;&lt;br&gt;&lt;br&gt;
  &lt;button onClick=&quot;push(&#39;/test2&#39;)&quot;&gt;push test2&lt;/button&gt;&lt;br&gt;&lt;br&gt;
  &lt;button onClick=&quot;back()&quot;&gt;回退&lt;/button&gt;&lt;br&gt;&lt;br&gt;
  &lt;button onClick=&quot;forword()&quot;&gt;前进&lt;/button&gt;&lt;br&gt;&lt;br&gt;
  &lt;button onClick=&quot;replace(&#39;/test3&#39;)&quot;&gt;replace test3&lt;/button&gt;&lt;br&gt;&lt;br&gt;

  &lt;script type=&quot;text/javascript&quot; src=&quot;https://cdn.bootcss.com/history/4.7.2/history.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
    let history = History.createBrowserHistory() // 方式一
    history = History.createHashHistory() // 方式二
    // console.log(history)

    function push (to) {
      history.push(to)
      return false
    } // 可以返回

    function back() {
      history.goBack()
    }

    function forword() {
      history.goForward()
    }

    function replace (to) {
      history.replace(to)
    } // 不能返回

    history.listen((location) =&gt; {
      console.log(&#39;请求路由路径变化了&#39;, location)
    })
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2><span id="62-react-router相关api">6.2 react-router相关API</span></h2><p><a href="https://reactrouter.com/" target="_blank" rel="noopener">react_router</a></p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200714181151269.png" alt="react-router"></p>
<p><a href="https://reactrouter.com/web/guides/quick-start" target="_blank" rel="noopener">web</a></p>
<h3><span id="621-组件">6.2.1 组件</span></h3><p>1)     <code>&lt;BrowserRouter&gt;</code>：BrowserRouter是react路由的容器</p>
<p>2)     <code>&lt;HashRouter&gt;</code>：这个是用来兼容老浏览器的</p>
<p>3)     <code>&lt;Route&gt;</code>：Route的作用就是用来渲染路由匹配的组件。路由渲染有三种方式，每一种方式都可以传递match,location,history对象</p>
<p>4)     <code>&lt;Redirect&gt;</code>：路由重定向</p>
<p>5)     <code>&lt;Link&gt;</code>：Link的作用和a标签类似</p>
<p>6)     <code>&lt;NavLink&gt;</code>：NavLink和Link一样最终都是渲染成a标签，NavLink可以给这个a标签添加额外的属性</p>
<p>7)     <code>&lt;Switch&gt;</code>：Switch组件内部可以是Route或者Redirect，只会渲染第一个匹配的元素</p>
<h3><span id="622-其它">6.2.2 其它</span></h3><p>1)     <strong><code>history</code>对象</strong>：这里的history对象是使用history插件生成的，<a href="http://www.cnblogs.com/ye-hcj/p/7741742.html已经详细讲过了" target="_blank" rel="noopener">http://www.cnblogs.com/ye-hcj/p/7741742.html已经详细讲过了</a><br>记住一点，再使用location做对比的使用，通过history访问的location是动态变化的，最好通过Route访问location</p>
<p>2)     <code>match</code>对象：match对象表示当前的路由地址是怎么跳转过来的</p>
<p>3)     <code>withRouter</code>函数：当一个非路由组件也想访问到当前路由的match,location,history对象，那么withRouter将是一个非常好的选择</p>
<h2><span id="63-基本路由使用">6.3 基本路由使用</span></h2><h3><span id="631-效果">6.3.1 效果</span></h3><p>![react-router demo1 (3)](<a href="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router</a> demo1 (3).gif)</p>
<p>并没有刷新页面</p>
<h3><span id="632-准备">6.3.2 准备</span></h3><p>1)     下载react-router: <code>npm install --save react-router@4</code></p>
<p>我们只需要web版本：<code>npm install --save react-router-dom</code></p>
<p>2)     由于使用到了BootStrap，因此在index.html中引入bootstrap.css: <code>&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/bootstrap.css&quot;&gt;</code></p>
<p><code>public/index.html</code></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;
    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot;&gt;
    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot;&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot;&gt;
    &lt;title&gt;React-router&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/bootstrap.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;noscript&gt;
      You need to enable JavaScript to run this app.
    &lt;/noscript&gt;
    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>一般会将路由组件和非路由组件分开写</p>
<p>pages/views存放路由组件</p>
<p>components存放其他组件</p>
<h3><span id="633-路由组件-viewsaboutjsx">6.3.3 路由组件: <code>views/about.jsx</code></span></h3><pre><code class="jsx">import React,{Component} from &#39;react&#39;
export default class About extends Component{
  render(){
    return(
        &lt;div&gt;About组件内容&lt;/div&gt;
      )
  }
}</code></pre>
<h3><span id="634-路由组件-viewshomejsx">6.3.4 路由组件: <code>views/home.jsx</code></span></h3><pre><code class="jsx">import React, {Component} from &#39;react&#39;

export default class Home extends Component{
  render(){
    return (
        &lt;div&gt;Home组件内容&lt;/div&gt;
      )
  }
}</code></pre>
<h3><span id="635-包装navlink组件-componentsmy-nav-linkjsx">6.3.5 包装NavLink组件: <code>components/my-nav-link.jsx</code></span></h3><p>由于每个NavLink都需要自定义active样式(加入属性activeClassName)，因此提出来</p>
<pre><code class="jsx">import React, {Component} from &#39;react&#39;
import {NavLink} from &#39;react-router-dom&#39;

export default class MyNavLink extends Component {
  render(){
    // 利用this.props三点运算符接受所有的属性
    return(
      &lt;NavLink {...this.props} activeClassName=&#39;activeClass&#39;/&gt;
    )
  }
}</code></pre>
<h3><span id="636-应用组件-componentsappjsx">6.3.6 应用组件: <code>components/app.jsx</code></span></h3><pre><code class="jsx">import React from &#39;react&#39;
import {NavLink, Route, Switch, Redirect} from &#39;react-router-dom&#39;
import MyNavLink from &#39;./my-nav-link&#39;
import About from &#39;../views/about&#39;
import Home from &#39;../views/home&#39;

export default class App extends React.Component {

  render() {
    return (
      &lt;div&gt;
        &lt;div className=&quot;row&quot;&gt;
          &lt;div className=&quot;col-xs-offset-2 col-xs-8&quot;&gt;
            &lt;div className=&quot;page-header&quot;&gt;
              &lt;h2&gt;React Router Demo&lt;/h2&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div className=&quot;row&quot;&gt;
          &lt;div className=&quot;col-xs-2 col-xs-offset-2&quot;&gt;
            &lt;div className=&quot;list-group&quot;&gt;
              {/*导航路由链接，不能使用a标签，to指向的path*/}
              &lt;MyNavLink className=&quot;list-group-item&quot; to=&#39;/about&#39;&gt;About&lt;/MyNavLink&gt;
              &lt;MyNavLink className=&quot;list-group-item&quot; to=&#39;/home&#39;&gt;Home&lt;/MyNavLink&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;col-xs-6&quot;&gt;
            &lt;div className=&quot;panel&quot;&gt;
              &lt;div className=&quot;panel-body&quot;&gt;
                {/*可切换的路由组件，使用switch只有匹配才显示，route的path对应上方的to、component对应路由组件，Redirect自动重定向到about、默认到about组件*/}
                &lt;Switch&gt;
                  &lt;Route path=&#39;/about&#39; component={About}/&gt;
                  &lt;Route path=&#39;/home&#39; component={Home}/&gt;
                  &lt;Redirect to=&#39;/about&#39;/&gt;
                &lt;/Switch&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}
</code></pre>
<h3><span id="637-自定义样式-indexcss">6.3.7 自定义样式: <code>index.css</code></span></h3><pre><code class="css">activeClass{
  color: red !important;
}</code></pre>
<h3><span id="638-入口js-indexjs">6.3.8 入口JS: <code>index.js</code></span></h3><pre><code class="javascript">import React from &#39;react&#39;
//import ReactDOM from &#39;react-dom&#39;
import {render} from &#39;react-dom&#39;
import {BrowserRouter, HashRouter} from &#39;react-router-dom&#39;
import App from &#39;./components/app&#39;

import &#39;./index.css&#39;

// ReactDOM.render(
render(
  (
    &lt;BrowserRouter&gt;
      &lt;App/&gt;
    &lt;/BrowserRouter&gt;
    /* 组件需要用路由器组件包含起来，两者任选一个 */
    /*&lt;HashRouter&gt;
      &lt;App /&gt;
    &lt;/HashRouter&gt;*/
  ),
  document.getElementById(&#39;root&#39;)
)</code></pre>
<p>总结：如何编写路由效果？</p>
<ol>
<li>编写路由组件</li>
<li>在父路由组件中指定<ul>
<li>路由连接：<code>&lt;NavLink&gt;&lt;/NavLink&gt;</code></li>
<li>路由：<code>&lt;Route&gt;&lt;/Route&gt;</code></li>
</ul>
</li>
</ol>
<h2><span id="64-嵌套路由使用">6.4 嵌套路由使用</span></h2><p>嵌套路由——路由组件中的路由</p>
<h3><span id="641-效果">6.4.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router-demo2.gif" alt="react-router demo2"></p>
<h3><span id="642-二级路由组件-viewsnewsjsx">6.4.2 二级路由组件: <code>views/news.jsx</code></span></h3><pre><code class="jsx">import React from &#39;react&#39;

export default class News extends React.Component {
  state = {
    newsArr: [&#39;news001&#39;, &#39;news002&#39;, &#39;news003&#39;]
  }

  render () {
    return (
      &lt;div&gt;
        &lt;ul&gt;
          {
            this.state.newsArr.map((news, index) =&gt; &lt;li key={index}&gt;{news}&lt;/li&gt;)
          }
        &lt;/ul&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h3><span id="643-二级路由组件-viewsmessagejsx">6.4.3 二级路由组件: <code>views/message.jsx</code></span></h3><pre><code class="jsx">import React from &#39;react&#39;
import {Link, Route} from &#39;react-router-dom&#39;

export default class Message extends React.Component {
  state = {
    messages: []
  }

  componentDidMount () {
    // 模拟发送ajax请求
    setTimeout(() =&gt; {
      const data = [
        {id: 1, title: &#39;Message001&#39;},
        {id: 3, title: &#39;Message003&#39;},
        {id: 6, title: &#39;Message006&#39;},
      ]
      this.setState({
        messages: data
      })
    }, 1000)
  }

  render () {
    const path = this.props.match.path

    return (
      &lt;div&gt;
        &lt;ul&gt;
          {
            this.state.messages.map((m, index) =&gt; {
              return (
                &lt;li key={index}&gt;
                   &lt;a href=&#39;???&#39;&gt;{m.title}&lt;/a&gt;
                &lt;/li&gt;
              )
            })
          }
        &lt;/ul&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h3><span id="644-一级路由组件-viewshomejsx">6.4.4 一级路由组件: <code>views/home.jsx</code></span></h3><pre><code class="jsx">import React, {Component} from &#39;react&#39;
import {Switch, Route, Redirect} from &#39;react-router-dom&#39;
import MyNavLink from &#39;../components/my-nav-link&#39;
import News from &#39;./news&#39;
import Message from &#39;./message&#39;

export default class Home extends Component{
  render(){
    return (
      &lt;div&gt;
        &lt;h2&gt;Home组件内容&lt;/h2&gt;
        &lt;div&gt;
          &lt;ul className=&quot;nav nav-tabs&quot;&gt;
            &lt;li&gt;
              &lt;MyNavLink to=&#39;/home/news&#39;&gt;News&lt;/MyNavLink&gt;
            &lt;/li&gt;
            &lt;li&gt;
              &lt;MyNavLink to=&quot;/home/message&quot;&gt;Message&lt;/MyNavLink&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
          &lt;Switch&gt;
            &lt;Route path=&#39;/home/news&#39; component={News} /&gt;
            &lt;Route path=&#39;/home/message&#39; component={Message} /&gt;
            &lt;Redirect to=&#39;/home/news&#39;/&gt;
          &lt;/Switch&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h2><span id="65-向路由组件传递参数数据">6.5 向路由组件传递参数数据</span></h2><p>传递的是id值</p>
<h3><span id="651-效果">6.5.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router-demo3.gif" alt="react-router demo3 (2)"></p>
<h3><span id="652-三级路由组件-viewsmessage-detailjsx">6.5.2 三级路由组件: <code>views/message-detail.jsx</code></span></h3><pre><code class="jsx">import React from &#39;react&#39;

const messageDetails = [
  {id: 1, title: &#39;Message001&#39;, content: &#39;中国，你是最棒的&#39;},
  {id: 3, title: &#39;Message003&#39;, content: &#39;对的，没错，非常赞成楼上&#39;},
  {id: 6, title: &#39;Message006&#39;, content: &#39;我也赞成&#39;},
]

// 函数的组件
export default function MessageDetail(props) {

  const id = props.match.params.id
  const md = messageDetails.find(md =&gt; md.id===id*1)

  return (
    &lt;ul&gt;
      &lt;li&gt;ID: {md.id}&lt;/li&gt;
      &lt;li&gt;TITLE: {md.title}&lt;/li&gt;
      &lt;li&gt;CONTENT: {md.content}&lt;/li&gt;
    &lt;/ul&gt;
  )
}</code></pre>
<h3><span id="653-二级路由组件-viewsmessagejsx">6.5.3 二级路由组件: <code>views/message.jsx</code></span></h3><pre><code class="jsx">import React from &#39;react&#39;
import {Link, Route} from &#39;react-router-dom&#39;
import MessageDetail from &quot;./message-detail&quot;

export default class Message extends React.Component {
  state = {
    messages: []
  }

  componentDidMount () {
    // 模拟发送ajax请求
    setTimeout(() =&gt; {
      const data = [
        {id: 1, title: &#39;Message001&#39;},
        {id: 3, title: &#39;Message003&#39;},
        {id: 6, title: &#39;Message006&#39;},
      ]
      this.setState({
        messages: data
      })
    }, 1000)
  }

  render () {
    const path = this.props.match.path

    return (
      &lt;div&gt;
        &lt;ul&gt;
          {
            this.state.messages.map((m, index) =&gt; {
              return (
                &lt;li key={index}&gt;
                  &lt;Link to={`${path}/${m.id}`}&gt;{m.title}&lt;/Link&gt;
                &lt;/li&gt;
              )
            })
          }
        &lt;/ul&gt;
        &lt;Route path={`${path}/:id`} component={MessageDetail}&gt;&lt;/Route&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<p>路由链接与非路由链接：是否发了请求(路由连接不发)</p>
<p><code>&lt;NavLink to=&#39;&#39;&gt;&lt;/NavLink&gt;`` &lt;Link to=&#39;&#39;&gt;&lt;/Link&gt;</code></p>
<p><code>&lt;a href=&quot;&quot;&gt;&lt;/a&gt;</code></p>
<h2><span id="66-多种路由跳转方式">6.6 多种路由跳转方式</span></h2><p>前面讲的路由切换都是通过点击链接的方式切换的，不是链接也能够</p>
<h3><span id="661-效果">6.6.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/react-router-demo4.gif" alt="react-router demo4"></p>
<h3><span id="662-二级路由-viewsmessagejsx">6.6.2 二级路由: views/message.jsx</span></h3><pre><code class="jsx">import React from &#39;react&#39;
import {Link, Route} from &#39;react-router-dom&#39;
import MessageDetail from &quot;./message-detail&quot;

export default class Message extends React.Component {
  state = {
    messages: []
  }

  componentDidMount () {
    // 模拟发送ajax请求
    setTimeout(() =&gt; {
      const data = [
        {id: 1, title: &#39;Message001&#39;},
        {id: 3, title: &#39;Message003&#39;},
        {id: 6, title: &#39;Message006&#39;},
      ]
      this.setState({
        messages: data
      })
    }, 1000)
  }

  // props中有history属性，它由push等方法
  ShowDetail = (id) =&gt; {
    this.props.history.push(`/home/message/${id}`)
  }

  ShowDetail2 = (id) =&gt; {
    this.props.history.replace(`/home/message/${id}`)
  }

  back = () =&gt; {
    this.props.history.goBack()
  }

  forward = () =&gt; {
    this.props.history.goForward()
  }

  render () {
    const path = this.props.match.path

    return (
      &lt;div&gt;
        &lt;ul&gt;
          {
            this.state.messages.map((m, index) =&gt; {
              return (
                &lt;li key={index}&gt;
                  &lt;Link to={`${path}/${m.id}`}&gt;{m.title}&lt;/Link&gt;
                  &amp;nbsp;&amp;nbsp;&amp;nbsp;
                  &lt;button onClick={() =&gt; this.ShowDetail(m.id)}&gt;查看详情(push)&lt;/button&gt;&amp;nbsp;
                  &lt;button onClick={() =&gt; this.ShowDetail2(m.id)}&gt;查看详情(replace)&lt;/button&gt;
                &lt;/li&gt;
              )
            })
          }
        &lt;/ul&gt;
        &lt;p&gt;
          &lt;button onClick={this.back}&gt;返回&lt;/button&gt;&amp;nbsp;
          &lt;button onClick={this.forward}&gt;前进&lt;/button&gt;&amp;nbsp;
        &lt;/p&gt;
        &lt;hr/&gt;
        &lt;Route path={`${path}/:id`} component={MessageDetail}&gt;&lt;/Route&gt;
        {/*&lt;Route path={`home/message/meassagedetail/:id`} component={MessageDetail}&gt;&lt;/Route&gt;*/}
      &lt;/div&gt;
    )
  }
}</code></pre>
<p> 总结：</p>
<ul>
<li>路由器标签<ul>
<li><code>&lt;BrowserRouter&gt;</code>：BrowserRouter是react路由的容器</li>
<li><code>&lt;HashRouter&gt;</code>：多了一个#号</li>
</ul>
</li>
<li>路由<ul>
<li><code>&lt;Route&gt;</code>：Route的作用就是用来渲染路由匹配的组件。路由渲染有三种方式，每一种方式都可以传递match,location,history对象</li>
</ul>
</li>
<li><code>&lt;Redirect&gt;</code>：路由重定向</li>
<li>链接<ul>
<li><code>&lt;Link&gt;</code>：Link的作用和a标签类似</li>
<li><code>&lt;NavLink&gt;</code>：可以添加其他属性，例如activeClassName</li>
</ul>
</li>
<li><ul>
<li><code>&lt;Switch&gt;</code>：Switch组件内部可以是Route或者Redirect，只会渲染第一个匹配的元素</li>
</ul>
</li>
</ul>
<ul>
<li>this.props.<ul>
<li>match<ul>
<li>params</li>
</ul>
</li>
<li>history<ul>
<li>push()</li>
<li>replace()</li>
<li>goback()</li>
<li>goforward()</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><span id="第7章-react-ui">第7章 react-ui</span></h1><h2><span id="71-最流行的开源react-ui组件库">7.1 最流行的开源React UI组件库</span></h2><h3><span id="711-material-ui国外">7.1.1 material-ui(国外)</span></h3><p>1)     官网: <a href="http://www.material-ui.com/#/" target="_blank" rel="noopener">http://www.material-ui.com/#/</a></p>
<p>2)     github: <a href="https://github.com/callemall/material-ui" target="_blank" rel="noopener">https://github.com/callemall/material-ui</a></p>
<h3><span id="712-ant-design国内蚂蚁金服">7.1.2 ant-design(国内蚂蚁金服)</span></h3><p>1)     PC官网: <a href="https://ant.design/index-cn" target="_blank" rel="noopener">https://ant.design/index-cn</a></p>
<p>2)     移动官网: <a href="https://mobile.ant.design/index-cn" target="_blank" rel="noopener">https://mobile.ant.design/index-cn</a></p>
<p>3)     Github: <a href="https://github.com/ant-design/ant-design/" target="_blank" rel="noopener">https://github.com/ant-design/ant-design/</a></p>
<p>4)     Github: <a href="https://github.com/ant-design/ant-design-mobile/" target="_blank" rel="noopener">https://github.com/ant-design/ant-design-mobile/</a></p>
<h2><span id="72-ant-design-mobile使用入门">7.2 ant-design-mobile使用入门</span></h2><h3><span id="721-效果">7.2.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/antd-mobile.gif" alt="antd-mobile"></p>
<h3><span id="722-使用create-react-app创建react应用">7.2.2 使用create-react-app创建react应用</span></h3><pre><code class="bash">npm install create-react-app -g
create-react-app antm-demo
cd antm-demo
npm start</code></pre>
<h3><span id="723-搭建antd-mobile的基本开发环境">7.2.3 搭建antd-mobile的基本开发环境</span></h3><p>1)     下载</p>
<p><code>npm install antd-mobile --save</code></p>
<p>2)     <code>src/components/App.jsx</code></p>
<pre><code class="jsx">import React, {Component} from &#39;react&#39;
import {Button, Toast} from &#39;antd-mobile&#39;
export default class App extends Component {
  handleClick = () =&gt; {
    Toast.info(&#39;提交成功&#39;, 2)
  }

  render() {
    return (
        &lt;div&gt;
          &lt;Button type=&quot;primary&quot; onClick={this.handleClick}&gt;提交&lt;/Button&gt;
        &lt;/div&gt;   
      )
  }
  /* type值不同样式不同 */
}</code></pre>
<p>3)     <code>src/index.js</code></p>
<pre><code class="javascript">import React from &#39;react&#39;;
import {render} from &#39;react-dom&#39;
import App from &quot;./components/App&quot;
// 引入整体css
import &#39;antd-mobile/dist/antd-mobile.css&#39;

render(&lt;App /&gt;, document.getElementById(&#39;root&#39;))
</code></pre>
<p>4)     <code>index.html</code></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot; /&gt;
    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot;&gt;
    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot;&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot;&gt;
    &lt;title&gt;React ant design mobile&lt;/title&gt;
    &lt;script src=&quot;https://as.alipayobjects.com/g/component/fastclick/1.0.6/fastclick.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
      if (&#39;addEventListener&#39; in document) {
        document.addEventListener(&#39;DOMContentLoaded&#39;, function() {
          FastClick.attach(document.body);
        }, false);
      }
      if(!window.Promise) {
        document.writeln(&#39;&lt;script src=&quot;https://as.alipayobjects.com/g/component/es6-promise/3.2.2/es6-promise.min.js&quot;&#39;+&#39;&gt;&#39;+&#39;&lt;&#39;+&#39;/&#39;+&#39;script&gt;&#39;);
      }
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;noscript&gt;
      You need to enable JavaScript to run this app.
    &lt;/noscript&gt;
    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3><span id="724-实现按需打包组件jscss">7.2.4 实现按需打包(组件js/css)</span></h3><p>1)     下载依赖包</p>
<pre><code class="bash">yarn add react-app-rewired --dev
yarn add babel-plugin-import --dev</code></pre>
<p>2)     修改默认配置: </p>
<p>l package.json</p>
<pre><code class="json">{
  &quot;name&quot;: &quot;react_ui&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;private&quot;: true,
  &quot;dependencies&quot;: {
    &quot;antd-mobile&quot;: &quot;^2.1.3&quot;,
    &quot;react&quot;: &quot;^16.2.0&quot;,
    &quot;react-dom&quot;: &quot;^16.2.0&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;babel-plugin-import&quot;: &quot;^1.6.3&quot;,
    &quot;react-app-rewired&quot;: &quot;^1.4.0&quot;,
    &quot;react-scripts&quot;: &quot;1.0.17&quot;
  },
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;react-app-rewired start&quot;,
    &quot;build&quot;: &quot;react-app-rewired build&quot;,
    &quot;test&quot;: &quot;react-app-rewired test --env=jsdom&quot;
  }
}</code></pre>
<p>l config-overrides.js</p>
<pre><code class="javascript">const {injectBabelPlugin} = require(&#39;react-app-rewired&#39;);
module.exports = function override(config, env) {
  config = injectBabelPlugin([&#39;import&#39;, {libraryName: &#39;antd-mobile&#39;, style: &#39;css&#39;}], config);
  return config;
};</code></pre>
<p>3)     编码</p>
<pre><code class="jsx">// import &#39;antd-mobile/dist/antd-mobile.css&#39;
// import Button from &#39;antd-mobile/lib/button&#39;
// import Toast from &#39;antd-mobile/lib/toast&#39; 
import {Button, Toast} from &#39;antd-mobile&#39;</code></pre>
<h1><span id="第8章-redux">第8章 redux</span></h1><h2><span id="81-redux理解">8.1 redux理解</span></h2><h3><span id="811-学习文档">8.1.1 学习文档</span></h3><p>1)     英文文档: <a href="https://redux.js.org/" target="_blank" rel="noopener">https://redux.js.org/</a></p>
<p>2)     中文文档: <a href="http://www.redux.org.cn/" target="_blank" rel="noopener">http://www.redux.org.cn/</a></p>
<p>3)     Github: <a href="https://github.com/reactjs/redux" target="_blank" rel="noopener">https://github.com/reactjs/redux</a></p>
<h3><span id="812-redux是什么">8.1.2 redux是什么?</span></h3><p>1)     redux是一个独立专门用于做<strong>状态管理</strong>的<strong>JS库</strong>(不是react插件库)</p>
<p>2)     它可以用在react, angular, vue等项目中, 但基本与react配合使用</p>
<p>3)     作用: <strong>集中式管理</strong>react应用中多个组件共享的状态</p>
<h3><span id="813-redux工作流程">8.1.3 redux工作流程</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200715104120743.png" alt="redux"></p>
<h3><span id="814-什么情况下需要使用redux">8.1.4 什么情况下需要使用redux</span></h3><p>1)     总体原则: 能不用就不用, 如果不用比较吃力才考虑使用</p>
<p>2)     某个组件的状态，需要共享</p>
<p>3)     某个状态需要在任何地方都可以拿到</p>
<p>4)     一个组件需要改变全局状态</p>
<p>5)     一个组件需要改变另一个组件的状态</p>
<h2><span id="82-redux的核心api">8.2 redux的核心API</span></h2><h3><span id="821-createstore">8.2.1 <code>createStore()</code></span></h3><p>1)     作用:  创建包含指定reducer的store对象</p>
<p>2)     编码:</p>
<pre><code>import {createStore} from &#39;redux&#39;
import counter from &#39;./reducers/counter&#39;
const store = createStore(counter)</code></pre><h3><span id="822-store对象">8.2.2 <code>store</code>对象</span></h3><p>1)     作用: </p>
<p>redux库最核心的管理对象</p>
<p>2)     它内部维护着:</p>
<ul>
<li><p><code>state</code></p>
</li>
<li><p><code>reducer</code></p>
</li>
</ul>
<p>3)     核心方法:</p>
<ul>
<li><p><code>getState()</code></p>
</li>
<li><p><code>dispatch(action)</code></p>
</li>
<li><p><code>subscribe(listener)</code></p>
</li>
</ul>
<p>4)     编码:</p>
<pre><code>store.getState()
store.dispatch({type:&#39;INCREMENT&#39;, number})
store.subscribe(render)</code></pre><h3><span id="823-applymiddleware">8.2.3 <code>applyMiddleware()</code></span></h3><p>1)     作用:</p>
<p>应用上基于redux的中间件(插件库)</p>
<p>2)     编码:</p>
<pre><code>import {createStore, applyMiddleware} from &#39;redux&#39;
import thunk from &#39;redux-thunk&#39; // redux异步中间件
const store = createStore(
 counter,
 applyMiddleware(thunk) // 应用上异步中间件
)</code></pre><h3><span id="824-combinereducers">8.2.4 <code>combineReducers()</code></span></h3><p>1)     作用:</p>
<p>合并多个reducer函数</p>
<p>2)     编码:</p>
<pre><code>export default combineReducers({
 user,
 chatUser,
 chat
})</code></pre><h2><span id="83-redux的三个核心概念">8.3 redux的三个核心概念</span></h2><h3><span id="831-action">8.3.1 <code>action</code></span></h3><p>1)     标识要执行行为的对象</p>
<p>2)     包含2个方面的属性</p>
<p>a.     type: 标识属性, 值为字符串, 唯一, 必要属性</p>
<p>b.     xxx: 数据属性, 值类型任意, 可选属性</p>
<p>3)     例子:</p>
<pre><code>const action = {
    type: &#39;INCREMENT&#39;,
    data: 2
}</code></pre><p>4)     Action Creator(创建Action的工厂函数)</p>
<pre><code>const increment = (number) =&gt; ({type: &#39;INCREMENT&#39;, data: number})</code></pre><h3><span id="832-reducer">8.3.2 <code>reducer</code></span></h3><p>1)     根据老的state和action, 产生新的state的纯函数</p>
<p>2)     样例</p>
<pre><code>export default function counter(state = 0, action) {
  switch (action.type) {
     case &#39;INCREMENT&#39;:
        return state + action.data
     case &#39;DECREMENT&#39;:
        return state - action.data
     default:
        return state
  }
}</code></pre><p>3)     注意</p>
<p>a.     返回一个新的状态</p>
<p>b.     不要修改原来的状态</p>
<h3><span id="833-store">8.3.3 <code>store</code></span></h3><p>1)     将state,action与reducer联系在一起的对象</p>
<p>2)     如何得到此对象?</p>
<pre><code>import {createStore} from &#39;redux&#39;
import reducer from &#39;./reducers&#39;
const store = createStore(reducer)</code></pre><p>3)     此对象的功能?</p>
<ul>
<li><p>getState(): 得到state</p>
</li>
<li><p>dispatch(action): 分发action, 触发reducer调用, 产生新的state</p>
</li>
<li><p>subscribe(listener): 注册监听, 当产生了新的state时, 自动调用</p>
</li>
</ul>
<h2><span id="84-使用redux编写应用">8.4 使用redux编写应用</span></h2><h3><span id="841-效果">8.4.1 效果</span></h3><p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/redux.gif" alt="redux"></p>
<p>使用react实现</p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200715112226383.png" alt="app.jsx"></p>
<p><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" data-original="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/loader/orange.progress-bar-stripe-loader.svg" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/pic/illustration/image-20200715112313127.png" alt="index.js"></p>
<h3><span id="842-下载依赖包">8.4.2 下载依赖包</span></h3><p><code>npm install --save redux</code></p>
<h3><span id="843-srcreduxaction-typesjs">8.4.3 <code>src/redux/action-types.js</code></span></h3><pre><code class="javascript">/*
Action对象的type常量名称模块
 */
export const INCREMENT = &#39;increment&#39;
export const DECREMENT = &#39;decrement&#39;</code></pre>
<h3><span id="844-srcreduxactionsjs">8.4.4 <code>src/redux/actions.js</code></span></h3><pre><code class="javascript">/*
action creator模块
 */
import {INCREMENT, DECREMENT} from &#39;./action-types&#39;

export const increment = number =&gt; ({type: INCREMENT, number})
export const decrement = number =&gt; ({type: DECREMENT, number})</code></pre>
<h3><span id="845-srcreduxreducersjs">8.4.5 <code>src/redux/reducers.js</code></span></h3><pre><code class="javascript">/*
包含n个reducer函数的模块
根据老的state和指定action, 处理返回一个新的state
 */
import {INCREMENT, DECREMENT} from &#39;./action-types&#39;

export function counter(state = 0, action) {
  console.log(&#39;counter&#39;, state, action)
  switch (action.type) {
    case INCREMENT:
      return state + action.number
    case DECREMENT:
      return state - action.number
    default:
      return state
  }
}</code></pre>
<h3><span id="846-srccomponentsappjsx">8.4.6 <code>src/components/app.jsx</code></span></h3><pre><code class="jsx">/*
应用组件
 */
import React, {Component} from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import * as actions from &#39;../redux/actions&#39;
import { INCREMENT } from &#39;../redux/action-types&#39;

export default class App extends Component {

  static propTypes = {
    store: PropTypes.object.isRequired,
  }

  increment = () =&gt; {
    // 1.得到选择增加数量
    const number = this.refs.numSelect.value * 1
    // 2.调用store的方法更新状态
    this.props.store.dispatch(actions.increment(number))
  }

  decrement = () =&gt; {
    // 1.得到选择减小数量
    const number = this.refs.numSelect.value * 1
    // 2.调用store的方法更新状态
    this.props.store.dispatch(actions.decrement(number))
  }

  incrementIfOdd = () =&gt; {
    // 1.得到选择增加数量
    const number = this.refs.numSelect.value * 1
    // 2.得到原本的count状态
    let count = this.props.store.getState()
    // 判断，满足条件猜更新状态
    if (count % 2 === 1) {
      // 调用store的方法更新状态
      this.props.store.dispatch(actions.increment(number))
    }
  }

  incrementAsync = () =&gt; {
    // 1.得到选择增加数量
    const number = this.refs.numSelect.value * 1
    // 2.启动延时定时器，模拟异步
    setTimeout(() =&gt; {
      // 3.调用store的方法更新状态
      this.props.store.dispatch(actions.increment(number))
    }, 1000)
  }

  render() {
    const count = this.props.store.getState()
    return (
      &lt;div&gt;
        &lt;p&gt;
          click {count} times {&#39; &#39;}
        &lt;/p&gt;
        &lt;select ref=&quot;numSelect&quot;&gt;
          &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
          &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
          &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
        &lt;/select&gt;{&#39; &#39;}
        &lt;button onClick={this.increment}&gt;+&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.decrement}&gt;-&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.incrementIfOdd}&gt;increment if odd&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.incrementAsync}&gt;increment async&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h3><span id="847-srcindexjs">8.4.7 <code>src/index.js</code></span></h3><pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import {createStore} from &#39;redux&#39;

import App from &#39;./components/app&#39;
import {counter} from &#39;./redux/reducers&#39;

// 根据counter函数创建store对象
const store = createStore(counter) // 内部会第一次调用reduer函数，得到初始state

// 定义渲染根组件标签的函数
const render = () =&gt; {
  ReactDOM.render(
    &lt;App store={store}/&gt;,
    document.getElementById(&#39;root&#39;)
  )
}
// 初始化渲染
render()

// 注册(订阅)监听, 一旦状态发生改变, 自动重新渲染
store.subscribe(render)</code></pre>
<p>也可以把index.js中store提取出来</p>
<ul>
<li><code>src/redux/store.js</code></li>
</ul>
<pre><code class="javascript">import {createStore} from &#39;redux&#39;
import {counter} from &#39;./reducers&#39;
// 根据counter函数创建store对象
const store = createStore(counter)  // // 内部会第一次调用reduer函数，得到初始state

export default store</code></pre>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;

import App from &#39;./components/app&#39;
import store from &#39;./redux/store&#39;

// 定义渲染根组件标签的函数
const render = () =&gt; {
  ReactDOM.render(
    &lt;App store={store}/&gt;,
    document.getElementById(&#39;root&#39;)
  )
}
// 初始化渲染
render()

// 注册(订阅)监听, 一旦状态发生改变, 自动重新渲染
store.subscribe(render)</code></pre>
<h3><span id="848-问题">8.4.8 问题</span></h3><p>1)     redux与react组件的代码耦合度太高(大多数地方用到store)</p>
<p>2)     编码不够简洁</p>
<h2><span id="85-react-redux">8.5 react-redux</span></h2><h3><span id="851-理解">8.5.1 理解</span></h3><p>1)     一个<strong>react插件库</strong></p>
<p>2)     专门用来简化react应用中使用redux</p>
<h3><span id="852-react-redux将所有组件分成两大类">8.5.2 React-Redux将所有组件分成两大类</span></h3><p>1)     UI组件</p>
<p>​    a.     只负责 UI 的呈现，不带有任何业务逻辑</p>
<p>​    b.     通过props接收数据(一般数据和函数)</p>
<p>​    c.     不使用任何 Redux 的 API</p>
<p>​    d.     一般保存在<code>components</code>文件夹下</p>
<p>2)     容器组件</p>
<p>​    a.     负责管理数据和业务逻辑，不负责UI的呈现</p>
<p>​    b.     使用 Redux 的 API</p>
<p>​    c.     一般保存在<code>containers</code>文件夹下</p>
<h3><span id="853-相关api">8.5.3 相关API</span></h3><p>1)     <code>Provider</code></p>
<p>让所有组件都可以得到state数据</p>
<pre><code>&lt;Provider store={store}&gt;
   &lt;App /&gt;
&lt;/Provider&gt;</code></pre><p>2)     <code>connect()</code></p>
<p>用于包装 UI 组件生成容器组件</p>
<pre><code>import { connect } from &#39;react-redux&#39;
connect(
   mapStateToprops,
   mapDispatchToProps
)(Counter)</code></pre><p>3)     <code>mapStateToprops()</code></p>
<p>将外部的数据（即state对象）转换为UI组件的标签属性</p>
<pre><code>const mapStateToprops = function (state) {
  return {
   value: state
  }
}</code></pre><p>4)     <code>mapDispatchToProps()</code></p>
<p>将分发action的函数转换为UI组件的标签属性</p>
<p>简洁语法可以直接指定为actions对象或包含多个action方法的对象</p>
<h3><span id="854-使用react-redux">8.5.4 使用react-redux</span></h3><p>1)     下载依赖包</p>
<p><code>npm install --save react-redux</code></p>
<p>2)     <code>redux/action-types.js</code></p>
<p>不变</p>
<p>3)     <code>redux/actions.js</code></p>
<p>不变</p>
<p>4)     <code>redux/reducers.js</code></p>
<p>不变</p>
<p>5)     <code>components/counter.jsx</code></p>
<pre><code class="jsx">/*
UI组件: 不包含任何redux API
 */
import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;

export default class Counter extends React.Component {

  static propTypes = {
    count: PropTypes.number.isRequired,
    increment: PropTypes.func.isRequired,
    decrement: PropTypes.func.isRequired
  }

  increment = () =&gt; {
    const number = this.refs.numSelect.value * 1
    this.props.increment(number)
  }

  decrement = () =&gt; {
    const number = this.refs.numSelect.value * 1
    this.props.decrement(number)
  }

  incrementIfOdd = () =&gt; {
    const number = this.refs.numSelect.value * 1
    let count = this.props.count
    if (count % 2 === 1) {
      this.props.increment(number)
    }
  }

  incrementAsync = () =&gt; {
    const number = this.refs.numSelect.value * 1
    setTimeout(() =&gt; {
      this.props.increment(number)
    }, 1000)
  }

  render() {
    return (
      &lt;div&gt;
        &lt;p&gt;
          click {this.props.count} times {&#39; &#39;}
        &lt;/p&gt;
        &lt;select ref=&quot;numSelect&quot;&gt;
          &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
          &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
          &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
        &lt;/select&gt;{&#39; &#39;}
        &lt;button onClick={this.increment}&gt;+&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.decrement}&gt;-&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.incrementIfOdd}&gt;increment if odd&lt;/button&gt;
        {&#39; &#39;}
        &lt;button onClick={this.incrementAsync}&gt;increment async&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<p>6)     <code>containters/app.jsx</code></p>
<pre><code class="jsx">/*
包含Counter组件的容器组件
 */
import React from &#39;react&#39;
// 引入连接函数
import {connect} from &#39;react-redux&#39;
// 引入action函数
import {increment, decrement} from &#39;../redux/actions&#39;

import Counter from &#39;../components/counter&#39;

// 向外暴露连接App组件的包装组件
export default connect(
  state =&gt; ({count: state}),
  {increment, decrement}
)(Counter)</code></pre>
<p>7)     <code>store.js</code></p>
<p>不变</p>
<p>8)     <code>index.js</code></p>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import {Provider} from &#39;react-redux&#39;

import App from &#39;./containers/app&#39;
import store from &#39;./redux/store&#39;

// 定义渲染根组件标签的函数
ReactDOM.render(
  (
    &lt;Provider store={store}&gt;
      &lt;App/&gt;
    &lt;/Provider&gt;
  ),
  document.getElementById(&#39;root&#39;)
)</code></pre>
<h3><span id="855-问题">8.5.5 问题</span></h3><p>1)    redux默认是不能进行异步处理的, （前面的都是react实现的）</p>
<p>2)    应用中又需要在redux中执行异步任务(ajax, 定时器)</p>
<h2><span id="86-redux异步编程">8.6 redux异步编程</span></h2><h3><span id="861-下载redux插件异步中间件">8.6.1 下载redux插件(异步中间件)</span></h3><p><code>npm install --save redux-thunk</code></p>
<h3><span id="862-reduxstorejs">8.6.2 <code>redux/store.js</code></span></h3><pre><code class="javascript">import React from &#39;react&#39;
import {createStore, applyMiddleware} from &#39;redux&#39;
import thunk from &#39;redux-thunk&#39;
import {composeWithDevTools} from &#39;redux-devtools-extension&#39;

import reducers from &#39;./reducers&#39;

// 根据counter函数创建store对象
export default createStore(
  reducers,
  applyMiddleware(thunk) // 应用上异步中间件
)</code></pre>
<h3><span id="863-indexjs">8.6.3 <code>index.js</code></span></h3><pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import {Provider} from &#39;react-redux&#39;

import App from &#39;./containers/app&#39;
import store from &#39;./redux/store&#39;

// 定义渲染根组件标签的函数
ReactDOM.render(
  (
    &lt;Provider store={store}&gt;
      &lt;App/&gt;
    &lt;/Provider&gt;
  ),
  document.getElementById(&#39;root&#39;)
)</code></pre>
<h3><span id="864-reduxactionsjs">8.6.4 <code>redux/actions.js</code></span></h3><pre><code class="jsx">/*
action creator模块
 */
import {
  INCREMENT,
  DECREMENT
} from &#39;./action-types&#39;

export const increment = number =&gt; ({type: INCREMENT, number})

export const decrement = number =&gt; ({type: DECREMENT, number})

// 异步action creator(返回一个函数)
export const incrementAsync = number =&gt; {
  return dispatch =&gt; { // 要在这返回一个函数，得在store中应用上异步中间件
    // 异步的代码
    setTimeout(() =&gt; {
      // 1s之后才分发一个增加的action
      dispatch(increment(number))
    }, 1000)
  }
}</code></pre>
<p> 同步的action都返回一个对象</p>
<p>异步的action返回的是一个函数</p>
<h3><span id="865-componentscounterjsx">8.6.5 <code>components/counter.jsx</code></span></h3><pre><code class="jsx">/*
包含Counter组件的容器组件
 */
import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;

export default class Counter extends React.Component {

  static propTypes = {
    count: PropTypes.number.isRequired,
    increment: PropTypes.func.isRequired,
    decrement: PropTypes.func.isRequired
  }

  increment = () =&gt; {
    const number = this.refs.numSelect.value*1
    this.props.increment(number)
  }

  decrement = () =&gt; {
    const number = this.refs.numSelect.value*1
    this.props.decrement(number)
  }

  incrementIfOdd = () =&gt; {
    const number = this.refs.numSelect.value*1
    let count = this.props.count
    if(count%2===1) {
      this.props.increment(number)
    }
  }

  // Async
  incrementAsync = () =&gt; {
    const number = this.refs.numSelect.value*1
    this.props.incrementAsync(number)
  }

  render () {
    return (
      &lt;div&gt;
        &lt;p&gt;
          click {this.props.count} times {&#39; &#39;}
        &lt;/p&gt;
        &lt;select ref=&quot;numSelect&quot;&gt;
          &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
          &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
          &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
        &lt;/select&gt;{&#39; &#39;}
        &lt;button onClick={this.increment}&gt;+&lt;/button&gt;{&#39; &#39;}
        &lt;button onClick={this.decrement}&gt;-&lt;/button&gt;{&#39; &#39;}
        &lt;button onClick={this.incrementIfOdd}&gt;increment if odd&lt;/button&gt;{&#39; &#39;}
        &lt;button onClick={this.incrementAsync}&gt;increment async&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
<h3><span id="866-containersappjsx">8.6.6 <code>containers/app.jsx</code></span></h3><pre><code class="jsx">/*
包含Counter组件的容器组件
 */
import React from &#39;react&#39;
// 引入连接函数
import {connect} from &#39;react-redux&#39;
// 引入action函数
import {increment, decrement, incrementAsync} from &#39;../redux/actions&#39;
import Counter from &#39;../components/counter&#39;

// 向外暴露连接App组件的包装组件
export default connect(
  state =&gt; ({count: state.counter}),
  {increment, decrement, incrementAsync}
)(Counter)
</code></pre>
<p><code>redux/action-types.js</code></p>
<pre><code class="javascript">export const INCREMENT = &#39;increment&#39;
export const DECREMENT = &#39;decrement&#39;</code></pre>
<h2><span id="87-使用上redux调试工具">8.7 使用上redux调试工具</span></h2><h3><span id="871-安装chrome浏览器插件">8.7.1 安装chrome浏览器插件</span></h3><p><a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">Redux DevTools</a></p>
<h3><span id="872-下载工具依赖包">8.7.2 下载工具依赖包</span></h3><pre><code>npm install --save-dev redux-devtools-extension</code></pre><h3><span id="873-编码">8.7.3 编码</span></h3><pre><code class="javascript">import { composeWithDevTools } from &#39;redux-devtools-extension&#39;
const store = createStore(  counter,  composeWithDevTools(applyMiddleware(thunk))
)</code></pre>
<h2><span id="88-redux版评论">8.8 Redux版评论</span></h2><h3><span id="881-需求">8.8.1 需求</span></h3><p>使用react_redux和中间件实现异步评论功能</p>
<h3><span id="882-安装">8.8.2 安装</span></h3><pre><code class="bash">……
npm install --save react-redux
npm install --save redux-thunk
npm install --save-dev redux-devtools-extension</code></pre>
<h3><span id="883-目录结构">8.8.3 目录结构</span></h3><blockquote>
<ul>
<li>REACT_REDUX<ul>
<li>public<ul>
<li>css<ul>
<li>bootstrap.css</li>
</ul>
</li>
<li>index.html</li>
</ul>
</li>
<li>src<ul>
<li>components<ul>
<li>app<ul>
<li>app.jsx</li>
</ul>
</li>
<li>comment-add<ul>
<li>comment-add.jsx</li>
</ul>
</li>
<li>comment-item<ul>
<li>comment-item.jsx</li>
<li>comment-item.css</li>
</ul>
</li>
<li>comment-list<ul>
<li>comment-list.jsx</li>
<li>comment-list.css</li>
</ul>
</li>
</ul>
</li>
<li>redux<ul>
<li>action-types.js</li>
<li>actions.js</li>
<li>reducers.js</li>
<li>store.js</li>
</ul>
</li>
<li>index.js</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h3><span id="884-文件内容">8.8.4 文件内容</span></h3><ul>
<li><code>public/index.html</code></li>
</ul>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;
    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot;&gt;
    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot;&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot;&gt;
    &lt;title&gt;React App&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/bootstrap.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;noscript&gt;
      You need to enable JavaScript to run this app.
    &lt;/noscript&gt;
    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<ul>
<li><code>src/index.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;
import {Provider} from &#39;react-redux&#39;

import App from &#39;./components/app/app&#39;
import store from &#39;./redux/store&#39;

// 定义渲染根组件标签的函数
ReactDOM.render(
  (
    &lt;Provider store={store}&gt;
      &lt;App/&gt;
    &lt;/Provider&gt;
  ),
  document.getElementById(&#39;root&#39;)
)
</code></pre>
<ul>
<li><code>src/componets/app/app.jsx</code></li>
</ul>
<pre><code class="jsx">import React from &#39;react&#39;
import {connect} from &#39;react-redux&#39;
import CommentAdd from &#39;../comment-add/comment-add&#39;
import CommentList from &#39;../comment-list/comment-list&#39;
import {getComments} from &#39;../../redux/actions&#39;

class App extends React.Component {

  componentDidMount() {
    //模拟异步获取数据
    this.props.getComments()
  }

  render() {
    return (
      &lt;div&gt;
        &lt;header className=&quot;site-header jumbotron&quot;&gt;
          &lt;div className=&quot;container&quot;&gt;
            &lt;div className=&quot;row&quot;&gt;
              &lt;div className=&quot;col-xs-12&quot;&gt;
                &lt;h1&gt;请发表对React的评论&lt;/h1&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/header&gt;
        &lt;div className=&quot;container&quot;&gt;
          &lt;CommentAdd/&gt;
          &lt;CommentList/&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}

export default connect(
  null,
  {getComments}
)(App)</code></pre>
<ul>
<li><code>src/componets/comment-add/comment-add.jsx</code><pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import {connect} from &#39;react-redux&#39;
import {addComment} from &#39;../../redux/actions&#39;
class CommentAdd extends React.Component {
constructor (props) {
  super(props)
  this.state = {
    username: &#39;&#39;,
    content: &#39;&#39;
  }
  this.addComment = this.addComment.bind(this)
  this.changeUsername = this.changeUsername.bind(this)
  this.changeContent = this.changeContent.bind(this)
}
addComment () {
  // 根据输入的数据创建评论对象
  let { username, content } = this.state
  let comment = { username, content }
  // 添加到comments中, 更新state
  this.props.addComment(comment)
  // 清除输入的数据
  this.setState({
    username: &#39;&#39;,
    content: &#39;&#39;
  })
}
changeUsername (event) {
  this.setState({
    username: event.target.value
  })
}
changeContent (event) {
  this.setState({
    content: event.target.value
  })
}
render () {
  return (
    &lt;div className=&quot;col-md-4&quot;&gt;
      &lt;form className=&quot;form-horizontal&quot;&gt;
        &lt;div className=&quot;form-group&quot;&gt;
          &lt;label&gt;用户名&lt;/label&gt;
          &lt;input type=&quot;text&quot; className=&quot;form-control&quot; placeholder=&quot;用户名&quot;
                 value={this.state.username} onChange={this.changeUsername}/&gt;
        &lt;/div&gt;
        &lt;div className=&quot;form-group&quot;&gt;
          &lt;label&gt;评论内容&lt;/label&gt;
          &lt;textarea className=&quot;form-control&quot; rows=&quot;6&quot; placeholder=&quot;评论内容&quot;
                    value={this.state.content} onChange={this.changeContent}&gt;&lt;/textarea&gt;
        &lt;/div&gt;
        &lt;div className=&quot;form-group&quot;&gt;
          &lt;div className=&quot;col-sm-offset-2 col-sm-10&quot;&gt;
            &lt;button type=&quot;button&quot; className=&quot;btn btn-default pull-right&quot; onClick={this.addComment}&gt;提交&lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  )
}
}
CommentAdd.propTypes = {
addComment: PropTypes.func.isRequired
}
export default connect(
null,
{addComment}
)(CommentAdd)</code></pre>
</li>
</ul>
<ul>
<li><code>src/componets/comment-item/comment-item.jsx</code><pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import {connect} from &#39;react-redux&#39;
import &#39;./commentItem.css&#39;
import {deleteComment} from &#39;../../redux/actions&#39;
class CommentItem extends React.Component {
constructor(props) {
  super(props)
}
deleteComment = () =&gt; {
  let username = this.props.comment.username
  if (window.confirm(`确定删除${username}的评论吗?`)) {
    this.props.deleteComment(this.props.index)
  }
}
render() {
  let comment = this.props.comment
  return (
    &lt;li className=&quot;list-group-item&quot;&gt;
      &lt;div className=&quot;handle&quot;&gt;
        &lt;a href=&quot;javascript:&quot; onClick={this.deleteComment}&gt;删除&lt;/a&gt;
      &lt;/div&gt;
      &lt;p className=&quot;user&quot;&gt;&lt;span&gt;{comment.username}&lt;/span&gt;&lt;span&gt;说:&lt;/span&gt;&lt;/p&gt;
      &lt;p className=&quot;centence&quot;&gt;{comment.content}&lt;/p&gt;
    &lt;/li&gt;
  )
}
}
CommentItem.propTypes = {
comment: PropTypes.object.isRequired,
index: PropTypes.number.isRequired,
deleteComment: PropTypes.func.isRequired
}
export default connect(
null,
{deleteComment}
)(CommentItem)
</code></pre>
</li>
</ul>
<pre><code>






- `src/componets/comment-item/comment-item.css`
```css
li {
  transition: .5s;
  overflow: hidden;
}
.handle {
  width: 40px;
  border: 1px solid #ccc;
  background: #fff;
  position: absolute;
  right: 10px;
  top: 1px;
  text-align: center;
}
.handle a {
  display: block;
  text-decoration: none;
}
.list-group-item .centence {
  padding: 0px 50px;
}
.user {
  font-size: 22px;
}</code></pre><ul>
<li><code>src/componets/comment-list/comment-list.jsx</code><pre><code class="jsx">import React from &#39;react&#39;
import PropTypes from &#39;prop-types&#39;
import {connect} from &#39;react-redux&#39;
import CommentItem from &#39;../comment-item/comment-item&#39;
import &#39;./commentList.css&#39;
class CommentList extends React.Component {
render () {
  let comments = this.props.comments
  let display = comments.length &gt; 0 ? &#39;none&#39; : &#39;block&#39;
  return (
    &lt;div className=&quot;col-md-8&quot;&gt;
      &lt;h3 className=&quot;reply&quot;&gt;评论回复：&lt;/h3&gt;
      &lt;h2 style=双大括号 display: display 双大括号&gt;暂无评论，点击左侧添加评论！！！&lt;/h2&gt;
      &lt;ul className=&quot;list-group&quot;&gt;
        {
          comments.map((comment, index) =&gt; {
            console.log(comment)
            return &lt;CommentItem comment={comment} key={index} index={index}/&gt;
          })
        }
      &lt;/ul&gt;
    &lt;/div&gt;
  )
}
}
CommentList.propTypes = {
comments: PropTypes.array.isRequired,
}
export default connect(
state =&gt; ({comments: state.comments})
)(CommentList)</code></pre>
</li>
</ul>
<ul>
<li><code>src/componets/comment-list/comment-list.css</code><pre><code class="css">.reply {
margin-top: 0px;
}</code></pre>
</li>
</ul>
<ul>
<li><code>redux/action-types.js</code><pre><code class="javascript">export const ADD_COMMENT = &#39;ADD_COMMENT&#39;
export const DELETE_COMMENT = &#39;DELETE_COMMENT&#39;
export const RECEIVE_COMMENTS = &#39;RECEIVE_COMMENTS&#39;</code></pre>
</li>
</ul>
<ul>
<li><code>redux/actions.js</code><pre><code class="javascript">import {
ADD_COMMENT,
DELETE_COMMENT,
RECEIVE_COMMENTS
} from &#39;./action-types&#39;
export const addComment = (comment) =&gt; ({type: ADD_COMMENT, data: comment})
export const deleteComment = (index) =&gt; ({type: DELETE_COMMENT, data: index})
const receiveComments = (comments) =&gt; ({type: RECEIVE_COMMENTS, data: comments})
export const getComments = () =&gt; {
return dispatch =&gt; {
  setTimeout(() =&gt; {
    const comments = [
      {
        username: &quot;Tom&quot;,
        content: &quot;ReactJS好难啊!&quot;,
        id: Date.now()
      },
      {
        username: &quot;JACK&quot;,
        content: &quot;ReactJS还不错!&quot;,
        id: Date.now() + 1
      }
    ]
    dispatch(receiveComments(comments))
  }, 1000)
}
}</code></pre>
</li>
</ul>
<ul>
<li><code>redux/reducers.js</code></li>
</ul>
<pre><code class="javascript">import {combineReducers} from &#39;redux&#39;
import {
  ADD_COMMENT,
  DELETE_COMMENT,
  RECEIVE_COMMENTS
} from &#39;./action-types&#39;
const initComments = []
function comments(state = initComments, action) {
  switch (action.type) {
    case ADD_COMMENT:
      return [...state, action.data]
    case DELETE_COMMENT:
      return state.filter((c, index) =&gt; index !== action.data)
    case RECEIVE_COMMENTS:
      return action.data
    default:
      return state
  }
}
export default combineReducers({
  comments
})</code></pre>
<ul>
<li><code>redux/store.js</code></li>
</ul>
<pre><code class="javascript">import React from &#39;react&#39;
import {createStore, applyMiddleware} from &#39;redux&#39;
import thunk from &#39;redux-thunk&#39;
import {composeWithDevTools} from &#39;redux-devtools-extension&#39;
import reducers from &#39;./reducers&#39;
// 根据counter函数创建store对象
export default createStore(
  reducers,
  composeWithDevTools(applyMiddleware(thunk)) // 应用上异步中间件
)</code></pre>
<h2><span id="89-相关重要知识-纯函数和高阶函数">8.9 相关重要知识: 纯函数和高阶函数</span></h2><h3><span id="891-纯函数">8.9.1 纯函数</span></h3><p>1)     一类特别的函数: 只要是同样的输入，必定得到同样的输出</p>
<p>2)    必须遵守以下一些约束 </p>
<p>a.    不得改写参数</p>
<p>b.    不能调用系统 I/O 的API</p>
<p>c.    能调用Date.now()或者Math.random()等不纯的方法 </p>
<p>3)     reducer函数必须是一个纯函数</p>
<h3><span id="892-高阶函数">8.9.2 高阶函数</span></h3><p>4)     理解: 一类特别的函数</p>
<p>a.     情况1: 参数是函数</p>
<p>b.     情况2: 返回是函数</p>
<p>5)         常见的高阶函数: </p>
<p>a.     定时器设置函数</p>
<p>b.     数组的map()/filter()/reduce()/find()/bind()</p>
<p>c.     react-redux中的connect函数</p>
<p>6)         作用: </p>
<p>​     能实现更加动态, 更加可扩展的功能</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
      
      
       
    </div>
</article>




<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>

<!-- 
<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>React全家桶(技术栈)学习笔记</p>
    <p><span class="copy-title">字数:</span><span class="post-count">19.1k</span></p>
    <p><span class="copy-title">本文作者:</span><a  title="Luwang">Luwang</a></p>
    <p><span class="copy-title">发布时间:</span>2020-07-12, 16:54:50</p>
    <p><span class="copy-title">最后更新:</span>2020-07-15, 18:26:58</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/2020/07/12/React/" title="React全家桶(技术栈)学习笔记">https://wallleap.cn/2020/07/12/React/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="CC BY-NC-SA 4.0 International" target = "_blank">&#34;署名-非商用-相同方式共享 4.0&#34;</a> 转载请保留原文链接及作者。
    </p>
</div>
 -->

    <div class="article_copyright">
        <p><span class="copy-title">文章标题:</span>React全家桶(技术栈)学习笔记</p>
        <p><span class="copy-title">文章字数:</span><span class="post-count">19.1k</span></p>
        <p><span class="copy-title">本文作者:</span><a  title="Luwang">Luwang</a></p>
        <p><span class="copy-title">发布时间:</span>2020-07-12, 16:54:50</p>
        <p><span class="copy-title">最后更新:</span>2020-07-15, 18:26:58</p>
        <span class="copy-title">原始链接:</span><a class="post-url" href="/2020/07/12/React/" title="React全家桶(技术栈)学习笔记">https://wallleap.cn/2020/07/12/React/</a>
        <p>
            <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>
    
    
    

    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: 'c34c4610e9454bf73702',
            clientSecret: 'bccb16d6af22e10394fcf4fc3bb916f541b0492c',
            repo: 'comment',
            owner: 'wallleap',
            admin: ['wallleap'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>







    </div>
    <div class="copyright">
        <!-- <p class="footer-entry"><span class="miit">
                <img src="/img/gov.png" title="中华人民共和国工业和信息化部">
                <a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">赣ICP备20000895号</a>
        </span>
    
    ©2019-2020 wallleap
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p> -->



<div id="colophon" class="site-footer" role="contentinfo" style="background-color: transparent;font-size: 12px;">
    <div class="site-info">
        <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
        <a style="color: #b9b9b9;" href="https://www.jinrishici.com/" target="_blank" rel="noopener"><span id="poem_sentence" style="text-align: left;"></span>
        <span id="poem_info" style="text-align: right;"></span></a>
        <script type="text/javascript">
          jinrishici.load(function(result) {
            var sentence = document.querySelector("#poem_sentence")
            var info = document.querySelector("#poem_info")
            sentence.innerHTML = result.data.content
            info.innerHTML = '【' + result.data.origin.dynasty + '】' + result.data.origin.author + '《' + result.data.origin.title + '》'
          });
        </script>
      <!-- // 文字滚动 -->
      
      <!-- <div id="binft" style="text-align:center; color: #666666;"></div>
      <script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/textScroll.js"></script> -->
     
      <div class="footertext">
        <div class="img-preload">
          <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/other/wordpress-rotating-ball-o.svg">
          <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/other/disqus-preloader.svg">
        </div>
    
          
  
        <p style="color: #666666;"><a href="#" style="color: #b9b9b9;">Blog wallleap</a>
          , Copyright &copy; 2019-2020 
          by Luwang All Rights Reserved.</p>
      </div>
      <!-- <div class="footer-device">
      <p style="font-family: 'Ubuntu', sans-serif;">
          <i class="fa fa-fire" aria-hidden="true"></i>
          <span style="color: #666;">
            Theme <a style="color: #b9b9b9;" href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank" style="color: #b9b9b9; text-decoration: underline dotted rgba(0, 0, 0, .1);">3-hexo</a>
             <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> 
             by <a href="https://yelog.org/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">yelog</a>
             , Powered by <a style="color: #b9b9b9;" href="https://hexo.io/" target="_blank">Hexo</a>
             , Hosted by <a style="color: #b9b9b9;" href="https://coding.net/" target="_blank">Coding Pages</a>
              & <a style="color: #b9b9b9;" href="https://github.com/" target="_blank">Github Pages</a>
          </span>
        </p>
      </div> -->
  
      
      <a style="color: #b9b9b9;" href="http://beian.miit.gov.cn/" target="_blank">	
        <img src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/logo/ICP.png" style="vertical-align: text-bottom; width: 17px;" />
        赣ICP备20000895号-1
      </a>
      <a href="https://icp.gov.moe" target="_blank"><img style="width:17px;margin-bottom: -2px;" src="https://icp.gov.moe/images/ico64.png">萌ICP备 </a><a href="https://icp.gov.moe/?keyword=20200895" target="_blank"> 20200895号</a>
      
      <span style="color: #666;padding-left: 20px;">
        <i class="fa fa-clock-o" aria-hidden="true"></i>
        <span id="time" align="center">载入时间中...</span>
        <script>
          var now = new Date(); 
          function createtime() { 
            var grt= new Date("08/08/2019 17:38:00");//在此处修改你的建站时间
            now.setTime(now.getTime()+250); 
            days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
            hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
            if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
            mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
            seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
            snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
            document.getElementById("time").innerHTML = "小站已经苟活 "+dnum+" 天 "+hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
         } 
         setInterval("createtime()",250);
        </script>
        <!-- <span style="color:#666;padding-left: 20px;"><i class="fa fa-eye" aria-hidden="true"></i>访问量: <span class="site_pv"></span>次</span> -->
        <span style="padding-left: 20px; color:#666;"><i class="fa fa-cog fa-spin" aria-hidden="true"></i></span>
        <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1278079074'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1278079074%26online%3D2' type='text/javascript'%3E%3C/script%3E"));</script>
        
      </span>
      <div style="text-align:center; padding-top: 20px;">
        <div class="github-badge">
          <a rel="license" href="https://hexo.io/" target="_blank" title="由Hexo强力驱动">
          <span class="badge-subject"><i class="fa fa-fire" aria-hidden="true"></i> Powered</span><span class="badge-value bg-blue">Hexo</span></a>
        </div>
        <div class="github-badge">
          <a rel="license" href="https://github.io/" target="_blank" title="静态网页托管于Github">
          <span class="badge-subject">Hosted</span><span class="badge-value bg-brightgreen"><i class="fa fa-github" aria-hidden="true"></i> Github</span></a>
        </div>
        <div class="github-badge">
            <a rel="license" href="https://coding.net/" target="_blank" title="静态网页托管于CODING">
            <span class="badge-subject"><i class="fa fa-heart" aria-hidden="true"></i> Hosted</span>
            <span class="badge-value bg-gray">CODING</span></a>
          </div>
        <div class="github-badge">
            <a rel="license" href="https://www.jsdelivr.com/" target="_blank" title="jsDelivr提供CDN加速服务">
            <span class="badge-subject"><i class="fa fa-firefox fa-spin" aria-hidden="true"></i> CND</span><span class="badge-value bg-cdn">Github&jsDelivr</span></a>
        </div>
        <div class="github-badge">
            <a rel="license" href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank" title="站点使用 Sakura 主题，作者：Mashiro & Hojun">
            <span class="badge-subject"><i class="fa fa-themeisle" aria-hidden="true"></i> Theme</span><span class="badge-value bg-theme">3-blog</span></a>
        </div>
        <div class="github-badge">
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="本站点采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可">
            <span class="badge-subject"><i class="fa fa-copyright"></i></span><span class="badge-value bg-lightgrey">BY-NC-SA 4.0</span></a>
        </div>
        <div class="github-badge">
          <span class="badge-subject"><i class="fa fa-user" aria-hidden="true"></i> UV</span>
          <span  class="site_uv badge-value bg-orange""></span>
        </div>
        <div class="github-badge">
          <span class="badge-subject"><i class="fa fa-eye" aria-hidden="true"></i> PV</span>
          <span class="site_pv badge-value bg-brightgreen"></span>
        </div>
      </div>  
  
      <div class="site-img" style="margin-top:20px;">
        <a href="#"><img width="350px" src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/img/wechat/wallleap.png"></a>
        <!-- <a href="https://www.google.com/search?sxsrf=ACYBGNT2ZrasjGUBG6Nj1_Xye1N67lpsrA%3A1573382249794&source=hp&ei=aejHXey4LYHu-gSQlLqgDg&q=site%3Awallleap.cn&oq=site%3Awallleap.cn&gs_l=psy-ab.3...32142.36345..36698...0.0..4.1018.9243.3-5j2j5j3j1......0....1..gws-wiz.....10..35i362i39j35i39j0.9jvLRXQs6zM&ved=0ahUKEwiskd7Qud_lAhUBt54KHRCKDuQQ4dUDCAY&uact=5" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/Google.svg" width="100px" height="80px"></a>
        <a href="https://www.baidu.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/baidu.png" width="100px" height="80px"></a>
        <a href="https://www.jsdelivr.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/JsDelivr_Logo.svg" width="100px" height="80px"></a>
        <a href="https://github.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/github-logo.jpg" width="100px" height="80px"></a>
        <a href="https://aliyun.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/aliyun-logo.png" width="100px" height="80px"></a>
        <a href="https://dev.tencent.com/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/wallleap/cdn/img/logo/tencentyun-logo.jpg" width="100px" height="80px"></a>   -->
      </div>
      <!-- <div>
        <a href="https://hexo.io" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Powered-Hexo-blue" alt="Hexo"></a>
        <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Theme-3--hexo-%232c2735" alt="3-blog"></a>
        <a href="https://github.com/" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Hosted-GitHub-%2324292e" alt="GitHub"></a>
        <a href="https://coding.net/" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Hosted-CODING-%23141a3f" alt="CODING"></a>
        <a href="https://www.jsdelivr.com/" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/CDN-jsDelivr-%23ee3232" alt="jsDelivr"></a>
      </div> -->
    </div><!-- .site-info -->
  </div>
    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


<script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'photoSwipe';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        

        // PhotoSwipe
        $('article').each(function(i){
            $(this).find('img').each(function(){
                if ($(this).closest('figure').hasClass('article-gallery-img')) {
                    return;
                }
                var alt = this.alt;
                $(this)
                    .wrap('<figure class="article-gallery-img" itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject"></figure>')
                    .wrap('<a href="' + this.src + '" title="' + alt + '"></a>');
                $(this).after('<div class="img_alt"><span>' + (alt || '') + '</span></div>');
            });
        });

        var pswpElement = document.querySelectorAll('.pswp')[0];
        if (pswpElement) {
            var gallerySelector = '.article-gallery, article';

            var initPhotoSwipeFromDOM = function(gallerySelector) {

                // parse slide data (url, title, size ...) from DOM elements
                // (children of gallerySelector)
                var parseThumbnailElements = function(el) {
                    var thumbElements = $(el).find('figure.article-gallery-img').toArray(),
                        numNodes = thumbElements.length,
                        items = [],
                        figureEl,
                        linkEl,
                        size,
                        imgEl,
                        item;

                    for (var i = 0; i < numNodes; i++) {

                        figureEl = thumbElements[i]; // <figure> element

                        // include only element nodes
                        if (figureEl.nodeType !== 1) {
                            continue;
                        }

                        linkEl = figureEl.children[0]; // <a> element
                        imgEl = linkEl.children[0]; // <img>

                        size = linkEl.getAttribute('data-size');
                        size = size && size.split('x');

                        // create slide object
                        item = {
                            src: linkEl.getAttribute('href'),
                            w: size && parseInt(size[0], 10) || imgEl.width,
                            h: size && parseInt(size[1], 10) || imgEl.height
                        };

                        if (figureEl.children.length > 1) {
                            // <figcaption> content
                            item.title = figureEl.children[1].innerHTML;
                        }

                        if (linkEl.children.length > 0) {
                            // <img> thumbnail element, retrieving thumbnail url
                            item.msrc = linkEl.children[0].getAttribute('src');
                        }

                        item.el = figureEl; // save link to element for getThumbBoundsFn
                        items.push(item);
                    }

                    return items;
                };

                // find nearest parent element
                var closest = function closest(el, fn) {
                    return el && (fn(el) ? el : closest(el.parentNode, fn));
                };

                // triggers when user clicks on thumbnail
                var onThumbnailsClick = function(e) {
                    e = e || window.event;

                    var eTarget = e.target || e.srcElement;

                    // find root element of slide
                    var clickedListItem = closest(eTarget, function(el) {
                        return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                    });

                    if (!clickedListItem) {
                        return;
                    }

                    if (e.preventDefault) {
                        e.preventDefault();
                    } else {
                        e.returnValue = false;
                    }

                    // find index of clicked item by looping through all child nodes
                    // alternatively, you may define index via data- attribute
                    var clickedGallery = $(clickedListItem).closest(gallerySelector)[0],
                        childNodes = $(clickedGallery).find('figure.article-gallery-img').toArray(),
                        numChildNodes = childNodes.length,
                        nodeIndex = 0,
                        index;

                    for (var i = 0; i < numChildNodes; i++) {
                        if (childNodes[i].nodeType !== 1) {
                            continue;
                        }

                        if (childNodes[i] === clickedListItem) {
                            index = nodeIndex;
                            break;
                        }
                        nodeIndex++;
                    }



                    if (index >= 0) {
                        // open PhotoSwipe if valid index found
                        openPhotoSwipe(index, clickedGallery);
                    }
                    return false;
                };

                // parse picture index and gallery index from URL (#&pid=1&gid=2)
                var photoswipeParseHash = function() {
                    var hash = window.location.hash.substring(1),
                        params = {};

                    if (hash.length < 5) {
                        return params;
                    }

                    var vars = hash.split('&');
                    for (var i = 0; i < vars.length; i++) {
                        if (!vars[i]) {
                            continue;
                        }
                        var pair = vars[i].split('=');
                        if (pair.length < 2) {
                            continue;
                        }
                        params[pair[0]] = pair[1];
                    }

                    if (params.gid) {
                        params.gid = parseInt(params.gid, 10);
                    }

                    return params;
                };

                var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                    var pswpElement = document.querySelectorAll('.pswp')[0],
                        gallery,
                        options,
                        items;

                    items = parseThumbnailElements(galleryElement);

                    // define options (if needed)
                    options = {

                        // define gallery index (for URL)
                        galleryUID: galleryElement.getAttribute('data-pswp-uid'),

                        getThumbBoundsFn: function(index) {
                            // See Options -> getThumbBoundsFn section of documentation for more info
                            var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                                rect = thumbnail.getBoundingClientRect();

                            return {
                                x: rect.left,
                                y: rect.top + pageYScroll,
                                w: rect.width
                            };
                        }
                    };

                    // PhotoSwipe opened from URL
                    if (fromURL) {
                        if (options.galleryPIDs) {
                            // parse real index when custom PIDs are used
                            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url
                            for (var j = 0; j < items.length; j++) {
                                if (items[j].pid == index) {
                                    options.index = j;
                                    break;
                                }
                            }
                        } else {
                            // in URL indexes start from 1
                            options.index = parseInt(index, 10) - 1;
                        }
                    } else {
                        options.index = parseInt(index, 10);
                    }

                    // exit if index not found
                    if (isNaN(options.index)) {
                        return;
                    }

                    if (disableAnimation) {
                        options.showAnimationDuration = 0;
                    }

                    // Pass data to PhotoSwipe and initialize it
                    gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);

                    gallery.listen('imageLoadComplete', function(index, item) {
                        var linkEl = item.el.children[0];
                        var img = item.container.children[0];
                        if (!linkEl.getAttribute('data-size')) {
                            linkEl.setAttribute('data-size', img.naturalWidth + 'x' + img.naturalHeight);
                            item.w = img.naturalWidth;
                            item.h = img.naturalHeight;
                            gallery.invalidateCurrItems();
                            gallery.updateSize(true);
                        }
                    });

                    gallery.init();
                };

                // loop through all gallery elements and bind events
                var galleryElements = document.querySelectorAll(gallerySelector);

                for (var i = 0, l = galleryElements.length; i < l; i++) {
                    galleryElements[i].setAttribute('data-pswp-uid', i + 1);
                    galleryElements[i].onclick = onThumbnailsClick;
                }

                // Parse URL and open gallery if it contains #&pid=3&gid=1
                var hashData = photoswipeParseHash();
                if (hashData.pid && hashData.gid) {
                    openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);
                }
            };

            // execute above function
            initPhotoSwipeFromDOM(gallerySelector);
        }
        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    
    .nav-right nav a.hover > span{
        color: #03a788 !important;
    }
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element, as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. -->
        <!-- don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>








<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<div class="aplayer"

    data-id="2162711186"

    data-server="netease"

    data-type="playlist"

    data-fixed="true"

    data-autoplay="false"

    data-loop="all"

    data-order="random"

    data-preload="auto"

    data-volume="0.7"

    data-mutex="true"

>
</div>
<script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>

<script>
(function() {

  var arr = new Array();
  var $tags = $('.post-tags').children('a');
  $tags.each(function() {
    arr.push($(this).html())
  })
  if (arr.indexOf("图集") !== -1) {

    $('.hj_img').each(function() {
      $(this).wrap('<a class="fancybox" data-fancybox="gallery" href="' + $(this).prop("src") + '"></a>'); 
    })
    //初始化fancybox，padding设为0，loop设为false
    $('.fancybox').fancybox({
      padding: 0,
      loop: false
    });
  }
})();
</script>

<!-- // 文字 -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script>
<!-- // 爱心 -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/love.js"></script>
<!-- // 按键屏蔽 需要jQuery -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/noSomeKey.js"></script>

</html>
